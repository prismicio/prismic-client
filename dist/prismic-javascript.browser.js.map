{"version":3,"file":"prismic-javascript.browser.js","sources":["../src/experiments.ts","../src/form.ts","../src/Predicates.ts","../src/Cookies.ts","../src/ResolvedApi.ts","../src/lru.ts","../src/cache.ts","../node_modules/node-fetch/browser.js","../src/request.ts","../src/HttpClient.ts","../src/Api.ts","../src/client.ts","../src/index.ts"],"sourcesContent":["export class Variation {\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  ref(): string {\n    return this.data.ref;\n  }\n\n  label(): string {\n    return this.data.label;\n  }\n}\n\nexport class Experiment {\n  variations: Variation[];\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n    this.variations = (data.variations || []).map((v: any) => {\n      return new Variation(v);\n    });\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  googleId(): string {\n    return this.data.googleId;\n  }\n\n  name(): string {\n    return this.data.name;\n  }\n}\n\nexport class Experiments {\n  drafts: Experiment[];\n  running: Experiment[];\n\n  constructor(data: any) {\n    if (data) {\n      this.drafts = (data.drafts || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n      this.running = (data.running || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n    }\n  }\n\n  current(): Experiment | null {\n    if (this.running.length > 0) {\n      return this.running[0];\n    } else {\n      return null;\n    }\n  }\n  refFromCookie(cookie: string): string | null {\n    if (!cookie || cookie.trim() === '') return null;\n    const splitted = cookie.trim().split(' ');\n    if (splitted.length < 2) return null;\n    const expId = splitted[0];\n    const varIndex = parseInt(splitted[1], 10);\n    const exp = this.running.filter((exp) => {\n      return exp.googleId() === expId && exp.variations.length > varIndex;\n    })[0];\n    return exp ? exp.variations[varIndex].ref() : null;\n  }\n}\n","import Api from './Api';\nimport ResolvedApi from './ResolvedApi';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport HttpClient from './HttpClient';\nimport { RequestCallback } from './request';\n\nexport type Fields = { [key: string]: any };\n\nexport interface Form {\n  fields: Fields;\n  action: string;\n  name: string;\n  rel: string;\n  form_method: string;\n  enctype: string;\n}\n\nexport class LazySearchForm {\n  id: string;\n  fields: Fields;\n  api: Api;\n\n  constructor(id: string, api: Api) {\n    this.id = id;\n    this.api = api;\n    this.fields = {};\n  }\n\n  set(key: string, value: any): LazySearchForm {\n    this.fields[key] = value;\n    return this;\n  }\n\n  ref(ref: string): LazySearchForm {\n    return this.set('ref', ref);\n  }\n\n  query(query: string | string[]): LazySearchForm {\n    return this.set('q', query);\n  }\n\n  pageSize(size: number): LazySearchForm {\n    return this.set('pageSize', size);\n  }\n\n  fetch(fields: string | string[]): LazySearchForm {\n    console.warn('Warning: Using Fetch is deprecated. Use the property `graphQuery` instead.');\n    return this.set('fetch', fields);\n  }\n\n  fetchLinks(fields: string | string[]): LazySearchForm {\n    console.warn('Warning: Using FetchLinks is deprecated. Use the property `graphQuery` instead.');\n    return this.set('fetchLinks', fields);\n  }\n\n  graphQuery(query: string): LazySearchForm {\n    return this.set('graphQuery', query);\n  }\n\n  lang(langCode: string): LazySearchForm {\n    return this.set('lang', langCode);\n  }\n\n  page(p: number): LazySearchForm {\n    return this.set('page', p);\n  }\n\n  after(documentId: string): LazySearchForm {\n    return this.set('after', documentId);\n  }\n\n  orderings(orderings?: string[]): LazySearchForm {\n    return this.set('orderings', orderings);\n  }\n\n  url(): Promise<string> {\n    return this.api.get().then((api) => {\n      return LazySearchForm.toSearchForm(this, api).url();\n    });\n  }\n\n  submit(cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.api.get().then((api) => {\n      return LazySearchForm.toSearchForm(this, api).submit(cb);\n    });\n  }\n\n  static toSearchForm(lazyForm: LazySearchForm, api: ResolvedApi): SearchForm {\n    const form = api.form(lazyForm.id);\n    if (form) {\n      return Object.keys(lazyForm.fields).reduce((form, fieldKey) => {\n        const fieldValue = lazyForm.fields[fieldKey];\n        if (fieldKey === 'q') {\n          return form.query(fieldValue);\n        } else if (fieldKey === 'pageSize') {\n          return form.pageSize(fieldValue);\n        } else if (fieldKey === 'fetch') {\n          return form.fetch(fieldValue);\n        } else if (fieldKey === 'fetchLinks') {\n          return form.fetchLinks(fieldValue);\n        } else if (fieldKey === 'graphQuery') {\n          return form.graphQuery(fieldValue);\n        } else if (fieldKey === 'lang') {\n          return form.lang(fieldValue);\n        } else if (fieldKey === 'page') {\n          return form.page(fieldValue);\n        } else if (fieldKey === 'after') {\n          return form.after(fieldValue);\n        } else if (fieldKey === 'orderings') {\n          return form.orderings(fieldValue);\n        } else {\n          return form.set(fieldKey, fieldValue);\n        }\n      }, form);\n    } else {\n      throw new Error(`Unable to access to form ${lazyForm.id}`);\n    }\n  }\n}\n\nexport class SearchForm {\n  httpClient: HttpClient;\n  form: Form;\n  data: any;\n\n  constructor(form: Form, httpClient: HttpClient) {\n    this.httpClient = httpClient;\n    this.form = form;\n\n    this.data = {};\n    for (const field in form.fields) {\n      if (form.fields[field]['default']) {\n        this.data[field] = [form.fields[field]['default']];\n      }\n    }\n  }\n\n  set(field: string, value: any): SearchForm {\n    const fieldDesc = this.form.fields[field];\n    if (!fieldDesc) throw new Error('Unknown field ' + field);\n    const checkedValue = value === '' || value === undefined ? null : value;\n    let values = this.data[field] || [];\n    if (fieldDesc.multiple) {\n      values = checkedValue ? values.concat([checkedValue]) : values;\n    } else {\n      values = checkedValue ? [checkedValue] : values;\n    }\n    this.data[field] = values;\n    return this;\n  }\n\n  /**\n   * Sets a ref to query on for this SearchForm. This is a mandatory\n   * method to call before calling submit(), and api.form('everything').submit()\n   * will not work.\n   */\n  ref(ref: string): SearchForm {\n    return this.set('ref', ref);\n  }\n\n  /**\n   * Sets a predicate-based query for this SearchForm. This is where you\n   * paste what you compose in your prismic.io API browser.\n   */\n  query(query: string | string[]): SearchForm {\n    if (typeof query === 'string') {\n      return this.query([query]);\n    } else if (Array.isArray(query)) {\n      return this.set('q', `[${query.join('')}]`);\n    } else {\n      throw new Error(`Invalid query : ${query}`);\n    }\n  }\n\n  /**\n   * Sets a page size to query for this SearchForm. This is an optional method.\n   *\n   * @param {number} size - The page size\n   * @returns {SearchForm} - The SearchForm itself\n   */\n  pageSize(size: number): SearchForm {\n    return this.set('pageSize', size);\n  }\n\n  /**\n   * Restrict the results document to the specified fields\n   */\n  fetch(fields: string | string[]): SearchForm {\n    console.warn('Warning: Using Fetch is deprecated. Use the property `graphQuery` instead.');\n    const strFields = Array.isArray(fields) ? fields.join(',') : fields;\n    return this.set('fetch', strFields);\n  }\n\n  /**\n   * Include the requested fields in the DocumentLink instances in the result\n   */\n  fetchLinks(fields: string | string[]): SearchForm {\n    console.warn('Warning: Using FetchLinks is deprecated. Use the property `graphQuery` instead.');\n    const strFields = Array.isArray(fields) ? fields.join(',') : fields;\n    return this.set('fetchLinks', strFields);\n  }\n\n  /**\n   * Sets the graphquery to query for this SearchForm. This is an optional method.\n   */\n  graphQuery(query: string): SearchForm {\n    return this.set('graphQuery', query);\n  }\n\n  /**\n   * Sets the language to query for this SearchForm. This is an optional method.\n   */\n  lang(langCode: string): SearchForm {\n    return this.set('lang', langCode);\n  }\n\n  /**\n   * Sets the page number to query for this SearchForm. This is an optional method.\n   */\n  page(p: number): SearchForm {\n    return this.set('page', p);\n  }\n\n  /**\n   * Remove all the documents except for those after the specified document in the list. This is an optional method.\n   */\n  after(documentId: string): SearchForm {\n    return this.set('after', documentId);\n  }\n\n  /**\n   * Sets the orderings to query for this SearchForm. This is an optional method.\n   */\n  orderings(orderings ?: string[]): SearchForm {\n    if (!orderings) {\n      return this;\n    } else {\n      return this.set('orderings', `[${orderings.join(',')}]`);\n    }\n  }\n\n  /**\n   * Build the URL to query\n   */\n  url(): string {\n    let url = this.form.action;\n    if (this.data) {\n      let sep = (url.indexOf('?') > -1 ? '&' : '?');\n      for (const key in this.data) {\n        if  (this.data.hasOwnProperty(key)) {\n          const values = this.data[key];\n          if (values) {\n            for (let i = 0; i < values.length; i++) {\n              url += sep + key + '=' + encodeURIComponent(values[i]);\n              sep = '&';\n            }\n          }\n        }\n      }\n    }\n    return url;\n  }\n\n  /**\n   * Submits the query, and calls the callback function.\n   */\n  submit(cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.httpClient.cachedRequest<ApiSearchResponse>(this.url()).then((response) => {\n      cb && cb(null, response);\n      return response;\n    }).catch((error) => {\n      cb && cb(error);\n      throw error;\n    });\n  }\n}\n","const OPERATOR = {\n  at: 'at',\n  not: 'not',\n  missing: 'missing',\n  has: 'has',\n  any: 'any',\n  in: 'in',\n  fulltext: 'fulltext',\n  similar: 'similar',\n  numberGt: 'number.gt',\n  numberLt: 'number.lt',\n  numberInRange: 'number.inRange',\n  dateBefore: 'date.before',\n  dateAfter: 'date.after',\n  dateBetween: 'date.between',\n  dateDayOfMonth: 'date.day-of-month',\n  dateDayOfMonthAfter: 'date.day-of-month-after',\n  dateDayOfMonthBefore: 'date.day-of-month-before',\n  dateDayOfWeek: 'date.day-of-week',\n  dateDayOfWeekAfter: 'date.day-of-week-after',\n  dateDayOfWeekBefore: 'date.day-of-week-before',\n  dateMonth: 'date.month',\n  dateMonthBefore: 'date.month-before',\n  dateMonthAfter: 'date.month-after',\n  dateYear: 'date.year',\n  dateHour: 'date.hour',\n  dateHourBefore: 'date.hour-before',\n  dateHourAfter: 'date.hour-after',\n  GeopointNear: 'geopoint.near',\n};\n\ntype PredicateValue = string | number | Date;\n\nfunction encode(value: PredicateValue | PredicateValue[]): string {\n  if (typeof value === 'string') {\n    return `\"${value}\"`;\n  } else if (typeof value === 'number') {\n    return value.toString();\n  } else if (value instanceof Date) {\n    return value.getTime().toString();\n  } else if (Array.isArray(value)) {\n    return `[${value.map(v => encode(v)).join(',')}]`;\n  } else {\n    throw new Error(`Unable to encode ${value} of type ${typeof value}`);\n  }\n}\n\nconst geopoint = {\n  near(fragment: string, latitude: number, longitude: number, radius: number): string {\n    return `[${OPERATOR.GeopointNear}(${fragment}, ${latitude}, ${longitude}, ${radius})]`;\n  },\n};\n\nconst date = {\n\n  before(fragment: string, before: PredicateValue): string {\n    return `[${OPERATOR.dateBefore}(${fragment}, ${encode(before)})]`;\n  },\n\n  after(fragment: string, after: PredicateValue): string {\n    return `[${OPERATOR.dateAfter}(${fragment}, ${encode(after)})]`;\n  },\n\n  between(fragment: string, before: PredicateValue, after: PredicateValue): string {\n    return `[${OPERATOR.dateBetween}(${fragment}, ${encode(before)}, ${encode(after)})]`;\n  },\n\n  dayOfMonth(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonth}(${fragment}, ${day})]`;\n  },\n\n  dayOfMonthAfter(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonthAfter}(${fragment}, ${day})]`;\n  },\n\n  dayOfMonthBefore(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonthBefore}(${fragment}, ${day})]`;\n  },\n\n  dayOfWeek(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeek}(${fragment}, ${encode(day)})]`;\n  },\n\n  dayOfWeekAfter(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeekAfter}(${fragment}, ${encode(day)})]`;\n  },\n\n  dayOfWeekBefore(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeekBefore}(${fragment}, ${encode(day)})]`;\n  },\n\n  month(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonth}(${fragment}, ${encode(month)})]`;\n  },\n\n  monthBefore(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonthBefore}(${fragment}, ${encode(month)})]`;\n  },\n\n  monthAfter(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonthAfter}(${fragment}, ${encode(month)})]`;\n  },\n\n  year(fragment: string, year: number): string {\n    return `[${OPERATOR.dateYear}(${fragment}, ${year})]`;\n  },\n\n  hour(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHour}(${fragment}, ${hour})]`;\n  },\n\n  hourBefore(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHourBefore}(${fragment}, ${hour})]`;\n  },\n\n  hourAfter(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHourAfter}(${fragment}, ${hour})]`;\n  },\n};\n\nconst number = {\n  gt(fragment: string, value: number): string {\n    return `[${OPERATOR.numberGt}(${fragment}, ${value})]`;\n  },\n\n  lt(fragment: string, value: number): string {\n    return `[${OPERATOR.numberLt}(${fragment}, ${value})]`;\n  },\n\n  inRange(fragment: string, before: number, after: number): string {\n    return `[${OPERATOR.numberInRange}(${fragment}, ${before}, ${after})]`;\n  },\n};\n\nexport default {\n  at(fragment: string, value: PredicateValue | PredicateValue[]): string {\n    return `[${OPERATOR.at}(${fragment}, ${encode(value)})]`;\n  },\n\n  not(fragment: string, value: PredicateValue | PredicateValue[]): string {\n    return `[${OPERATOR.not}(${fragment}, ${encode(value)})]`;\n  },\n\n  missing(fragment: string): string {\n    return `[${OPERATOR.missing}(${fragment})]`;\n  },\n\n  has(fragment: string): string {\n    return `[${OPERATOR.has}(${fragment})]`;\n  },\n\n  any(fragment: string, values: PredicateValue[]): string {\n    return `[${OPERATOR.any}(${fragment}, ${encode(values)})]`;\n  },\n\n  in(fragment: string, values: string[]): string {\n    return `[${OPERATOR.in}(${fragment}, ${encode(values)})]`;\n  },\n\n  fulltext(fragment: string, value: string): string {\n    return `[${OPERATOR.fulltext}(${fragment}, ${encode(value)})]`;\n  },\n\n  similar(documentId: string, maxResults: number): string {\n    return `[${OPERATOR.similar}(\"${documentId}\", ${maxResults})]`;\n  },\n\n  date,\n\n  dateBefore: date.before,\n\n  dateAfter: date.after,\n\n  dateBetween: date.between,\n\n  dayOfMonth: date.dayOfMonth,\n\n  dayOfMonthAfter: date.dayOfMonthAfter,\n\n  dayOfMonthBefore: date.dayOfMonthBefore,\n\n  dayOfWeek: date.dayOfWeek,\n\n  dayOfWeekAfter: date.dayOfWeekAfter,\n\n  dayOfWeekBefore: date.dayOfWeekBefore,\n\n  month: date.month,\n\n  monthBefore: date.monthBefore,\n\n  monthAfter: date.monthAfter,\n\n  year: date.year,\n\n  hour: date.hour,\n\n  hourBefore: date.hourBefore,\n\n  hourAfter: date.hourAfter,\n\n  number,\n\n  gt: number.gt,\n\n  lt: number.lt,\n\n  inRange: number.inRange,\n\n  near: geopoint.near,\n\n  geopoint,\n};\n","export interface Cookie {\n  [key: string]: string;\n  value: string;\n}\n\n// Some portions of code from https://github.com/jshttp/cookie\n\nvar decode = decodeURIComponent;\n\nfunction tryDecode(str: string, decode: (str: string) => string) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n\nfunction parse(str: string, options?: any) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = <Cookie>{};\n  var opt = options || {};\n  var pairs = str.split(/; */);\n  var dec = opt.decode || decode;\n\n  pairs.forEach(function(pair) {\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      return;\n    }\n\n    var key = pair.substr(0, eq_idx).trim();\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  });\n\n  return obj;\n}\n\nexport default { parse };\n","import { Document } from \"./documents\";\nimport { RequestHandler, RequestCallback } from './request';\nimport { ApiCache } from './cache';\nimport { Experiment, Experiments } from './experiments';\nimport { SearchForm, Form } from './form';\nimport Predicates from './Predicates';\nimport Cookies from './Cookies';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport HttpClient from './HttpClient';\nimport { Client } from './client';\n\nexport const PREVIEW_COOKIE = 'io.prismic.preview';\nexport const EXPERIMENT_COOKIE = 'io.prismic.experiment';\n\nexport interface Ref {\n  ref: string;\n  label: string;\n  isMasterRef: boolean;\n  scheduledAt: string;\n  id: string;\n}\n\nexport interface ApiData {\n  refs: Ref[];\n  bookmarks: { [key: string]: string };\n  types: { [key: string]: string };\n  tags: string[];\n  forms: { [key: string]: Form };\n  experiments: any;\n  oauth_initiate: string;\n  oauth_token: string;\n  version: string;\n  licence: string;\n}\n\nexport interface PreviewResponse {\n  mainDocument?: string;\n}\n\nexport interface QueryOptions {\n  [key: string]: string | number | string[];\n}\n\nexport interface ResolvedApiOptions {\n  req?: any;\n}\n\nexport default class ResolvedApi implements Client {\n  data: ApiData;\n  masterRef: Ref;\n  experiments: Experiments;\n  options: ResolvedApiOptions;\n  httpClient: HttpClient;\n  bookmarks: { [key: string]: string };\n  refs: Ref[];\n  tags: string[];\n  types: { [key: string]: string };\n\n  constructor(data: ApiData, httpClient: HttpClient, options: ResolvedApiOptions) {\n    this.data = data;\n    this.masterRef = data.refs.filter(ref => ref.isMasterRef)[0];\n    this.experiments = new Experiments(data.experiments);\n    this.bookmarks = data.bookmarks;\n    this.httpClient = httpClient;\n    this.options = options;\n    this.refs = data.refs;\n    this.tags = data.tags;\n    this.types = data.types;\n  }\n\n  /**\n   * Returns a useable form from its id, as described in the RESTful description of the API.\n   * For instance: api.form(\"everything\") works on every repository (as \"everything\" exists by default)\n   * You can then chain the calls: api.form(\"everything\").query('[[:d = at(document.id, \"UkL0gMuvzYUANCpf\")]]').ref(ref).submit()\n   */\n  form(formId: string): SearchForm | null {\n    const form = this.data.forms[formId];\n    if (form) {\n      return new SearchForm(form, this.httpClient);\n    }\n    return null;\n  }\n\n  everything(): SearchForm {\n    const f = this.form('everything');\n    if (!f) throw new Error('Missing everything form');\n    return f;\n  }\n\n  /**\n   * The ID of the master ref on this prismic.io API.\n   * Do not use like this: searchForm.ref(api.master()).\n   * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n   */\n  master(): string {\n    return this.masterRef.ref;\n  }\n\n  /**\n   * Returns the ref ID for a given ref's label.\n   * Do not use like this: searchForm.ref(api.ref(\"Future release label\")).\n   * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n   */\n  ref(label: string): string | null {\n    const ref = this.data.refs.filter(ref => ref.label === label)[0];\n    return ref ? ref.ref : null;\n  }\n\n  currentExperiment(): Experiment | null {\n    return this.experiments.current();\n  }\n\n  /**\n   * Query the repository\n   */\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb: RequestCallback<ApiSearchResponse> = () => {}): Promise<ApiSearchResponse> {\n    const { options, callback } = typeof optionsOrCallback === 'function'\n        ? { options: {} as QueryOptions, callback: optionsOrCallback }\n    : { options: optionsOrCallback || {}, callback: cb };\n\n    let form = this.everything();\n    for (const key in options) {\n      form = form.set(key, options[key]);\n    }\n    if (!options.ref) {\n      // Look in cookies if we have a ref (preview or experiment)\n      let cookieString = '';\n      if (this.options.req) { // NodeJS\n        cookieString = this.options.req.headers['cookie'] || '';\n      } else if (typeof window !== 'undefined' && window.document) { // Browser\n        cookieString = window.document.cookie || '';\n      }\n      const cookies = Cookies.parse(cookieString);\n      const previewRef = cookies[PREVIEW_COOKIE];\n      const experimentRef = this.experiments.refFromCookie(cookies[EXPERIMENT_COOKIE]);\n      form = form.ref(previewRef || experimentRef || this.masterRef.ref);\n    }\n    if (q) {\n      form.query(q);\n    }\n    return form.submit(callback);\n  }\n\n  /**\n   * Retrieve the document returned by the given query\n   * @param {string|array|Predicate} the query\n   * @param {object} additional parameters. In NodeJS, pass the request as 'req'.\n   * @param {function} callback(err, doc)\n   */\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb?: RequestCallback<Document>): Promise<Document> {\n    const { options, callback } = typeof optionsOrCallback === 'function'\n        ? { options: {} as QueryOptions, callback: optionsOrCallback }\n        : { options: optionsOrCallback || {}, callback: cb || (() => {}) };\n\n    options.page = 1;\n    options.pageSize = 1;\n\n    return this.query(q, options).then((response) => {\n      const document = response && response.results && response.results[0];\n      callback(null, document);\n      return document;\n    }).catch((error) => {\n      callback(error);\n      throw error;\n    });\n  }\n\n  /**\n   * Retrieve the document with the given id\n   */\n  getByID(id: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    if (!options.lang) options.lang = '*';\n    return this.queryFirst(Predicates.at('document.id', id), options, cb);\n  }\n\n  /**\n   * Retrieve multiple documents from an array of id\n   */\n  getByIDs(ids: string[], maybeOptions?: QueryOptions, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    const options = maybeOptions || {};\n    if (!options.lang) options.lang = '*';\n    return this.query(Predicates.in('document.id', ids), options, cb);\n  }\n\n  /**\n   * Retrieve the document with the given uid\n   */\n  getByUID(type: string, uid: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    if(options.lang === \"*\") throw new Error(\"FORDIDDEN. You can't use getByUID with *, use the predicates instead.\")\n    if(!options.page) options.page = 1;\n\n    return this.queryFirst(Predicates.at(`my.${type}.uid`, uid), options, cb);\n  }\n\n  /**\n   * Retrieve the singleton document with the given type\n   */\n  getSingle(type: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    return this.queryFirst(Predicates.at('document.type', type), options, cb);\n  }\n\n  /**\n   * Retrieve the document with the given bookmark\n   */\n  getBookmark(bookmark: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const id = this.data.bookmarks[bookmark];\n    if (id) {\n      return this.getByID(id, maybeOptions, cb);\n    } else {\n      return Promise.reject('Error retrieving bookmarked id');\n    }\n  }\n\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.httpClient.request<PreviewResponse>(token, (e, result) => {\n        if (e) {\n          cb && cb(e);\n          reject(e);\n        } else if (result) {\n          if (!result.mainDocument) {\n            cb && cb(null, defaultUrl);\n            resolve(defaultUrl);\n          } else {\n            return this.getByID(result.mainDocument, { ref: token }).then((document) => {\n              if (!document) {\n                cb && cb(null, defaultUrl);\n                resolve(defaultUrl);\n              } else {\n                const url = linkResolver(document);\n                cb && cb(null, url);\n                resolve(url);\n              }\n            }).catch(reject);\n          }\n        }\n      });\n    });\n  }\n}\n","/**\n* A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n* recently used items while discarding least recently used items when its limit\n* is reached.\n*\n* Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n* Typescript-ified by Oleksandr Nikitin <https://tvori.info>\n*\n* Illustration of the design:\n*\n*       entry             entry             entry             entry\n*       ______            ______            ______            ______\n*      | head |.newer => |      |.newer => |      |.newer => | tail |\n*      |  A   |          |  B   |          |  C   |          |  D   |\n*      |______| <= older.|______| <= older.|______| <= older.|______|\n*\n*  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n*/\n\nexport function MakeLRUCache(limit: number): ILRUCache {\n    return new (<any>LRUCache)(limit);\n}\n\nexport interface ILRUCache {\n    put(key: string, value: any): void;\n    get(key: string, Entry: boolean): any;\n    remove(key: String): void;\n    removeAll(): void;\n}\n\nfunction LRUCache(limit: number) {\n    // Current size of the cache. (Read-only).\n    this.size = 0;\n    // Maximum number of items this cache can hold.\n    this.limit = limit;\n    this._keymap = {};\n}\n\ninterface IEntry {\n    newer?: IEntry;\n    older?: IEntry;\n    key: string;\n    value: any;\n}\n\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function (key: string, value: any) {\n    var entry: IEntry = { key: key, value: value };\n    // Note: No protection agains replacing, and thus orphan entries. By design.\n    this._keymap[key] = entry;\n    if (this.tail) {\n        // link previous tail to the new tail (entry)\n        this.tail.newer = entry;\n        entry.older = this.tail;\n    } else {\n        // we're first in -- yay\n        this.head = entry;\n    }\n    // add new entry to the end of the linked list -- it's now the freshest entry.\n    this.tail = entry;\n    if (this.size === this.limit) {\n        // we hit the limit -- remove the head\n        return this.shift();\n    } else {\n        // increase the size counter\n        this.size++;\n    }\n};\n\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function () {\n    // todo: handle special case when limit == 1\n    var entry = this.head;\n    if (entry) {\n        if (this.head.newer) {\n            this.head = this.head.newer;\n            this.head.older = undefined;\n        } else {\n            this.head = undefined;\n        }\n        // Remove last strong reference to <entry> and remove links from the purged\n        // entry being returned:\n        entry.newer = entry.older = undefined;\n        // delete is slow, but we need to do this to avoid uncontrollable growth:\n        delete this._keymap[entry.key];\n    }\n    console.log('purging ', entry.key);\n    return entry;\n};\n\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function (key: string, returnEntry: boolean): any {\n    // First, find our cache entry\n    var entry = this._keymap[key];\n    if (entry === undefined) return; // Not cached. Sorry.\n    // As <key> was found in the cache, register it as being requested recently\n    if (entry === this.tail) {\n        // Already the most recently used entry, so no need to update the list\n        return returnEntry ? entry : entry.value;\n    }\n    // HEAD--------------TAIL\n    //   <.older   .newer>\n    //  <--- add direction --\n    //   A  B  C  <D>  E\n    if (entry.newer) {\n        if (entry === this.head)\n            this.head = entry.newer;\n        entry.newer.older = entry.older; // C <-- E.\n    }\n    if (entry.older)\n        entry.older.newer = entry.newer; // C. --> E\n    entry.newer = undefined; // D --x\n    entry.older = this.tail; // D. --> E\n    if (this.tail)\n        this.tail.newer = entry; // E. <-- D\n    this.tail = entry;\n    return returnEntry ? entry : entry.value;\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function (key: string) {\n    return this._keymap[key];\n};\n\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function (key: string, value: any) {\n    var oldvalue: any;\n    var entry = this.get(key, true);\n    if (entry) {\n        oldvalue = entry.value;\n        entry.value = value;\n    } else {\n        oldvalue = this.put(key, value);\n        if (oldvalue) oldvalue = oldvalue.value;\n    }\n    return oldvalue;\n};\n\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function (key: string) {\n    var entry = this._keymap[key];\n    if (!entry) return;\n    delete this._keymap[entry.key]; // need to do delete unfortunately\n    if (entry.newer && entry.older) {\n        // relink the older entry with the newer entry\n        entry.older.newer = entry.newer;\n        entry.newer.older = entry.older;\n    } else if (entry.newer) {\n        // remove the link to us\n        entry.newer.older = undefined;\n        // link the newer entry to head\n        this.head = entry.newer;\n    } else if (entry.older) {\n        // remove the link to us\n        entry.older.newer = undefined;\n        // link the newer entry to head\n        this.tail = entry.older;\n    } else {// if(entry.older === undefined && entry.newer === undefined) {\n        this.head = this.tail = undefined;\n    }\n\n    this.size--;\n    return entry.value;\n};\n\n/** Removes all entries */\nLRUCache.prototype.removeAll = function () {\n    // This should be safe, as we never expose strong refrences to the outside\n    this.head = this.tail = undefined;\n    this.size = 0;\n    this._keymap = {};\n};\n\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n    LRUCache.prototype.keys = function () { return Object.keys(this._keymap); };\n} else {\n    LRUCache.prototype.keys = function () {\n        var keys: string[] = [];\n        for (var k in this._keymap) keys.push(k);\n        return keys;\n    };\n}\n\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function (fun: Function, context: any, desc: boolean) {\n    var entry: IEntry | undefined;\n    if (context === true) { desc = true; context = undefined; }\n    else if (typeof context !== 'object') context = this;\n    if (desc) {\n        entry = this.tail;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.older;\n        }\n    } else {\n        entry = this.head;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.newer;\n        }\n    }\n};\n\n/** Returns a JSON (array) representation */\n//LRUCache.prototype.toJSON = function () {\n//    var s: IEntry[] = [], entry = this.head;\n//    while (entry) {\n//        s.push({ key: entry.key.toJSON(), value: entry.value.toJSON() });\n//        entry = entry.newer;\n//    }\n//    return s;\n//};\n\n/** Returns a String representation */\nLRUCache.prototype.toString = function () {\n    var s = '', entry = this.head;\n    while (entry) {\n        s += String(entry.key) + ':' + entry.value;\n        entry = entry.newer;\n        if (entry)\n            s += ' < ';\n    }\n    return s;\n};\n\n// Export ourselves\n//if (typeof this === 'object') this.LRUCache = LRUCache;","import { ILRUCache, MakeLRUCache } from './lru';\n\nexport interface ApiCache {\n  isExpired(key: String): boolean;\n  get<T>(key: string, cb: (error: Error | null, entry?: T) => void): void;\n  set<T>(key: string, value: T, ttl: number, cb?: (error: Error | null) => void): void;\n  remove(key: string, cb?: (error: Error | null) => void): void;\n  clear(cb?: (error: Error | null) => void): void;\n}\n\nexport class DefaultApiCache implements ApiCache {\n  lru: ILRUCache;\n\n  constructor(limit: number = 1000) {\n    this.lru = MakeLRUCache(limit);\n  }\n\n  isExpired(key: string): boolean {\n    const value = this.lru.get(key, false);\n    if (value) {\n      return value.expiredIn !== 0 && value.expiredIn < Date.now();\n    } else {\n      return false;\n    }\n  }\n\n  get<T>(key: string, cb: (error: Error | null, entry?: T) => void): void {\n    const value = this.lru.get(key, false);\n    if (value && !this.isExpired(key)) {\n      cb(null, value.data);\n    } else {\n      cb && cb(null);\n    }\n  }\n\n  set<T>(key: string, value: T, ttl: number, cb?: (error: Error | null) => void): void {\n    this.lru.remove(key);\n    this.lru.put(key, {\n      data: value,\n      expiredIn: ttl ? (Date.now() + (ttl * 1000)) : 0,\n    });\n    cb && cb(null);\n  }\n\n  remove(key: string, cb?: (error: Error | null) => void): void {\n    this.lru.remove(key);\n    cb && cb(null);\n  }\n\n  clear(cb?: (error: Error | null) => void): void {\n    this.lru.removeAll();\n    cb && cb(null);\n  }\n}\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nexports.default = global.fetch.bind(global);\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","// In the browser, node-fetch exports self.fetch:\n// https://github.com/bitinn/node-fetch/blob/master/browser.js\nimport fetch, { RequestInit } from 'node-fetch';\n\n// Number of maximum simultaneous connections to the prismic server\nconst MAX_CONNECTIONS: number = 20;\n// Number of requests currently running (capped by MAX_CONNECTIONS)\nlet running: number = 0;\n\ninterface Task {\n  url: string;\n  callback: RequestCallback<any>;\n}\n\ninterface NodeRequestInit extends RequestInit {\n  agent?: any;\n}\n\nfunction fetchRequest<T>(url: string, options: RequestHandlerOption, callback: RequestCallback<T>): void {\n\n  const fetchOptions = {\n    headers: {\n      Accept: 'application/json',\n    },\n  } as NodeRequestInit;\n\n  if (options && options.proxyAgent) {\n    fetchOptions.agent = options.proxyAgent;\n  }\n\n  fetch(url, fetchOptions).then((xhr) => {\n    if (~~(xhr.status / 100 !== 2)) {\n        /**\n         * @description\n         * drain the xhr before throwing an error to prevent memory leaks\n         * @link https://github.com/bitinn/node-fetch/issues/83\n         */\n      return xhr.text().then(() => {\n        const e: any = new Error(`Unexpected status code [${xhr.status}] on URL ${url}`);\n        e.status = xhr.status;\n        throw e;\n      });\n    }\n\n    return xhr.json().then((result) => {\n      const cacheControl = xhr.headers.get('cache-control');\n      const parsedCacheControl = cacheControl ? /max-age=(\\d+)/.exec(cacheControl) : null;\n      const ttl = parsedCacheControl ? parseInt(parsedCacheControl[1], 10) : undefined;\n\n      callback(null, result, xhr, ttl);\n    });\n  }).catch(callback);\n}\n\nexport type RequestCallback<T> = (error: Error | null, result?: T | null, xhr?: any, ttl?: number) => void;\n\nexport interface RequestHandlerOption {\n  proxyAgent?: any;\n}\n\nexport interface RequestHandler {\n  request<T>(url: string, cb: RequestCallback<T>): void;\n}\n\nexport class DefaultRequestHandler implements RequestHandler {\n\n  options: RequestHandlerOption;\n\n  constructor(options?: RequestHandlerOption) {\n    this.options = options || {};\n  }\n\n  request<T>(url: string, callback: RequestCallback<T>): void {\n\n    fetchRequest(url, this.options, callback);\n  }\n}\n","import { ApiCache, DefaultApiCache } from './cache';\nimport { RequestHandler, DefaultRequestHandler, RequestCallback } from './request';\n\nexport interface HttpClientOptions {\n  ttl?: number;\n  cacheKey?: string;\n}\n\nexport default class HttpClient {\n\n  private cache: ApiCache;\n  private requestHandler: RequestHandler;\n\n  constructor(requestHandler?: RequestHandler, cache?: ApiCache, proxyAgent?: any) {\n    this.requestHandler = requestHandler || new DefaultRequestHandler({ proxyAgent });\n    this.cache = cache || new DefaultApiCache();\n  }\n\n  request<T>(url: string, callback?: RequestCallback<T>): void {\n    this.requestHandler.request<T>(url, (err, result, xhr, ttl) => {\n      if (err) {\n        callback && callback(err, null, xhr, ttl);\n      } else if (result) {\n        callback && callback(null, result, xhr, ttl);\n      }\n    });\n  }\n\n  /**\n   * Fetch a URL corresponding to a query, and parse the response as a Response object\n   */\n  cachedRequest<T>(url: string, maybeOptions?: HttpClientOptions): Promise<T> {\n    const options = maybeOptions || {};\n    const run = (cb: RequestCallback<T>) => {\n      const cacheKey = options.cacheKey || url;\n      this.cache.get<T>(cacheKey, (cacheGetError, cacheGetValue) => {\n        if (cacheGetError || cacheGetValue) {\n          cb(cacheGetError, cacheGetValue);\n        } else {\n          this.request<T>(url, (fetchError, fetchValue, xhr, ttlReq) => {\n            if (fetchError) {\n              cb(fetchError, null);\n            } else {\n              const ttl = ttlReq || options.ttl;\n              if (ttl) {\n                this.cache.set(cacheKey, fetchValue, ttl, cb);\n              }\n              cb(null, fetchValue);\n            }\n          });\n        }\n      });\n    };\n\n    return new Promise((resolve, reject) => {\n      run((err, value) => {\n        if (err) reject(err);\n        if (value) resolve(value);\n      });\n    });\n  }\n}\n","import Predicates from './Predicates';\nimport { RequestHandler, RequestCallback } from './request';\nimport { Document } from './documents';\nimport { ApiCache } from './cache';\nimport ResolvedApi, { ApiData } from './ResolvedApi';\nimport HttpClient from './HttpClient';\n\nexport interface ApiOptions {\n  accessToken?: string;\n  requestHandler?: RequestHandler;\n  req?: any;\n  apiCache?: ApiCache;\n  apiDataTTL?: number;\n  proxyAgent?: any;\n}\n\nexport default class Api {\n  url: string;\n  options: ApiOptions;\n  apiDataTTL: number;\n  httpClient: HttpClient;\n\n  constructor(url: string, options?: ApiOptions) {\n    this.options = options || {};\n    this.url = url;\n    if (this.options.accessToken) {\n      const accessTokenParam = `access_token=${this.options.accessToken}`;\n      this.url += (url.indexOf('?') > -1 ? '&' : '?') + accessTokenParam;\n    }\n    this.apiDataTTL = this.options.apiDataTTL || 5;\n    this.httpClient = new HttpClient(\n      this.options.requestHandler,\n      this.options.apiCache,\n      this.options.proxyAgent,\n    );\n  }\n\n  /**\n   * Fetches data used to construct the api client, from cache if it's\n   * present, otherwise from calling the prismic api endpoint (which is\n   * then cached).\n   */\n  get(cb?: RequestCallback<ResolvedApi>): Promise<ResolvedApi> {\n    return this.httpClient.cachedRequest<ApiData>(this.url, { ttl: this.apiDataTTL }).then((data) => {\n      const resolvedApi = new ResolvedApi(data, this.httpClient, this.options);\n      cb && cb(null, resolvedApi);\n      return resolvedApi;\n    }).catch((error) => {\n      cb && cb(error);\n      throw error;\n    });\n  }\n}\n","import { Document } from \"./documents\";\nimport ResolvedApi, { QueryOptions, EXPERIMENT_COOKIE, PREVIEW_COOKIE } from './ResolvedApi';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport { SearchForm, LazySearchForm } from './form';\nimport { Experiment } from './experiments';\nimport { RequestHandler, RequestCallback } from './request';\nimport Api, { ApiOptions } from './Api';\n\nexport interface Client {\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse>;\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb: RequestCallback<Document>): Promise<Document>;\n  getByID(id: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getByIDs(ids: string[], options: QueryOptions, cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse>;\n  getByUID(type: string, uid: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getSingle(type: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getBookmark(bookmark: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string>;\n}\n\nexport class DefaultClient implements Client {\n\n  api: Api;\n  resolvedApi: ResolvedApi;\n\n  constructor(url: string, options?: ApiOptions) {\n    this.api = new Api(url, options);\n  }\n\n  getApi(): Promise<ResolvedApi> {\n    return this.api.get();\n  }\n\n  everything(): LazySearchForm {\n    return this.form('everything');\n  }\n\n  form(formId: string): LazySearchForm {\n    return new LazySearchForm(formId, this.api);\n  }\n\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.getApi().then(api => api.query(q, optionsOrCallback, cb));\n  }\n\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.queryFirst(q, optionsOrCallback, cb));\n  }\n\n  getByID(id: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getByID(id, options, cb));\n  }\n\n  getByIDs(ids: string[], options: QueryOptions, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.getApi().then(api => api.getByIDs(ids, options, cb));\n  }\n\n  getByUID(type: string, uid: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getByUID(type, uid, options, cb));\n  }\n\n  getSingle(type: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getSingle(type, options, cb));\n  }\n\n  getBookmark(bookmark: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getBookmark(bookmark, options, cb));\n  }\n\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string> {\n    return this.getApi().then(api => api.previewSession(token, linkResolver, defaultUrl, cb));\n  }\n\n  static getApi(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n    const api = new Api(url, options);\n    return api.get();\n  }\n}\n","import ResolvedApi, { EXPERIMENT_COOKIE as experimentCookie, PREVIEW_COOKIE as previewCookie } from './ResolvedApi';\nimport Predicates from './Predicates';\nimport { Experiments } from './experiments';\nimport Api, { ApiOptions } from './Api';\nimport { DefaultClient } from './client';\n\nexport {\n  experimentCookie,\n  previewCookie,\n  Predicates,\n  Experiments,\n  Api\n};\n\nexport function client(url: string, options?: ApiOptions) {\n  return new DefaultClient(url, options);\n}\n\nexport function getApi(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n  return DefaultClient.getApi(url, options);\n}\n\nexport function api(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n  return getApi(url, options);\n}"],"names":["fetch"],"mappings":"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"}