(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("cross-fetch/polyfill"));
	else if(typeof define === 'function' && define.amd)
		define("PrismicJS", ["cross-fetch/polyfill"], factory);
	else if(typeof exports === 'object')
		exports["PrismicJS"] = factory(require("cross-fetch/polyfill"));
	else
		root["PrismicJS"] = factory(root["cross-fetch/polyfill"]);
})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_cross_fetch_polyfill__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUHJpc21pY0pTLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcz9mMjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/process/browser.js\n");

/***/ }),

/***/ "./node_modules/promise-polyfill/src/finally.js":
/*!******************************************************!*\
  !*** ./node_modules/promise-polyfill/src/finally.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9zcmMvZmluYWxseS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLXBvbHlmaWxsL3NyYy9maW5hbGx5LmpzP2ZlOTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIGNvbnN0cnVjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuIHRoaXMudGhlbihcbiAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZWplY3QocmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/promise-polyfill/src/finally.js\n");

/***/ }),

/***/ "./node_modules/promise-polyfill/src/index.js":
/*!****************************************************!*\
  !*** ./node_modules/promise-polyfill/src/index.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(setImmediate) {/* harmony import */ var _finally__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./finally */ \"./node_modules/promise-polyfill/src/finally.js\");\n\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = _finally__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Promise);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../timers-browserify/main.js */ \"./node_modules/timers-browserify/main.js\").setImmediate))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9zcmMvaW5kZXguanM/MDdmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJvbWlzZUZpbmFsbHkgZnJvbSAnLi9maW5hbGx5JztcblxuLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gcHJvbWlzZS1wb2x5ZmlsbCB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbi8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxudmFyIHNldFRpbWVvdXRGdW5jID0gc2V0VGltZW91dDtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8vIFBvbHlmaWxsIGZvciBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vdCBhIGZ1bmN0aW9uJyk7XG4gIHRoaXMuX3N0YXRlID0gMDtcbiAgdGhpcy5faGFuZGxlZCA9IGZhbHNlO1xuICB0aGlzLl92YWx1ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZGVmZXJyZWRzID0gW107XG5cbiAgZG9SZXNvbHZlKGZuLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlKHNlbGYsIGRlZmVycmVkKSB7XG4gIHdoaWxlIChzZWxmLl9zdGF0ZSA9PT0gMykge1xuICAgIHNlbGYgPSBzZWxmLl92YWx1ZTtcbiAgfVxuICBpZiAoc2VsZi5fc3RhdGUgPT09IDApIHtcbiAgICBzZWxmLl9kZWZlcnJlZHMucHVzaChkZWZlcnJlZCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlbGYuX2hhbmRsZWQgPSB0cnVlO1xuICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbigpIHtcbiAgICB2YXIgY2IgPSBzZWxmLl9zdGF0ZSA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgIChzZWxmLl9zdGF0ZSA9PT0gMSA/IHJlc29sdmUgOiByZWplY3QpKGRlZmVycmVkLnByb21pc2UsIHNlbGYuX3ZhbHVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldDtcbiAgICB0cnkge1xuICAgICAgcmV0ID0gY2Ioc2VsZi5fdmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShzZWxmLCBuZXdWYWx1ZSkge1xuICB0cnkge1xuICAgIC8vIFByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gICAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICBpZiAoXG4gICAgICBuZXdWYWx1ZSAmJlxuICAgICAgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG5ld1ZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICkge1xuICAgICAgdmFyIHRoZW4gPSBuZXdWYWx1ZS50aGVuO1xuICAgICAgaWYgKG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBzZWxmLl9zdGF0ZSA9IDM7XG4gICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIGZpbmFsZShzZWxmKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkb1Jlc29sdmUoYmluZCh0aGVuLCBuZXdWYWx1ZSksIHNlbGYpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHNlbGYuX3N0YXRlID0gMTtcbiAgICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgIGZpbmFsZShzZWxmKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlamVjdChzZWxmLCBlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgc2VsZi5fc3RhdGUgPSAyO1xuICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICBmaW5hbGUoc2VsZik7XG59XG5cbmZ1bmN0aW9uIGZpbmFsZShzZWxmKSB7XG4gIGlmIChzZWxmLl9zdGF0ZSA9PT0gMiAmJiBzZWxmLl9kZWZlcnJlZHMubGVuZ3RoID09PSAwKSB7XG4gICAgUHJvbWlzZS5faW1tZWRpYXRlRm4oZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNlbGYuX2hhbmRsZWQpIHtcbiAgICAgICAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4oc2VsZi5fdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGYuX2RlZmVycmVkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGhhbmRsZShzZWxmLCBzZWxmLl9kZWZlcnJlZHNbaV0pO1xuICB9XG4gIHNlbGYuX2RlZmVycmVkcyA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2UpIHtcbiAgdGhpcy5vbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogbnVsbDtcbiAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbn1cblxuLyoqXG4gKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxuICogb25GdWxmaWxsZWQgYW5kIG9uUmVqZWN0ZWQgYXJlIG9ubHkgY2FsbGVkIG9uY2UuXG4gKlxuICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxuICovXG5mdW5jdGlvbiBkb1Jlc29sdmUoZm4sIHNlbGYpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBmbihcbiAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHJlamVjdChzZWxmLCByZWFzb24pO1xuICAgICAgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZWplY3Qoc2VsZiwgZXgpO1xuICB9XG59XG5cblByb21pc2UucHJvdG90eXBlWydjYXRjaCddID0gZnVuY3Rpb24ob25SZWplY3RlZCkge1xuICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHZhciBwcm9tID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9tKSk7XG4gIHJldHVybiBwcm9tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IHByb21pc2VGaW5hbGx5O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uKGFycikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKCFhcnIgfHwgdHlwZW9mIGFyci5sZW5ndGggPT09ICd1bmRlZmluZWQnKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZS5hbGwgYWNjZXB0cyBhbiBhcnJheScpO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKFtdKTtcbiAgICB2YXIgcmVtYWluaW5nID0gYXJncy5sZW5ndGg7XG5cbiAgICBmdW5jdGlvbiByZXMoaSwgdmFsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodmFsICYmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgIHZhciB0aGVuID0gdmFsLnRoZW47XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGVuLmNhbGwoXG4gICAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgICAgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXJnc1tpXSA9IHZhbDtcbiAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgcmVzb2x2ZShhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcyhpLCBhcmdzW2ldKTtcbiAgICB9XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlamVjdCh2YWx1ZSk7XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsdWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0udGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBVc2UgcG9seWZpbGwgZm9yIHNldEltbWVkaWF0ZSBmb3IgcGVyZm9ybWFuY2UgZ2FpbnNcblByb21pc2UuX2ltbWVkaWF0ZUZuID1cbiAgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICBmdW5jdGlvbihmbikge1xuICAgICAgc2V0SW1tZWRpYXRlKGZuKTtcbiAgICB9KSB8fFxuICBmdW5jdGlvbihmbikge1xuICAgIHNldFRpbWVvdXRGdW5jKGZuLCAwKTtcbiAgfTtcblxuUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4gPSBmdW5jdGlvbiBfdW5oYW5kbGVkUmVqZWN0aW9uRm4oZXJyKSB7XG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZSkge1xuICAgIGNvbnNvbGUud2FybignUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOicsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9taXNlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/promise-polyfill/src/index.js\n");

/***/ }),

/***/ "./node_modules/promise-polyfill/src/polyfill.js":
/*!*******************************************************!*\
  !*** ./node_modules/promise-polyfill/src/polyfill.js ***!
  \*******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./node_modules/promise-polyfill/src/index.js\");\n/* harmony import */ var _finally__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./finally */ \"./node_modules/promise-polyfill/src/finally.js\");\n\n\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = _finally__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9zcmMvcG9seWZpbGwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9zcmMvcG9seWZpbGwuanM/Njg0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvbWlzZSBmcm9tICcuL2luZGV4JztcbmltcG9ydCBwcm9taXNlRmluYWxseSBmcm9tICcuL2ZpbmFsbHknO1xuXG52YXIgZ2xvYmFsTlMgPSAoZnVuY3Rpb24oKSB7XG4gIC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xuICAvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcbiAgLy8gSG93ZXZlciwgdGhpcyBjYXVzZXMgQ1NQIHZpb2xhdGlvbnMgaW4gQ2hyb21lIGFwcHMuXG4gIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWw7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn0pKCk7XG5cbmlmICghZ2xvYmFsTlMuUHJvbWlzZSkge1xuICBnbG9iYWxOUy5Qcm9taXNlID0gUHJvbWlzZTtcbn0gZWxzZSBpZiAoIWdsb2JhbE5TLlByb21pc2UucHJvdG90eXBlWydmaW5hbGx5J10pIHtcbiAgZ2xvYmFsTlMuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IHByb21pc2VGaW5hbGx5O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/promise-polyfill/src/polyfill.js\n");

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6â€“8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzPzYwMTciXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/setimmediate/setImmediate.js\n");

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(/*! setimmediate */ \"./node_modules/setimmediate/setImmediate.js\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzPzUxMTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNjb3BlID0gKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYpIHx8XG4gICAgICAgICAgICB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWRpYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/timers-browserify/main.js\n");

/***/ }),

/***/ "./src/Api.ts":
/*!********************!*\
  !*** ./src/Api.ts ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar ResolvedApi_1 = __webpack_require__(/*! ./ResolvedApi */ \"./src/ResolvedApi.ts\");\nvar HttpClient_1 = __webpack_require__(/*! ./HttpClient */ \"./src/HttpClient.ts\");\nfunction separator(url) {\n    return url.indexOf('?') > -1 ? '&' : '?';\n}\nvar Api = (function () {\n    function Api(url, options) {\n        this.options = options || {};\n        this.url = url;\n        if (this.options.accessToken) {\n            var accessTokenParam = \"access_token=\" + this.options.accessToken;\n            this.url += separator(url) + accessTokenParam;\n        }\n        if (this.options.routes) {\n            this.url += separator(url) + (\"routes=\" + JSON.stringify(this.options.routes));\n        }\n        this.apiDataTTL = this.options.apiDataTTL || 5;\n        this.httpClient = new HttpClient_1[\"default\"](this.options.requestHandler, this.options.apiCache, this.options.proxyAgent, this.options.timeoutInMs);\n    }\n    /**\n     * Fetches data used to construct the api client, from cache if it's\n     * present, otherwise from calling the prismic api endpoint (which is\n     * then cached).\n     */\n    Api.prototype.get = function (cb) {\n        var _this = this;\n        return this.httpClient.cachedRequest(this.url, { ttl: this.apiDataTTL }).then(function (data) {\n            var resolvedApi = new ResolvedApi_1[\"default\"](data, _this.httpClient, _this.options);\n            cb && cb(null, resolvedApi);\n            return resolvedApi;\n        })[\"catch\"](function (error) {\n            cb && cb(error);\n            throw error;\n        });\n    };\n    return Api;\n}());\nexports[\"default\"] = Api;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvQXBpLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUHJpc21pY0pTLy4vc3JjL0FwaS50cz82YjExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcmVkaWNhdGVzIGZyb20gJy4vUHJlZGljYXRlcyc7XG5pbXBvcnQgeyBSZXF1ZXN0SGFuZGxlciwgUmVxdWVzdENhbGxiYWNrIH0gZnJvbSAnLi9yZXF1ZXN0JztcbmltcG9ydCB7IERvY3VtZW50IH0gZnJvbSAnLi9kb2N1bWVudHMnO1xuaW1wb3J0IHsgQXBpQ2FjaGUgfSBmcm9tICcuL2NhY2hlJztcbmltcG9ydCBSZXNvbHZlZEFwaSwgeyBBcGlEYXRhIH0gZnJvbSAnLi9SZXNvbHZlZEFwaSc7XG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICcuL0h0dHBDbGllbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwaU9wdGlvbnMge1xuICBhY2Nlc3NUb2tlbj86IHN0cmluZztcbiAgcm91dGVzPzogYW55O1xuICByZXF1ZXN0SGFuZGxlcj86IFJlcXVlc3RIYW5kbGVyO1xuICByZXE/OiBhbnk7XG4gIGFwaUNhY2hlPzogQXBpQ2FjaGU7XG4gIGFwaURhdGFUVEw/OiBudW1iZXI7XG4gIHByb3h5QWdlbnQ/OiBhbnk7XG4gIHRpbWVvdXRJbk1zPzogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBzZXBhcmF0b3IodXJsOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHVybC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyA6ICc/Jztcbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIHVybDogc3RyaW5nO1xuICBvcHRpb25zOiBBcGlPcHRpb25zO1xuICBhcGlEYXRhVFRMOiBudW1iZXI7XG4gIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQ7XG5cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBBcGlPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICBpZiAodGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuKSB7XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlblBhcmFtID0gYGFjY2Vzc190b2tlbj0ke3RoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbn1gO1xuICAgICAgdGhpcy51cmwgKz0gc2VwYXJhdG9yKHVybCkgKyBhY2Nlc3NUb2tlblBhcmFtO1xuICAgIH1cbiAgICBpZih0aGlzLm9wdGlvbnMucm91dGVzKSB7XG4gICAgICB0aGlzLnVybCArPSBzZXBhcmF0b3IodXJsKSArIGByb3V0ZXM9JHtKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMucm91dGVzKX1gO1xuICAgIH1cblxuICAgIHRoaXMuYXBpRGF0YVRUTCA9IHRoaXMub3B0aW9ucy5hcGlEYXRhVFRMIHx8IDU7XG4gICAgdGhpcy5odHRwQ2xpZW50ID0gbmV3IEh0dHBDbGllbnQoXG4gICAgICB0aGlzLm9wdGlvbnMucmVxdWVzdEhhbmRsZXIsXG4gICAgICB0aGlzLm9wdGlvbnMuYXBpQ2FjaGUsXG4gICAgICB0aGlzLm9wdGlvbnMucHJveHlBZ2VudCxcbiAgICAgIHRoaXMub3B0aW9ucy50aW1lb3V0SW5NcyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgZGF0YSB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgYXBpIGNsaWVudCwgZnJvbSBjYWNoZSBpZiBpdCdzXG4gICAqIHByZXNlbnQsIG90aGVyd2lzZSBmcm9tIGNhbGxpbmcgdGhlIHByaXNtaWMgYXBpIGVuZHBvaW50ICh3aGljaCBpc1xuICAgKiB0aGVuIGNhY2hlZCkuXG4gICAqL1xuICBnZXQoY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8UmVzb2x2ZWRBcGk+KTogUHJvbWlzZTxSZXNvbHZlZEFwaT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuY2FjaGVkUmVxdWVzdDxBcGlEYXRhPih0aGlzLnVybCwgeyB0dGw6IHRoaXMuYXBpRGF0YVRUTCB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCByZXNvbHZlZEFwaSA9IG5ldyBSZXNvbHZlZEFwaShkYXRhLCB0aGlzLmh0dHBDbGllbnQsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjYiAmJiBjYihudWxsLCByZXNvbHZlZEFwaSk7XG4gICAgICByZXR1cm4gcmVzb2x2ZWRBcGk7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjYiAmJiBjYihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUlBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Api.ts\n");

/***/ }),

/***/ "./src/Cookies.ts":
/*!************************!*\
  !*** ./src/Cookies.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\n// Some portions of code from https://github.com/jshttp/cookie\nvar decode = decodeURIComponent;\nfunction tryDecode(str, decode) {\n    try {\n        return decode(str);\n    }\n    catch (e) {\n        return str;\n    }\n}\nfunction parse(str, options) {\n    if (typeof str !== 'string') {\n        throw new TypeError('argument str must be a string');\n    }\n    var obj = {};\n    var opt = options || {};\n    var pairs = str.split(/; */);\n    var dec = opt.decode || decode;\n    pairs.forEach(function (pair) {\n        var eq_idx = pair.indexOf('=');\n        // skip things that don't look like key=value\n        if (eq_idx < 0) {\n            return;\n        }\n        var key = pair.substr(0, eq_idx).trim();\n        var val = pair.substr(++eq_idx, pair.length).trim();\n        // quoted values\n        if ('\"' == val[0]) {\n            val = val.slice(1, -1);\n        }\n        // only assign once\n        if (undefined == obj[key]) {\n            obj[key] = tryDecode(val, dec);\n        }\n    });\n    return obj;\n}\nexports[\"default\"] = { parse: parse };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvQ29va2llcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL3NyYy9Db29raWVzLnRzP2VjNDQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBDb29raWUge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG59XG5cbi8vIFNvbWUgcG9ydGlvbnMgb2YgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc2h0dHAvY29va2llXG5cbnZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cbmZ1bmN0aW9uIHRyeURlY29kZShzdHI6IHN0cmluZywgZGVjb2RlOiAoc3RyOiBzdHJpbmcpID0+IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGUoc3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2Uoc3RyOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc3RyIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuXG4gIHZhciBvYmogPSA8Q29va2llPnt9O1xuICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KC87ICovKTtcbiAgdmFyIGRlYyA9IG9wdC5kZWNvZGUgfHwgZGVjb2RlO1xuXG4gIHBhaXJzLmZvckVhY2goZnVuY3Rpb24ocGFpcikge1xuICAgIHZhciBlcV9pZHggPSBwYWlyLmluZGV4T2YoJz0nKTtcblxuICAgIC8vIHNraXAgdGhpbmdzIHRoYXQgZG9uJ3QgbG9vayBsaWtlIGtleT12YWx1ZVxuICAgIGlmIChlcV9pZHggPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGtleSA9IHBhaXIuc3Vic3RyKDAsIGVxX2lkeCkudHJpbSgpO1xuICAgIHZhciB2YWwgPSBwYWlyLnN1YnN0cigrK2VxX2lkeCwgcGFpci5sZW5ndGgpLnRyaW0oKTtcblxuICAgIC8vIHF1b3RlZCB2YWx1ZXNcbiAgICBpZiAoJ1wiJyA9PSB2YWxbMF0pIHtcbiAgICAgIHZhbCA9IHZhbC5zbGljZSgxLCAtMSk7XG4gICAgfVxuXG4gICAgLy8gb25seSBhc3NpZ24gb25jZVxuICAgIGlmICh1bmRlZmluZWQgPT0gb2JqW2tleV0pIHtcbiAgICAgIG9ialtrZXldID0gdHJ5RGVjb2RlKHZhbCwgZGVjKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgcGFyc2UgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Cookies.ts\n");

/***/ }),

/***/ "./src/HttpClient.ts":
/*!***************************!*\
  !*** ./src/HttpClient.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar cache_1 = __webpack_require__(/*! ./cache */ \"./src/cache.ts\");\nvar request_1 = __webpack_require__(/*! ./request */ \"./src/request.ts\");\nvar HttpClient = (function () {\n    function HttpClient(requestHandler, cache, proxyAgent, timeoutInMs) {\n        this.requestHandler = requestHandler || new request_1.DefaultRequestHandler({ proxyAgent: proxyAgent, timeoutInMs: timeoutInMs });\n        this.cache = cache || new cache_1.DefaultApiCache();\n    }\n    HttpClient.prototype.request = function (url, callback) {\n        this.requestHandler.request(url, function (err, result, xhr, ttl) {\n            if (err) {\n                callback && callback(err, null, xhr, ttl);\n            }\n            else if (result) {\n                callback && callback(null, result, xhr, ttl);\n            }\n        });\n    };\n    /**\n     * Fetch a URL corresponding to a query, and parse the response as a Response object\n     */\n    HttpClient.prototype.cachedRequest = function (url, maybeOptions) {\n        var _this = this;\n        var options = maybeOptions || {};\n        var run = function (cb) {\n            var cacheKey = options.cacheKey || url;\n            _this.cache.get(cacheKey, function (cacheGetError, cacheGetValue) {\n                if (cacheGetError || cacheGetValue) {\n                    cb(cacheGetError, cacheGetValue);\n                }\n                else {\n                    _this.request(url, function (fetchError, fetchValue, xhr, ttlReq) {\n                        if (fetchError) {\n                            cb(fetchError, null);\n                        }\n                        else {\n                            var ttl = ttlReq || options.ttl;\n                            if (ttl) {\n                                _this.cache.set(cacheKey, fetchValue, ttl, cb);\n                            }\n                            cb(null, fetchValue);\n                        }\n                    });\n                }\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            run(function (err, value) {\n                if (err)\n                    reject(err);\n                if (value)\n                    resolve(value);\n            });\n        });\n    };\n    return HttpClient;\n}());\nexports[\"default\"] = HttpClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvSHR0cENsaWVudC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL3NyYy9IdHRwQ2xpZW50LnRzP2RmZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBpQ2FjaGUsIERlZmF1bHRBcGlDYWNoZSB9IGZyb20gJy4vY2FjaGUnO1xuaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIsIERlZmF1bHRSZXF1ZXN0SGFuZGxlciwgUmVxdWVzdENhbGxiYWNrIH0gZnJvbSAnLi9yZXF1ZXN0JztcblxuZXhwb3J0IGludGVyZmFjZSBIdHRwQ2xpZW50T3B0aW9ucyB7XG4gIHR0bD86IG51bWJlcjtcbiAgY2FjaGVLZXk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0dHBDbGllbnQge1xuXG4gIHByaXZhdGUgY2FjaGU6IEFwaUNhY2hlO1xuICBwcml2YXRlIHJlcXVlc3RIYW5kbGVyOiBSZXF1ZXN0SGFuZGxlcjtcblxuICBjb25zdHJ1Y3RvcihyZXF1ZXN0SGFuZGxlcj86IFJlcXVlc3RIYW5kbGVyLCBjYWNoZT86IEFwaUNhY2hlLCBwcm94eUFnZW50PzogYW55LCB0aW1lb3V0SW5Ncz86IG51bWJlcikge1xuICAgIHRoaXMucmVxdWVzdEhhbmRsZXIgPSByZXF1ZXN0SGFuZGxlciB8fCBuZXcgRGVmYXVsdFJlcXVlc3RIYW5kbGVyKHsgcHJveHlBZ2VudCwgdGltZW91dEluTXMgfSk7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlIHx8IG5ldyBEZWZhdWx0QXBpQ2FjaGUoKTtcbiAgfVxuXG4gIHJlcXVlc3Q8VD4odXJsOiBzdHJpbmcsIGNhbGxiYWNrPzogUmVxdWVzdENhbGxiYWNrPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5yZXF1ZXN0SGFuZGxlci5yZXF1ZXN0PFQ+KHVybCwgKGVyciwgcmVzdWx0LCB4aHIsIHR0bCkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhlcnIsIG51bGwsIHhociwgdHRsKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwsIHJlc3VsdCwgeGhyLCB0dGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgVVJMIGNvcnJlc3BvbmRpbmcgdG8gYSBxdWVyeSwgYW5kIHBhcnNlIHRoZSByZXNwb25zZSBhcyBhIFJlc3BvbnNlIG9iamVjdFxuICAgKi9cbiAgY2FjaGVkUmVxdWVzdDxUPih1cmw6IHN0cmluZywgbWF5YmVPcHRpb25zPzogSHR0cENsaWVudE9wdGlvbnMpOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBvcHRpb25zID0gbWF5YmVPcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IHJ1biA9IChjYjogUmVxdWVzdENhbGxiYWNrPFQ+KSA9PiB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IG9wdGlvbnMuY2FjaGVLZXkgfHwgdXJsO1xuICAgICAgdGhpcy5jYWNoZS5nZXQ8VD4oY2FjaGVLZXksIChjYWNoZUdldEVycm9yLCBjYWNoZUdldFZhbHVlKSA9PiB7XG4gICAgICAgIGlmIChjYWNoZUdldEVycm9yIHx8IGNhY2hlR2V0VmFsdWUpIHtcbiAgICAgICAgICBjYihjYWNoZUdldEVycm9yLCBjYWNoZUdldFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlcXVlc3Q8VD4odXJsLCAoZmV0Y2hFcnJvciwgZmV0Y2hWYWx1ZSwgeGhyLCB0dGxSZXEpID0+IHtcbiAgICAgICAgICAgIGlmIChmZXRjaEVycm9yKSB7XG4gICAgICAgICAgICAgIGNiKGZldGNoRXJyb3IsIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgdHRsID0gdHRsUmVxIHx8IG9wdGlvbnMudHRsO1xuICAgICAgICAgICAgICBpZiAodHRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5zZXQoY2FjaGVLZXksIGZldGNoVmFsdWUsIHR0bCwgY2IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNiKG51bGwsIGZldGNoVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJ1bigoZXJyLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgaWYgKHZhbHVlKSByZXNvbHZlKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQU9BO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/HttpClient.ts\n");

/***/ }),

/***/ "./src/Predicates.ts":
/*!***************************!*\
  !*** ./src/Predicates.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar OPERATOR = {\n    at: 'at',\n    not: 'not',\n    missing: 'missing',\n    has: 'has',\n    any: 'any',\n    \"in\": 'in',\n    fulltext: 'fulltext',\n    similar: 'similar',\n    numberGt: 'number.gt',\n    numberLt: 'number.lt',\n    numberInRange: 'number.inRange',\n    dateBefore: 'date.before',\n    dateAfter: 'date.after',\n    dateBetween: 'date.between',\n    dateDayOfMonth: 'date.day-of-month',\n    dateDayOfMonthAfter: 'date.day-of-month-after',\n    dateDayOfMonthBefore: 'date.day-of-month-before',\n    dateDayOfWeek: 'date.day-of-week',\n    dateDayOfWeekAfter: 'date.day-of-week-after',\n    dateDayOfWeekBefore: 'date.day-of-week-before',\n    dateMonth: 'date.month',\n    dateMonthBefore: 'date.month-before',\n    dateMonthAfter: 'date.month-after',\n    dateYear: 'date.year',\n    dateHour: 'date.hour',\n    dateHourBefore: 'date.hour-before',\n    dateHourAfter: 'date.hour-after',\n    GeopointNear: 'geopoint.near'\n};\nfunction encode(value) {\n    if (typeof value === 'string') {\n        return \"\\\"\" + value + \"\\\"\";\n    }\n    else if (typeof value === 'number') {\n        return value.toString();\n    }\n    else if (value instanceof Date) {\n        return value.getTime().toString();\n    }\n    else if (Array.isArray(value)) {\n        return \"[\" + value.map(function (v) { return encode(v); }).join(',') + \"]\";\n    }\n    else if (typeof value === \"boolean\") {\n        return value.toString();\n    }\n    else {\n        throw new Error(\"Unable to encode \" + value + \" of type \" + typeof value);\n    }\n}\nvar geopoint = {\n    near: function (fragment, latitude, longitude, radius) {\n        return \"[\" + OPERATOR.GeopointNear + \"(\" + fragment + \", \" + latitude + \", \" + longitude + \", \" + radius + \")]\";\n    }\n};\nvar date = {\n    before: function (fragment, before) {\n        return \"[\" + OPERATOR.dateBefore + \"(\" + fragment + \", \" + encode(before) + \")]\";\n    },\n    after: function (fragment, after) {\n        return \"[\" + OPERATOR.dateAfter + \"(\" + fragment + \", \" + encode(after) + \")]\";\n    },\n    between: function (fragment, before, after) {\n        return \"[\" + OPERATOR.dateBetween + \"(\" + fragment + \", \" + encode(before) + \", \" + encode(after) + \")]\";\n    },\n    dayOfMonth: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonth + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfMonthAfter: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonthAfter + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfMonthBefore: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonthBefore + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfWeek: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeek + \"(\" + fragment + \", \" + encode(day) + \")]\";\n    },\n    dayOfWeekAfter: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeekAfter + \"(\" + fragment + \", \" + encode(day) + \")]\";\n    },\n    dayOfWeekBefore: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeekBefore + \"(\" + fragment + \", \" + encode(day) + \")]\";\n    },\n    month: function (fragment, month) {\n        return \"[\" + OPERATOR.dateMonth + \"(\" + fragment + \", \" + encode(month) + \")]\";\n    },\n    monthBefore: function (fragment, month) {\n        return \"[\" + OPERATOR.dateMonthBefore + \"(\" + fragment + \", \" + encode(month) + \")]\";\n    },\n    monthAfter: function (fragment, month) {\n        return \"[\" + OPERATOR.dateMonthAfter + \"(\" + fragment + \", \" + encode(month) + \")]\";\n    },\n    year: function (fragment, year) {\n        return \"[\" + OPERATOR.dateYear + \"(\" + fragment + \", \" + year + \")]\";\n    },\n    hour: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHour + \"(\" + fragment + \", \" + hour + \")]\";\n    },\n    hourBefore: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHourBefore + \"(\" + fragment + \", \" + hour + \")]\";\n    },\n    hourAfter: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHourAfter + \"(\" + fragment + \", \" + hour + \")]\";\n    }\n};\nvar number = {\n    gt: function (fragment, value) {\n        return \"[\" + OPERATOR.numberGt + \"(\" + fragment + \", \" + value + \")]\";\n    },\n    lt: function (fragment, value) {\n        return \"[\" + OPERATOR.numberLt + \"(\" + fragment + \", \" + value + \")]\";\n    },\n    inRange: function (fragment, before, after) {\n        return \"[\" + OPERATOR.numberInRange + \"(\" + fragment + \", \" + before + \", \" + after + \")]\";\n    }\n};\nexports[\"default\"] = {\n    at: function (fragment, value) {\n        return \"[\" + OPERATOR.at + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    not: function (fragment, value) {\n        return \"[\" + OPERATOR.not + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    missing: function (fragment) {\n        return \"[\" + OPERATOR.missing + \"(\" + fragment + \")]\";\n    },\n    has: function (fragment) {\n        return \"[\" + OPERATOR.has + \"(\" + fragment + \")]\";\n    },\n    any: function (fragment, values) {\n        return \"[\" + OPERATOR.any + \"(\" + fragment + \", \" + encode(values) + \")]\";\n    },\n    \"in\": function (fragment, values) {\n        return \"[\" + OPERATOR[\"in\"] + \"(\" + fragment + \", \" + encode(values) + \")]\";\n    },\n    fulltext: function (fragment, value) {\n        return \"[\" + OPERATOR.fulltext + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    similar: function (documentId, maxResults) {\n        return \"[\" + OPERATOR.similar + \"(\\\"\" + documentId + \"\\\", \" + maxResults + \")]\";\n    },\n    date: date,\n    dateBefore: date.before,\n    dateAfter: date.after,\n    dateBetween: date.between,\n    dayOfMonth: date.dayOfMonth,\n    dayOfMonthAfter: date.dayOfMonthAfter,\n    dayOfMonthBefore: date.dayOfMonthBefore,\n    dayOfWeek: date.dayOfWeek,\n    dayOfWeekAfter: date.dayOfWeekAfter,\n    dayOfWeekBefore: date.dayOfWeekBefore,\n    month: date.month,\n    monthBefore: date.monthBefore,\n    monthAfter: date.monthAfter,\n    year: date.year,\n    hour: date.hour,\n    hourBefore: date.hourBefore,\n    hourAfter: date.hourAfter,\n    number: number,\n    gt: number.gt,\n    lt: number.lt,\n    inRange: number.inRange,\n    near: geopoint.near,\n    geopoint: geopoint\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvUHJlZGljYXRlcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL3NyYy9QcmVkaWNhdGVzLnRzP2FiYzAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgT1BFUkFUT1IgPSB7XG4gIGF0OiAnYXQnLFxuICBub3Q6ICdub3QnLFxuICBtaXNzaW5nOiAnbWlzc2luZycsXG4gIGhhczogJ2hhcycsXG4gIGFueTogJ2FueScsXG4gIGluOiAnaW4nLFxuICBmdWxsdGV4dDogJ2Z1bGx0ZXh0JyxcbiAgc2ltaWxhcjogJ3NpbWlsYXInLFxuICBudW1iZXJHdDogJ251bWJlci5ndCcsXG4gIG51bWJlckx0OiAnbnVtYmVyLmx0JyxcbiAgbnVtYmVySW5SYW5nZTogJ251bWJlci5pblJhbmdlJyxcbiAgZGF0ZUJlZm9yZTogJ2RhdGUuYmVmb3JlJyxcbiAgZGF0ZUFmdGVyOiAnZGF0ZS5hZnRlcicsXG4gIGRhdGVCZXR3ZWVuOiAnZGF0ZS5iZXR3ZWVuJyxcbiAgZGF0ZURheU9mTW9udGg6ICdkYXRlLmRheS1vZi1tb250aCcsXG4gIGRhdGVEYXlPZk1vbnRoQWZ0ZXI6ICdkYXRlLmRheS1vZi1tb250aC1hZnRlcicsXG4gIGRhdGVEYXlPZk1vbnRoQmVmb3JlOiAnZGF0ZS5kYXktb2YtbW9udGgtYmVmb3JlJyxcbiAgZGF0ZURheU9mV2VlazogJ2RhdGUuZGF5LW9mLXdlZWsnLFxuICBkYXRlRGF5T2ZXZWVrQWZ0ZXI6ICdkYXRlLmRheS1vZi13ZWVrLWFmdGVyJyxcbiAgZGF0ZURheU9mV2Vla0JlZm9yZTogJ2RhdGUuZGF5LW9mLXdlZWstYmVmb3JlJyxcbiAgZGF0ZU1vbnRoOiAnZGF0ZS5tb250aCcsXG4gIGRhdGVNb250aEJlZm9yZTogJ2RhdGUubW9udGgtYmVmb3JlJyxcbiAgZGF0ZU1vbnRoQWZ0ZXI6ICdkYXRlLm1vbnRoLWFmdGVyJyxcbiAgZGF0ZVllYXI6ICdkYXRlLnllYXInLFxuICBkYXRlSG91cjogJ2RhdGUuaG91cicsXG4gIGRhdGVIb3VyQmVmb3JlOiAnZGF0ZS5ob3VyLWJlZm9yZScsXG4gIGRhdGVIb3VyQWZ0ZXI6ICdkYXRlLmhvdXItYWZ0ZXInLFxuICBHZW9wb2ludE5lYXI6ICdnZW9wb2ludC5uZWFyJyxcbn07XG5cbnR5cGUgUHJlZGljYXRlVmFsdWUgPSBib29sZWFuIHwgc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZTtcblxuZnVuY3Rpb24gZW5jb2RlKHZhbHVlOiBQcmVkaWNhdGVWYWx1ZSB8IFByZWRpY2F0ZVZhbHVlW10pOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBgXCIke3ZhbHVlfVwiYDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmdldFRpbWUoKS50b1N0cmluZygpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGBbJHt2YWx1ZS5tYXAodiA9PiBlbmNvZGUodikpLmpvaW4oJywnKX1dYDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKClcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBlbmNvZGUgJHt2YWx1ZX0gb2YgdHlwZSAke3R5cGVvZiB2YWx1ZX1gKTtcbiAgfVxufVxuXG5jb25zdCBnZW9wb2ludCA9IHtcbiAgbmVhcihmcmFnbWVudDogc3RyaW5nLCBsYXRpdHVkZTogbnVtYmVyLCBsb25naXR1ZGU6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuR2VvcG9pbnROZWFyfSgke2ZyYWdtZW50fSwgJHtsYXRpdHVkZX0sICR7bG9uZ2l0dWRlfSwgJHtyYWRpdXN9KV1gO1xuICB9LFxufTtcblxuY29uc3QgZGF0ZSA9IHtcblxuICBiZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgYmVmb3JlOiBQcmVkaWNhdGVWYWx1ZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlQmVmb3JlfSgke2ZyYWdtZW50fSwgJHtlbmNvZGUoYmVmb3JlKX0pXWA7XG4gIH0sXG5cbiAgYWZ0ZXIoZnJhZ21lbnQ6IHN0cmluZywgYWZ0ZXI6IFByZWRpY2F0ZVZhbHVlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVBZnRlcn0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKGFmdGVyKX0pXWA7XG4gIH0sXG5cbiAgYmV0d2VlbihmcmFnbWVudDogc3RyaW5nLCBiZWZvcmU6IFByZWRpY2F0ZVZhbHVlLCBhZnRlcjogUHJlZGljYXRlVmFsdWUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZUJldHdlZW59KCR7ZnJhZ21lbnR9LCAke2VuY29kZShiZWZvcmUpfSwgJHtlbmNvZGUoYWZ0ZXIpfSldYDtcbiAgfSxcblxuICBkYXlPZk1vbnRoKGZyYWdtZW50OiBzdHJpbmcsIGRheTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVEYXlPZk1vbnRofSgke2ZyYWdtZW50fSwgJHtkYXl9KV1gO1xuICB9LFxuXG4gIGRheU9mTW9udGhBZnRlcihmcmFnbWVudDogc3RyaW5nLCBkYXk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlRGF5T2ZNb250aEFmdGVyfSgke2ZyYWdtZW50fSwgJHtkYXl9KV1gO1xuICB9LFxuXG4gIGRheU9mTW9udGhCZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgZGF5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZURheU9mTW9udGhCZWZvcmV9KCR7ZnJhZ21lbnR9LCAke2RheX0pXWA7XG4gIH0sXG5cbiAgZGF5T2ZXZWVrKGZyYWdtZW50OiBzdHJpbmcsIGRheTogbnVtYmVyIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVEYXlPZldlZWt9KCR7ZnJhZ21lbnR9LCAke2VuY29kZShkYXkpfSldYDtcbiAgfSxcblxuICBkYXlPZldlZWtBZnRlcihmcmFnbWVudDogc3RyaW5nLCBkYXk6IG51bWJlciB8IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlRGF5T2ZXZWVrQWZ0ZXJ9KCR7ZnJhZ21lbnR9LCAke2VuY29kZShkYXkpfSldYDtcbiAgfSxcblxuICBkYXlPZldlZWtCZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgZGF5OiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZURheU9mV2Vla0JlZm9yZX0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKGRheSl9KV1gO1xuICB9LFxuXG4gIG1vbnRoKGZyYWdtZW50OiBzdHJpbmcsIG1vbnRoOiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZU1vbnRofSgke2ZyYWdtZW50fSwgJHtlbmNvZGUobW9udGgpfSldYDtcbiAgfSxcblxuICBtb250aEJlZm9yZShmcmFnbWVudDogc3RyaW5nLCBtb250aDogbnVtYmVyIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVNb250aEJlZm9yZX0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKG1vbnRoKX0pXWA7XG4gIH0sXG5cbiAgbW9udGhBZnRlcihmcmFnbWVudDogc3RyaW5nLCBtb250aDogbnVtYmVyIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVNb250aEFmdGVyfSgke2ZyYWdtZW50fSwgJHtlbmNvZGUobW9udGgpfSldYDtcbiAgfSxcblxuICB5ZWFyKGZyYWdtZW50OiBzdHJpbmcsIHllYXI6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlWWVhcn0oJHtmcmFnbWVudH0sICR7eWVhcn0pXWA7XG4gIH0sXG5cbiAgaG91cihmcmFnbWVudDogc3RyaW5nLCBob3VyOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZUhvdXJ9KCR7ZnJhZ21lbnR9LCAke2hvdXJ9KV1gO1xuICB9LFxuXG4gIGhvdXJCZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgaG91cjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVIb3VyQmVmb3JlfSgke2ZyYWdtZW50fSwgJHtob3VyfSldYDtcbiAgfSxcblxuICBob3VyQWZ0ZXIoZnJhZ21lbnQ6IHN0cmluZywgaG91cjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVIb3VyQWZ0ZXJ9KCR7ZnJhZ21lbnR9LCAke2hvdXJ9KV1gO1xuICB9LFxufTtcblxuY29uc3QgbnVtYmVyID0ge1xuICBndChmcmFnbWVudDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLm51bWJlckd0fSgke2ZyYWdtZW50fSwgJHt2YWx1ZX0pXWA7XG4gIH0sXG5cbiAgbHQoZnJhZ21lbnQ6IHN0cmluZywgdmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5udW1iZXJMdH0oJHtmcmFnbWVudH0sICR7dmFsdWV9KV1gO1xuICB9LFxuXG4gIGluUmFuZ2UoZnJhZ21lbnQ6IHN0cmluZywgYmVmb3JlOiBudW1iZXIsIGFmdGVyOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IubnVtYmVySW5SYW5nZX0oJHtmcmFnbWVudH0sICR7YmVmb3JlfSwgJHthZnRlcn0pXWA7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGF0KGZyYWdtZW50OiBzdHJpbmcsIHZhbHVlOiBQcmVkaWNhdGVWYWx1ZSB8IFByZWRpY2F0ZVZhbHVlW10pOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuYXR9KCR7ZnJhZ21lbnR9LCAke2VuY29kZSh2YWx1ZSl9KV1gO1xuICB9LFxuXG4gIG5vdChmcmFnbWVudDogc3RyaW5nLCB2YWx1ZTogUHJlZGljYXRlVmFsdWUgfCBQcmVkaWNhdGVWYWx1ZVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLm5vdH0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKHZhbHVlKX0pXWA7XG4gIH0sXG5cbiAgbWlzc2luZyhmcmFnbWVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLm1pc3Npbmd9KCR7ZnJhZ21lbnR9KV1gO1xuICB9LFxuXG4gIGhhcyhmcmFnbWVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmhhc30oJHtmcmFnbWVudH0pXWA7XG4gIH0sXG5cbiAgYW55KGZyYWdtZW50OiBzdHJpbmcsIHZhbHVlczogUHJlZGljYXRlVmFsdWVbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5hbnl9KCR7ZnJhZ21lbnR9LCAke2VuY29kZSh2YWx1ZXMpfSldYDtcbiAgfSxcblxuICBpbihmcmFnbWVudDogc3RyaW5nLCB2YWx1ZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmlufSgke2ZyYWdtZW50fSwgJHtlbmNvZGUodmFsdWVzKX0pXWA7XG4gIH0sXG5cbiAgZnVsbHRleHQoZnJhZ21lbnQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5mdWxsdGV4dH0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKHZhbHVlKX0pXWA7XG4gIH0sXG5cbiAgc2ltaWxhcihkb2N1bWVudElkOiBzdHJpbmcsIG1heFJlc3VsdHM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5zaW1pbGFyfShcIiR7ZG9jdW1lbnRJZH1cIiwgJHttYXhSZXN1bHRzfSldYDtcbiAgfSxcblxuICBkYXRlLFxuXG4gIGRhdGVCZWZvcmU6IGRhdGUuYmVmb3JlLFxuXG4gIGRhdGVBZnRlcjogZGF0ZS5hZnRlcixcblxuICBkYXRlQmV0d2VlbjogZGF0ZS5iZXR3ZWVuLFxuXG4gIGRheU9mTW9udGg6IGRhdGUuZGF5T2ZNb250aCxcblxuICBkYXlPZk1vbnRoQWZ0ZXI6IGRhdGUuZGF5T2ZNb250aEFmdGVyLFxuXG4gIGRheU9mTW9udGhCZWZvcmU6IGRhdGUuZGF5T2ZNb250aEJlZm9yZSxcblxuICBkYXlPZldlZWs6IGRhdGUuZGF5T2ZXZWVrLFxuXG4gIGRheU9mV2Vla0FmdGVyOiBkYXRlLmRheU9mV2Vla0FmdGVyLFxuXG4gIGRheU9mV2Vla0JlZm9yZTogZGF0ZS5kYXlPZldlZWtCZWZvcmUsXG5cbiAgbW9udGg6IGRhdGUubW9udGgsXG5cbiAgbW9udGhCZWZvcmU6IGRhdGUubW9udGhCZWZvcmUsXG5cbiAgbW9udGhBZnRlcjogZGF0ZS5tb250aEFmdGVyLFxuXG4gIHllYXI6IGRhdGUueWVhcixcblxuICBob3VyOiBkYXRlLmhvdXIsXG5cbiAgaG91ckJlZm9yZTogZGF0ZS5ob3VyQmVmb3JlLFxuXG4gIGhvdXJBZnRlcjogZGF0ZS5ob3VyQWZ0ZXIsXG5cbiAgbnVtYmVyLFxuXG4gIGd0OiBudW1iZXIuZ3QsXG5cbiAgbHQ6IG51bWJlci5sdCxcblxuICBpblJhbmdlOiBudW1iZXIuaW5SYW5nZSxcblxuICBuZWFyOiBnZW9wb2ludC5uZWFyLFxuXG4gIGdlb3BvaW50LFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Predicates.ts\n");

/***/ }),

/***/ "./src/ResolvedApi.ts":
/*!****************************!*\
  !*** ./src/ResolvedApi.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nexports.__esModule = true;\nvar experiments_1 = __webpack_require__(/*! ./experiments */ \"./src/experiments.ts\");\nvar form_1 = __webpack_require__(/*! ./form */ \"./src/form.ts\");\nvar Predicates_1 = __webpack_require__(/*! ./Predicates */ \"./src/Predicates.ts\");\nvar Cookies_1 = __webpack_require__(/*! ./Cookies */ \"./src/Cookies.ts\");\nexports.PREVIEW_COOKIE = 'io.prismic.preview';\nexports.EXPERIMENT_COOKIE = 'io.prismic.experiment';\nvar ResolvedApi = (function () {\n    function ResolvedApi(data, httpClient, options) {\n        this.data = data;\n        this.masterRef = data.refs.filter(function (ref) { return ref.isMasterRef; })[0];\n        this.experiments = new experiments_1.Experiments(data.experiments);\n        this.bookmarks = data.bookmarks;\n        this.httpClient = httpClient;\n        this.options = options;\n        this.refs = data.refs;\n        this.tags = data.tags;\n        this.types = data.types;\n        this.languages = data.languages;\n    }\n    /**\n     * Returns a useable form from its id, as described in the RESTful description of the API.\n     * For instance: api.form(\"everything\") works on every repository (as \"everything\" exists by default)\n     * You can then chain the calls: api.form(\"everything\").query('[[:d = at(document.id, \"UkL0gMuvzYUANCpf\")]]').ref(ref).submit()\n     */\n    ResolvedApi.prototype.form = function (formId) {\n        var form = this.data.forms[formId];\n        if (form) {\n            return new form_1.SearchForm(form, this.httpClient);\n        }\n        return null;\n    };\n    ResolvedApi.prototype.everything = function () {\n        var f = this.form('everything');\n        if (!f)\n            throw new Error('Missing everything form');\n        return f;\n    };\n    /**\n     * The ID of the master ref on this prismic.io API.\n     * Do not use like this: searchForm.ref(api.master()).\n     * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n     */\n    ResolvedApi.prototype.master = function () {\n        return this.masterRef.ref;\n    };\n    /**\n     * Returns the ref ID for a given ref's label.\n     * Do not use like this: searchForm.ref(api.ref(\"Future release label\")).\n     * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n     */\n    ResolvedApi.prototype.ref = function (label) {\n        var ref = this.data.refs.filter(function (ref) { return ref.label === label; })[0];\n        return ref ? ref.ref : null;\n    };\n    ResolvedApi.prototype.currentExperiment = function () {\n        return this.experiments.current();\n    };\n    /**\n     * Query the repository\n     */\n    ResolvedApi.prototype.query = function (q, optionsOrCallback, cb) {\n        if (cb === void 0) { cb = function () { }; }\n        var _a = typeof optionsOrCallback === 'function'\n            ? { options: {}, callback: optionsOrCallback }\n            : { options: optionsOrCallback || {}, callback: cb }, options = _a.options, callback = _a.callback;\n        var form = this.everything();\n        for (var key in options) {\n            form = form.set(key, options[key]);\n        }\n        if (!options.ref) {\n            // Look in cookies if we have a ref (preview or experiment)\n            var cookieString = '';\n            if (this.options.req) {\n                cookieString = this.options.req.headers['cookie'] || '';\n            }\n            else if (typeof window !== 'undefined' && window.document) {\n                cookieString = window.document.cookie || '';\n            }\n            var cookies = Cookies_1[\"default\"].parse(cookieString);\n            var previewRef = cookies[exports.PREVIEW_COOKIE];\n            var experimentRef = this.experiments.refFromCookie(cookies[exports.EXPERIMENT_COOKIE]);\n            form = form.ref(previewRef || experimentRef || this.masterRef.ref);\n        }\n        if (q) {\n            form.query(q);\n        }\n        return form.submit(callback);\n    };\n    /**\n     * Retrieve the document returned by the given query\n     * @param {string|array|Predicate} the query\n     * @param {object} additional parameters. In NodeJS, pass the request as 'req'.\n     * @param {function} callback(err, doc)\n     */\n    ResolvedApi.prototype.queryFirst = function (q, optionsOrCallback, cb) {\n        var _a = typeof optionsOrCallback === 'function'\n            ? { options: {}, callback: optionsOrCallback }\n            : { options: __assign({}, optionsOrCallback) || {}, callback: cb || (function () { }) }, options = _a.options, callback = _a.callback;\n        options.page = 1;\n        options.pageSize = 1;\n        return this.query(q, options).then(function (response) {\n            var document = response && response.results && response.results[0];\n            callback(null, document);\n            return document;\n        })[\"catch\"](function (error) {\n            callback(error);\n            throw error;\n        });\n    };\n    /**\n     * Retrieve the document with the given id\n     */\n    ResolvedApi.prototype.getByID = function (id, maybeOptions, cb) {\n        var options = maybeOptions ? __assign({}, maybeOptions) : {};\n        if (!options.lang)\n            options.lang = '*';\n        return this.queryFirst(Predicates_1[\"default\"].at('document.id', id), options, cb);\n    };\n    /**\n     * Retrieve multiple documents from an array of id\n     */\n    ResolvedApi.prototype.getByIDs = function (ids, maybeOptions, cb) {\n        var options = maybeOptions ? __assign({}, maybeOptions) : {};\n        if (!options.lang)\n            options.lang = '*';\n        return this.query(Predicates_1[\"default\"][\"in\"]('document.id', ids), options, cb);\n    };\n    /**\n     * Retrieve the document with the given uid\n     */\n    ResolvedApi.prototype.getByUID = function (type, uid, maybeOptions, cb) {\n        var options = maybeOptions ? __assign({}, maybeOptions) : {};\n        if (options.lang === \"*\")\n            throw new Error(\"FORDIDDEN. You can't use getByUID with *, use the predicates instead.\");\n        if (!options.page)\n            options.page = 1;\n        return this.queryFirst(Predicates_1[\"default\"].at(\"my.\" + type + \".uid\", uid), options, cb);\n    };\n    /**\n     * Retrieve the singleton document with the given type\n     */\n    ResolvedApi.prototype.getSingle = function (type, maybeOptions, cb) {\n        var options = maybeOptions ? __assign({}, maybeOptions) : {};\n        return this.queryFirst(Predicates_1[\"default\"].at('document.type', type), options, cb);\n    };\n    /**\n     * Retrieve the document with the given bookmark\n     */\n    ResolvedApi.prototype.getBookmark = function (bookmark, maybeOptions, cb) {\n        var id = this.data.bookmarks[bookmark];\n        if (id) {\n            return this.getByID(id, maybeOptions, cb);\n        }\n        else {\n            return Promise.reject('Error retrieving bookmarked id');\n        }\n    };\n    ResolvedApi.prototype.getPreviewResolver = function (token, documentId) {\n        var _this = this;\n        var resolve = function (linkResolver, defaultUrl, cb) {\n            if (documentId) {\n                return _this.getByID(documentId, { ref: token }).then(function (document) {\n                    if (!document) {\n                        cb && cb(null, defaultUrl);\n                        return defaultUrl;\n                    }\n                    else {\n                        var url = linkResolver(document);\n                        cb && cb(null, url);\n                        return url;\n                    }\n                });\n            }\n            else {\n                return Promise.resolve(defaultUrl);\n            }\n        };\n        return { token: token, documentId: documentId, resolve: resolve };\n    };\n    ResolvedApi.prototype.previewSession = function (token, linkResolver, defaultUrl, cb) {\n        var _this = this;\n        console.warn('previewSession function is deprecated in favor of getPreviewResolver function.');\n        return new Promise(function (resolve, reject) {\n            _this.httpClient.request(token, function (e, result) {\n                if (e) {\n                    cb && cb(e);\n                    reject(e);\n                }\n                else if (result) {\n                    if (!result.mainDocument) {\n                        cb && cb(null, defaultUrl);\n                        resolve(defaultUrl);\n                    }\n                    else {\n                        return _this.getByID(result.mainDocument, { ref: token }).then(function (document) {\n                            if (!document) {\n                                cb && cb(null, defaultUrl);\n                                resolve(defaultUrl);\n                            }\n                            else {\n                                var url = linkResolver(document);\n                                cb && cb(null, url);\n                                resolve(url);\n                            }\n                        })[\"catch\"](reject);\n                    }\n                }\n            });\n        });\n    };\n    return ResolvedApi;\n}());\nexports[\"default\"] = ResolvedApi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvUmVzb2x2ZWRBcGkudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9zcmMvUmVzb2x2ZWRBcGkudHM/MzNmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCIuL2RvY3VtZW50c1wiO1xuaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIsIFJlcXVlc3RDYWxsYmFjayB9IGZyb20gJy4vcmVxdWVzdCc7XG5pbXBvcnQgeyBBcGlDYWNoZSB9IGZyb20gJy4vY2FjaGUnO1xuaW1wb3J0IHsgRXhwZXJpbWVudCwgRXhwZXJpbWVudHMgfSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7IFNlYXJjaEZvcm0sIEZvcm0gfSBmcm9tICcuL2Zvcm0nO1xuaW1wb3J0IFByZWRpY2F0ZXMgZnJvbSAnLi9QcmVkaWNhdGVzJztcbmltcG9ydCBDb29raWVzIGZyb20gJy4vQ29va2llcyc7XG5pbXBvcnQgQXBpU2VhcmNoUmVzcG9uc2UgZnJvbSAnLi9BcGlTZWFyY2hSZXNwb25zZSc7XG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICcuL0h0dHBDbGllbnQnO1xuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuXG5leHBvcnQgY29uc3QgUFJFVklFV19DT09LSUUgPSAnaW8ucHJpc21pYy5wcmV2aWV3JztcbmV4cG9ydCBjb25zdCBFWFBFUklNRU5UX0NPT0tJRSA9ICdpby5wcmlzbWljLmV4cGVyaW1lbnQnO1xuXG5leHBvcnQgdHlwZSBMaW5rUmVzb2x2ZXIgPSAoZG9jOiBhbnkpID0+IHN0cmluZztcblxuZXhwb3J0IGludGVyZmFjZSBQcmV2aWV3UmVzb2x2ZXIge1xuICB0b2tlbjogc3RyaW5nO1xuICBkb2N1bWVudElkPzogc3RyaW5nO1xuICByZXNvbHZlKGxpbmtSZXNvbHZlcjogTGlua1Jlc29sdmVyLCBkZWZhdWx0VXJsOiBzdHJpbmcsIGNiPzogUmVxdWVzdENhbGxiYWNrPHN0cmluZz4pOiBQcm9taXNlPFN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVmIHtcbiAgcmVmOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGlzTWFzdGVyUmVmOiBib29sZWFuO1xuICBzY2hlZHVsZWRBdDogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExhbmd1YWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwaURhdGEge1xuICByZWZzOiBSZWZbXTtcbiAgYm9va21hcmtzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICBsYW5ndWFnZXM6IExhbmd1YWdlW107XG4gIHR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgZm9ybXM6IHsgW2tleTogc3RyaW5nXTogRm9ybSB9O1xuICBleHBlcmltZW50czogYW55O1xuICBvYXV0aF9pbml0aWF0ZTogc3RyaW5nO1xuICBvYXV0aF90b2tlbjogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIGxpY2VuY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmV2aWV3UmVzcG9uc2Uge1xuICBtYWluRG9jdW1lbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlPcHRpb25zIHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x2ZWRBcGlPcHRpb25zIHtcbiAgcmVxPzogYW55O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNvbHZlZEFwaSBpbXBsZW1lbnRzIENsaWVudCB7XG4gIGRhdGE6IEFwaURhdGE7XG4gIG1hc3RlclJlZjogUmVmO1xuICBleHBlcmltZW50czogRXhwZXJpbWVudHM7XG4gIG9wdGlvbnM6IFJlc29sdmVkQXBpT3B0aW9ucztcbiAgaHR0cENsaWVudDogSHR0cENsaWVudDtcbiAgYm9va21hcmtzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICByZWZzOiBSZWZbXTtcbiAgdGFnczogc3RyaW5nW107XG4gIHR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICBsYW5ndWFnZXM6IExhbmd1YWdlW107XG5cbiAgY29uc3RydWN0b3IoZGF0YTogQXBpRGF0YSwgaHR0cENsaWVudDogSHR0cENsaWVudCwgb3B0aW9uczogUmVzb2x2ZWRBcGlPcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLm1hc3RlclJlZiA9IGRhdGEucmVmcy5maWx0ZXIocmVmID0+IHJlZi5pc01hc3RlclJlZilbMF07XG4gICAgdGhpcy5leHBlcmltZW50cyA9IG5ldyBFeHBlcmltZW50cyhkYXRhLmV4cGVyaW1lbnRzKTtcbiAgICB0aGlzLmJvb2ttYXJrcyA9IGRhdGEuYm9va21hcmtzO1xuICAgIHRoaXMuaHR0cENsaWVudCA9IGh0dHBDbGllbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnJlZnMgPSBkYXRhLnJlZnM7XG4gICAgdGhpcy50YWdzID0gZGF0YS50YWdzO1xuICAgIHRoaXMudHlwZXMgPSBkYXRhLnR5cGVzO1xuICAgIHRoaXMubGFuZ3VhZ2VzID0gZGF0YS5sYW5ndWFnZXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHVzZWFibGUgZm9ybSBmcm9tIGl0cyBpZCwgYXMgZGVzY3JpYmVkIGluIHRoZSBSRVNUZnVsIGRlc2NyaXB0aW9uIG9mIHRoZSBBUEkuXG4gICAqIEZvciBpbnN0YW5jZTogYXBpLmZvcm0oXCJldmVyeXRoaW5nXCIpIHdvcmtzIG9uIGV2ZXJ5IHJlcG9zaXRvcnkgKGFzIFwiZXZlcnl0aGluZ1wiIGV4aXN0cyBieSBkZWZhdWx0KVxuICAgKiBZb3UgY2FuIHRoZW4gY2hhaW4gdGhlIGNhbGxzOiBhcGkuZm9ybShcImV2ZXJ5dGhpbmdcIikucXVlcnkoJ1tbOmQgPSBhdChkb2N1bWVudC5pZCwgXCJVa0wwZ011dnpZVUFOQ3BmXCIpXV0nKS5yZWYocmVmKS5zdWJtaXQoKVxuICAgKi9cbiAgZm9ybShmb3JtSWQ6IHN0cmluZyk6IFNlYXJjaEZvcm0gfCBudWxsIHtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5kYXRhLmZvcm1zW2Zvcm1JZF07XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIHJldHVybiBuZXcgU2VhcmNoRm9ybShmb3JtLCB0aGlzLmh0dHBDbGllbnQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGV2ZXJ5dGhpbmcoKTogU2VhcmNoRm9ybSB7XG4gICAgY29uc3QgZiA9IHRoaXMuZm9ybSgnZXZlcnl0aGluZycpO1xuICAgIGlmICghZikgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGV2ZXJ5dGhpbmcgZm9ybScpO1xuICAgIHJldHVybiBmO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiB0aGUgbWFzdGVyIHJlZiBvbiB0aGlzIHByaXNtaWMuaW8gQVBJLlxuICAgKiBEbyBub3QgdXNlIGxpa2UgdGhpczogc2VhcmNoRm9ybS5yZWYoYXBpLm1hc3RlcigpKS5cbiAgICogSW5zdGVhZCwgc2V0IHlvdXIgcmVmIG9uY2UgaW4gYSB2YXJpYWJsZSwgYW5kIGNhbGwgaXQgd2hlbiB5b3UgbmVlZCBpdDsgdGhpcyB3aWxsIGFsbG93IHRvIGNoYW5nZSB0aGUgcmVmIHlvdSdyZSB2aWV3aW5nIGVhc2lseSBmb3IgeW91ciBlbnRpcmUgcGFnZS5cbiAgICovXG4gIG1hc3RlcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm1hc3RlclJlZi5yZWY7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVmIElEIGZvciBhIGdpdmVuIHJlZidzIGxhYmVsLlxuICAgKiBEbyBub3QgdXNlIGxpa2UgdGhpczogc2VhcmNoRm9ybS5yZWYoYXBpLnJlZihcIkZ1dHVyZSByZWxlYXNlIGxhYmVsXCIpKS5cbiAgICogSW5zdGVhZCwgc2V0IHlvdXIgcmVmIG9uY2UgaW4gYSB2YXJpYWJsZSwgYW5kIGNhbGwgaXQgd2hlbiB5b3UgbmVlZCBpdDsgdGhpcyB3aWxsIGFsbG93IHRvIGNoYW5nZSB0aGUgcmVmIHlvdSdyZSB2aWV3aW5nIGVhc2lseSBmb3IgeW91ciBlbnRpcmUgcGFnZS5cbiAgICovXG4gIHJlZihsYWJlbDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgcmVmID0gdGhpcy5kYXRhLnJlZnMuZmlsdGVyKHJlZiA9PiByZWYubGFiZWwgPT09IGxhYmVsKVswXTtcbiAgICByZXR1cm4gcmVmID8gcmVmLnJlZiA6IG51bGw7XG4gIH1cblxuICBjdXJyZW50RXhwZXJpbWVudCgpOiBFeHBlcmltZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZXhwZXJpbWVudHMuY3VycmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSByZXBvc2l0b3J5XG4gICAqL1xuICBxdWVyeShxOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uc09yQ2FsbGJhY2s6IFF1ZXJ5T3B0aW9ucyB8IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4sIGNiOiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+ID0gKCkgPT4ge30pOiBQcm9taXNlPEFwaVNlYXJjaFJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBvcHRpb25zLCBjYWxsYmFjayB9ID0gdHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8geyBvcHRpb25zOiB7fSBhcyBRdWVyeU9wdGlvbnMsIGNhbGxiYWNrOiBvcHRpb25zT3JDYWxsYmFjayB9XG4gICAgOiB7IG9wdGlvbnM6IG9wdGlvbnNPckNhbGxiYWNrIHx8IHt9LCBjYWxsYmFjazogY2IgfTtcblxuICAgIGxldCBmb3JtID0gdGhpcy5ldmVyeXRoaW5nKCk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgZm9ybSA9IGZvcm0uc2V0KGtleSwgb3B0aW9uc1trZXldKTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnJlZikge1xuICAgICAgLy8gTG9vayBpbiBjb29raWVzIGlmIHdlIGhhdmUgYSByZWYgKHByZXZpZXcgb3IgZXhwZXJpbWVudClcbiAgICAgIGxldCBjb29raWVTdHJpbmcgPSAnJztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVxKSB7IC8vIE5vZGVKU1xuICAgICAgICBjb29raWVTdHJpbmcgPSB0aGlzLm9wdGlvbnMucmVxLmhlYWRlcnNbJ2Nvb2tpZSddIHx8ICcnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQpIHsgLy8gQnJvd3NlclxuICAgICAgICBjb29raWVTdHJpbmcgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llIHx8ICcnO1xuICAgICAgfVxuICAgICAgY29uc3QgY29va2llcyA9IENvb2tpZXMucGFyc2UoY29va2llU3RyaW5nKTtcbiAgICAgIGNvbnN0IHByZXZpZXdSZWYgPSBjb29raWVzW1BSRVZJRVdfQ09PS0lFXTtcbiAgICAgIGNvbnN0IGV4cGVyaW1lbnRSZWYgPSB0aGlzLmV4cGVyaW1lbnRzLnJlZkZyb21Db29raWUoY29va2llc1tFWFBFUklNRU5UX0NPT0tJRV0pO1xuICAgICAgZm9ybSA9IGZvcm0ucmVmKHByZXZpZXdSZWYgfHwgZXhwZXJpbWVudFJlZiB8fCB0aGlzLm1hc3RlclJlZi5yZWYpO1xuICAgIH1cbiAgICBpZiAocSkge1xuICAgICAgZm9ybS5xdWVyeShxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm0uc3VibWl0KGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZG9jdW1lbnQgcmV0dXJuZWQgYnkgdGhlIGdpdmVuIHF1ZXJ5XG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fFByZWRpY2F0ZX0gdGhlIHF1ZXJ5XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhZGRpdGlvbmFsIHBhcmFtZXRlcnMuIEluIE5vZGVKUywgcGFzcyB0aGUgcmVxdWVzdCBhcyAncmVxJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2soZXJyLCBkb2MpXG4gICAqL1xuICBxdWVyeUZpcnN0KHE6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zT3JDYWxsYmFjazogUXVlcnlPcHRpb25zIHwgUmVxdWVzdENhbGxiYWNrPERvY3VtZW50PiwgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudD4ge1xuICAgIGNvbnN0IHsgb3B0aW9ucywgY2FsbGJhY2sgfSA9IHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHsgb3B0aW9uczoge30gYXMgUXVlcnlPcHRpb25zLCBjYWxsYmFjazogb3B0aW9uc09yQ2FsbGJhY2sgfVxuICAgICAgICA6IHsgb3B0aW9uczogey4uLm9wdGlvbnNPckNhbGxiYWNrfSB8fCB7fSwgY2FsbGJhY2s6IGNiIHx8ICgoKSA9PiB7fSkgfTtcblxuICAgIG9wdGlvbnMucGFnZSA9IDE7XG4gICAgb3B0aW9ucy5wYWdlU2l6ZSA9IDE7XG5cbiAgICByZXR1cm4gdGhpcy5xdWVyeShxLCBvcHRpb25zKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSByZXNwb25zZSAmJiByZXNwb25zZS5yZXN1bHRzICYmIHJlc3BvbnNlLnJlc3VsdHNbMF07XG4gICAgICBjYWxsYmFjayhudWxsLCBkb2N1bWVudCk7XG4gICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZG9jdW1lbnQgd2l0aCB0aGUgZ2l2ZW4gaWRcbiAgICovXG4gIGdldEJ5SUQoaWQ6IHN0cmluZywgbWF5YmVPcHRpb25zPzogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1heWJlT3B0aW9ucyA/IHsuLi5tYXliZU9wdGlvbnN9IDoge307XG4gICAgaWYgKCFvcHRpb25zLmxhbmcpIG9wdGlvbnMubGFuZyA9ICcqJztcbiAgICByZXR1cm4gdGhpcy5xdWVyeUZpcnN0KFByZWRpY2F0ZXMuYXQoJ2RvY3VtZW50LmlkJywgaWQpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgbXVsdGlwbGUgZG9jdW1lbnRzIGZyb20gYW4gYXJyYXkgb2YgaWRcbiAgICovXG4gIGdldEJ5SURzKGlkczogc3RyaW5nW10sIG1heWJlT3B0aW9ucz86IFF1ZXJ5T3B0aW9ucywgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtYXliZU9wdGlvbnMgPyB7Li4ubWF5YmVPcHRpb25zfSA6IHt9O1xuICAgIGlmICghb3B0aW9ucy5sYW5nKSBvcHRpb25zLmxhbmcgPSAnKic7XG4gICAgcmV0dXJuIHRoaXMucXVlcnkoUHJlZGljYXRlcy5pbignZG9jdW1lbnQuaWQnLCBpZHMpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGRvY3VtZW50IHdpdGggdGhlIGdpdmVuIHVpZFxuICAgKi9cbiAgZ2V0QnlVSUQodHlwZTogc3RyaW5nLCB1aWQ6IHN0cmluZywgbWF5YmVPcHRpb25zPzogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1heWJlT3B0aW9ucyA/IHsuLi5tYXliZU9wdGlvbnN9IDoge307XG4gICAgaWYob3B0aW9ucy5sYW5nID09PSBcIipcIikgdGhyb3cgbmV3IEVycm9yKFwiRk9SRElEREVOLiBZb3UgY2FuJ3QgdXNlIGdldEJ5VUlEIHdpdGggKiwgdXNlIHRoZSBwcmVkaWNhdGVzIGluc3RlYWQuXCIpXG4gICAgaWYoIW9wdGlvbnMucGFnZSkgb3B0aW9ucy5wYWdlID0gMTtcblxuICAgIHJldHVybiB0aGlzLnF1ZXJ5Rmlyc3QoUHJlZGljYXRlcy5hdChgbXkuJHt0eXBlfS51aWRgLCB1aWQpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIHNpbmdsZXRvbiBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiB0eXBlXG4gICAqL1xuICBnZXRTaW5nbGUodHlwZTogc3RyaW5nLCBtYXliZU9wdGlvbnM/OiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCBvcHRpb25zID0gbWF5YmVPcHRpb25zID8gey4uLm1heWJlT3B0aW9uc30gOiB7fTtcbiAgICByZXR1cm4gdGhpcy5xdWVyeUZpcnN0KFByZWRpY2F0ZXMuYXQoJ2RvY3VtZW50LnR5cGUnLCB0eXBlKSwgb3B0aW9ucywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBib29rbWFya1xuICAgKi9cbiAgZ2V0Qm9va21hcmsoYm9va21hcms6IHN0cmluZywgbWF5YmVPcHRpb25zPzogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3QgaWQgPSB0aGlzLmRhdGEuYm9va21hcmtzW2Jvb2ttYXJrXTtcbiAgICBpZiAoaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEJ5SUQoaWQsIG1heWJlT3B0aW9ucywgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ0Vycm9yIHJldHJpZXZpbmcgYm9va21hcmtlZCBpZCcpO1xuICAgIH1cbiAgfVxuXG4gIGdldFByZXZpZXdSZXNvbHZlcih0b2tlbjogc3RyaW5nLCBkb2N1bWVudElkPzogc3RyaW5nKTogUHJldmlld1Jlc29sdmVyIHtcbiAgICBcbiAgICBjb25zdCByZXNvbHZlID0gKGxpbmtSZXNvbHZlcjogTGlua1Jlc29sdmVyLCBkZWZhdWx0VXJsOiBzdHJpbmcsIGNiPzogUmVxdWVzdENhbGxiYWNrPHN0cmluZz4pID0+IHtcbiAgICAgIGlmIChkb2N1bWVudElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJ5SUQoZG9jdW1lbnRJZCwgeyByZWY6IHRva2VuIH0pLnRoZW4oKGRvY3VtZW50OiBEb2N1bWVudCkgPT4ge1xuICAgICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNiICYmIGNiKG51bGwsIGRlZmF1bHRVcmwpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRVcmw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGxpbmtSZXNvbHZlcihkb2N1bWVudCk7XG4gICAgICAgICAgICBjYiAmJiBjYihudWxsLCB1cmwpO1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0VXJsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICBcbiAgICByZXR1cm4geyB0b2tlbiwgZG9jdW1lbnRJZCwgcmVzb2x2ZSB9XG4gIH1cblxuICBwcmV2aWV3U2Vzc2lvbih0b2tlbjogc3RyaW5nLCBsaW5rUmVzb2x2ZXI6IExpbmtSZXNvbHZlciwgZGVmYXVsdFVybDogc3RyaW5nLCBjYj86IFJlcXVlc3RDYWxsYmFjazxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zb2xlLndhcm4oJ3ByZXZpZXdTZXNzaW9uIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgZ2V0UHJldmlld1Jlc29sdmVyIGZ1bmN0aW9uLicpXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuaHR0cENsaWVudC5yZXF1ZXN0PFByZXZpZXdSZXNwb25zZT4odG9rZW4sIChlLCByZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICBjYiAmJiBjYihlKTtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgaWYgKCFyZXN1bHQubWFpbkRvY3VtZW50KSB7XG4gICAgICAgICAgICBjYiAmJiBjYihudWxsLCBkZWZhdWx0VXJsKTtcbiAgICAgICAgICAgIHJlc29sdmUoZGVmYXVsdFVybCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJ5SUQocmVzdWx0Lm1haW5Eb2N1bWVudCwgeyByZWY6IHRva2VuIH0pLnRoZW4oKGRvY3VtZW50KSA9PiB7XG4gICAgICAgICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjYiAmJiBjYihudWxsLCBkZWZhdWx0VXJsKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRlZmF1bHRVcmwpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IGxpbmtSZXNvbHZlcihkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgY2IgJiYgY2IobnVsbCwgdXJsKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHVybCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBaURBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/ResolvedApi.ts\n");

/***/ }),

/***/ "./src/cache.ts":
/*!**********************!*\
  !*** ./src/cache.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar lru_1 = __webpack_require__(/*! ./lru */ \"./src/lru.ts\");\nvar DefaultApiCache = (function () {\n    function DefaultApiCache(limit) {\n        if (limit === void 0) { limit = 1000; }\n        this.lru = lru_1.MakeLRUCache(limit);\n    }\n    DefaultApiCache.prototype.isExpired = function (key) {\n        var value = this.lru.get(key, false);\n        if (value) {\n            return value.expiredIn !== 0 && value.expiredIn < Date.now();\n        }\n        else {\n            return false;\n        }\n    };\n    DefaultApiCache.prototype.get = function (key, cb) {\n        var value = this.lru.get(key, false);\n        if (value && !this.isExpired(key)) {\n            cb(null, value.data);\n        }\n        else {\n            cb && cb(null);\n        }\n    };\n    DefaultApiCache.prototype.set = function (key, value, ttl, cb) {\n        this.lru.remove(key);\n        this.lru.put(key, {\n            data: value,\n            expiredIn: ttl ? (Date.now() + (ttl * 1000)) : 0\n        });\n        cb && cb(null);\n    };\n    DefaultApiCache.prototype.remove = function (key, cb) {\n        this.lru.remove(key);\n        cb && cb(null);\n    };\n    DefaultApiCache.prototype.clear = function (cb) {\n        this.lru.removeAll();\n        cb && cb(null);\n    };\n    return DefaultApiCache;\n}());\nexports.DefaultApiCache = DefaultApiCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2FjaGUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9zcmMvY2FjaGUudHM/NGY1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTFJVQ2FjaGUsIE1ha2VMUlVDYWNoZSB9IGZyb20gJy4vbHJ1JztcblxuZXhwb3J0IGludGVyZmFjZSBBcGlDYWNoZSB7XG4gIGlzRXhwaXJlZChrZXk6IFN0cmluZyk6IGJvb2xlYW47XG4gIGdldDxUPihrZXk6IHN0cmluZywgY2I6IChlcnJvcjogRXJyb3IgfCBudWxsLCBlbnRyeT86IFQpID0+IHZvaWQpOiB2b2lkO1xuICBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw6IG51bWJlciwgY2I/OiAoZXJyb3I6IEVycm9yIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQ7XG4gIHJlbW92ZShrZXk6IHN0cmluZywgY2I/OiAoZXJyb3I6IEVycm9yIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQ7XG4gIGNsZWFyKGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRGVmYXVsdEFwaUNhY2hlIGltcGxlbWVudHMgQXBpQ2FjaGUge1xuICBscnU6IElMUlVDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihsaW1pdDogbnVtYmVyID0gMTAwMCkge1xuICAgIHRoaXMubHJ1ID0gTWFrZUxSVUNhY2hlKGxpbWl0KTtcbiAgfVxuXG4gIGlzRXhwaXJlZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5scnUuZ2V0KGtleSwgZmFsc2UpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLmV4cGlyZWRJbiAhPT0gMCAmJiB2YWx1ZS5leHBpcmVkSW4gPCBEYXRlLm5vdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZ2V0PFQ+KGtleTogc3RyaW5nLCBjYjogKGVycm9yOiBFcnJvciB8IG51bGwsIGVudHJ5PzogVCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5scnUuZ2V0KGtleSwgZmFsc2UpO1xuICAgIGlmICh2YWx1ZSAmJiAhdGhpcy5pc0V4cGlyZWQoa2V5KSkge1xuICAgICAgY2IobnVsbCwgdmFsdWUuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNiICYmIGNiKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQsIHR0bDogbnVtYmVyLCBjYj86IChlcnJvcjogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5scnUucmVtb3ZlKGtleSk7XG4gICAgdGhpcy5scnUucHV0KGtleSwge1xuICAgICAgZGF0YTogdmFsdWUsXG4gICAgICBleHBpcmVkSW46IHR0bCA/IChEYXRlLm5vdygpICsgKHR0bCAqIDEwMDApKSA6IDAsXG4gICAgfSk7XG4gICAgY2IgJiYgY2IobnVsbCk7XG4gIH1cblxuICByZW1vdmUoa2V5OiBzdHJpbmcsIGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxydS5yZW1vdmUoa2V5KTtcbiAgICBjYiAmJiBjYihudWxsKTtcbiAgfVxuXG4gIGNsZWFyKGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxydS5yZW1vdmVBbGwoKTtcbiAgICBjYiAmJiBjYihudWxsKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBVUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTNDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/cache.ts\n");

/***/ }),

/***/ "./src/client.ts":
/*!***********************!*\
  !*** ./src/client.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar form_1 = __webpack_require__(/*! ./form */ \"./src/form.ts\");\nvar Api_1 = __webpack_require__(/*! ./Api */ \"./src/Api.ts\");\nvar DefaultClient = (function () {\n    function DefaultClient(url, options) {\n        this.api = new Api_1[\"default\"](url, options);\n    }\n    DefaultClient.prototype.getApi = function () {\n        return this.api.get();\n    };\n    DefaultClient.prototype.everything = function () {\n        return this.form('everything');\n    };\n    DefaultClient.prototype.form = function (formId) {\n        return new form_1.LazySearchForm(formId, this.api);\n    };\n    DefaultClient.prototype.query = function (q, optionsOrCallback, cb) {\n        return this.getApi().then(function (api) { return api.query(q, optionsOrCallback, cb); });\n    };\n    DefaultClient.prototype.queryFirst = function (q, optionsOrCallback, cb) {\n        return this.getApi().then(function (api) { return api.queryFirst(q, optionsOrCallback, cb); });\n    };\n    DefaultClient.prototype.getByID = function (id, options, cb) {\n        return this.getApi().then(function (api) { return api.getByID(id, options, cb); });\n    };\n    DefaultClient.prototype.getByIDs = function (ids, options, cb) {\n        return this.getApi().then(function (api) { return api.getByIDs(ids, options, cb); });\n    };\n    DefaultClient.prototype.getByUID = function (type, uid, options, cb) {\n        return this.getApi().then(function (api) { return api.getByUID(type, uid, options, cb); });\n    };\n    DefaultClient.prototype.getSingle = function (type, options, cb) {\n        return this.getApi().then(function (api) { return api.getSingle(type, options, cb); });\n    };\n    DefaultClient.prototype.getBookmark = function (bookmark, options, cb) {\n        return this.getApi().then(function (api) { return api.getBookmark(bookmark, options, cb); });\n    };\n    DefaultClient.prototype.previewSession = function (token, linkResolver, defaultUrl, cb) {\n        return this.getApi().then(function (api) { return api.previewSession(token, linkResolver, defaultUrl, cb); });\n    };\n    DefaultClient.getApi = function (url, options) {\n        var api = new Api_1[\"default\"](url, options);\n        return api.get();\n    };\n    return DefaultClient;\n}());\nexports.DefaultClient = DefaultClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2xpZW50LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUHJpc21pY0pTLy4vc3JjL2NsaWVudC50cz9iODgyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50IH0gZnJvbSBcIi4vZG9jdW1lbnRzXCI7XG5pbXBvcnQgUmVzb2x2ZWRBcGksIHsgUXVlcnlPcHRpb25zLCBFWFBFUklNRU5UX0NPT0tJRSwgUFJFVklFV19DT09LSUUgfSBmcm9tICcuL1Jlc29sdmVkQXBpJztcbmltcG9ydCBBcGlTZWFyY2hSZXNwb25zZSBmcm9tICcuL0FwaVNlYXJjaFJlc3BvbnNlJztcbmltcG9ydCB7IFNlYXJjaEZvcm0sIExhenlTZWFyY2hGb3JtIH0gZnJvbSAnLi9mb3JtJztcbmltcG9ydCB7IEV4cGVyaW1lbnQgfSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7IFJlcXVlc3RIYW5kbGVyLCBSZXF1ZXN0Q2FsbGJhY2sgfSBmcm9tICcuL3JlcXVlc3QnO1xuaW1wb3J0IEFwaSwgeyBBcGlPcHRpb25zIH0gZnJvbSAnLi9BcGknO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudCB7XG4gIHF1ZXJ5KHE6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zT3JDYWxsYmFjazogUXVlcnlPcHRpb25zIHwgUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPiwgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT47XG4gIHF1ZXJ5Rmlyc3QocTogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnNPckNhbGxiYWNrOiBRdWVyeU9wdGlvbnMgfCBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+LCBjYjogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+O1xuICBnZXRCeUlEKGlkOiBzdHJpbmcsIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I6IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PjtcbiAgZ2V0QnlJRHMoaWRzOiBzdHJpbmdbXSwgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYjogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+O1xuICBnZXRCeVVJRCh0eXBlOiBzdHJpbmcsIHVpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiOiBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudD47XG4gIGdldFNpbmdsZSh0eXBlOiBzdHJpbmcsIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I6IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PjtcbiAgZ2V0Qm9va21hcmsoYm9va21hcms6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYjogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+O1xuICBwcmV2aWV3U2Vzc2lvbih0b2tlbjogc3RyaW5nLCBsaW5rUmVzb2x2ZXI6IChkb2M6IGFueSkgPT4gc3RyaW5nLCBkZWZhdWx0VXJsOiBzdHJpbmcsIGNiPzogUmVxdWVzdENhbGxiYWNrPHN0cmluZz4pOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0Q2xpZW50IGltcGxlbWVudHMgQ2xpZW50IHtcblxuICBhcGk6IEFwaTtcbiAgcmVzb2x2ZWRBcGk6IFJlc29sdmVkQXBpO1xuXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBvcHRpb25zPzogQXBpT3B0aW9ucykge1xuICAgIHRoaXMuYXBpID0gbmV3IEFwaSh1cmwsIG9wdGlvbnMpO1xuICB9XG5cbiAgZ2V0QXBpKCk6IFByb21pc2U8UmVzb2x2ZWRBcGk+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0KCk7XG4gIH1cblxuICBldmVyeXRoaW5nKCk6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtKCdldmVyeXRoaW5nJyk7XG4gIH1cblxuICBmb3JtKGZvcm1JZDogc3RyaW5nKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiBuZXcgTGF6eVNlYXJjaEZvcm0oZm9ybUlkLCB0aGlzLmFwaSk7XG4gIH1cblxuICBxdWVyeShxOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uc09yQ2FsbGJhY2s6IFF1ZXJ5T3B0aW9ucyB8IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4sIGNiPzogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkucXVlcnkocSwgb3B0aW9uc09yQ2FsbGJhY2ssIGNiKSk7XG4gIH1cblxuICBxdWVyeUZpcnN0KHE6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zT3JDYWxsYmFjazogUXVlcnlPcHRpb25zIHwgUmVxdWVzdENhbGxiYWNrPERvY3VtZW50PiwgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudD4ge1xuICAgIHJldHVybiB0aGlzLmdldEFwaSgpLnRoZW4oYXBpID0+IGFwaS5xdWVyeUZpcnN0KHEsIG9wdGlvbnNPckNhbGxiYWNrLCBjYikpO1xuICB9XG5cbiAgZ2V0QnlJRChpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkuZ2V0QnlJRChpZCwgb3B0aW9ucywgY2IpKTtcbiAgfVxuXG4gIGdldEJ5SURzKGlkczogc3RyaW5nW10sIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEFwaSgpLnRoZW4oYXBpID0+IGFwaS5nZXRCeUlEcyhpZHMsIG9wdGlvbnMsIGNiKSk7XG4gIH1cblxuICBnZXRCeVVJRCh0eXBlOiBzdHJpbmcsIHVpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkuZ2V0QnlVSUQodHlwZSwgdWlkLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgZ2V0U2luZ2xlKHR5cGU6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXBpKCkudGhlbihhcGkgPT4gYXBpLmdldFNpbmdsZSh0eXBlLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgZ2V0Qm9va21hcmsoYm9va21hcms6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXBpKCkudGhlbihhcGkgPT4gYXBpLmdldEJvb2ttYXJrKGJvb2ttYXJrLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgcHJldmlld1Nlc3Npb24odG9rZW46IHN0cmluZywgbGlua1Jlc29sdmVyOiAoZG9jOiBhbnkpID0+IHN0cmluZywgZGVmYXVsdFVybDogc3RyaW5nLCBjYj86IFJlcXVlc3RDYWxsYmFjazxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkucHJldmlld1Nlc3Npb24odG9rZW4sIGxpbmtSZXNvbHZlciwgZGVmYXVsdFVybCwgY2IpKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRBcGkodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBBcGlPcHRpb25zKTogUHJvbWlzZTxSZXNvbHZlZEFwaT4ge1xuICAgIGNvbnN0IGFwaSA9IG5ldyBBcGkodXJsLCBvcHRpb25zKTtcbiAgICByZXR1cm4gYXBpLmdldCgpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBR0E7QUFHQTtBQWFBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBekRBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/client.ts\n");

/***/ }),

/***/ "./src/experiments.ts":
/*!****************************!*\
  !*** ./src/experiments.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar Variation = (function () {\n    function Variation(data) {\n        this.data = {};\n        this.data = data;\n    }\n    Variation.prototype.id = function () {\n        return this.data.id;\n    };\n    Variation.prototype.ref = function () {\n        return this.data.ref;\n    };\n    Variation.prototype.label = function () {\n        return this.data.label;\n    };\n    return Variation;\n}());\nexports.Variation = Variation;\nvar Experiment = (function () {\n    function Experiment(data) {\n        this.data = {};\n        this.data = data;\n        this.variations = (data.variations || []).map(function (v) {\n            return new Variation(v);\n        });\n    }\n    Experiment.prototype.id = function () {\n        return this.data.id;\n    };\n    Experiment.prototype.googleId = function () {\n        return this.data.googleId;\n    };\n    Experiment.prototype.name = function () {\n        return this.data.name;\n    };\n    return Experiment;\n}());\nexports.Experiment = Experiment;\nvar Experiments = (function () {\n    function Experiments(data) {\n        if (data) {\n            this.drafts = (data.drafts || []).map(function (exp) {\n                return new Experiment(exp);\n            });\n            this.running = (data.running || []).map(function (exp) {\n                return new Experiment(exp);\n            });\n        }\n    }\n    Experiments.prototype.current = function () {\n        if (this.running.length > 0) {\n            return this.running[0];\n        }\n        else {\n            return null;\n        }\n    };\n    Experiments.prototype.refFromCookie = function (cookie) {\n        if (!cookie || cookie.trim() === '')\n            return null;\n        var splitted = cookie.trim().split(' ');\n        if (splitted.length < 2)\n            return null;\n        var expId = splitted[0];\n        var varIndex = parseInt(splitted[1], 10);\n        var exp = this.running.filter(function (exp) {\n            return exp.googleId() === expId && exp.variations.length > varIndex;\n        })[0];\n        return exp ? exp.variations[varIndex].ref() : null;\n    };\n    return Experiments;\n}());\nexports.Experiments = Experiments;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwZXJpbWVudHMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9zcmMvZXhwZXJpbWVudHMudHM/YThjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVmFyaWF0aW9uIHtcbiAgZGF0YTogYW55ID0ge307XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5pZDtcbiAgfVxuXG4gIHJlZigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEucmVmO1xuICB9XG5cbiAgbGFiZWwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmxhYmVsO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFeHBlcmltZW50IHtcbiAgdmFyaWF0aW9uczogVmFyaWF0aW9uW107XG4gIGRhdGE6IGFueSA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy52YXJpYXRpb25zID0gKGRhdGEudmFyaWF0aW9ucyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBuZXcgVmFyaWF0aW9uKHYpO1xuICAgIH0pO1xuICB9XG5cbiAgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmlkO1xuICB9XG5cbiAgZ29vZ2xlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmdvb2dsZUlkO1xuICB9XG5cbiAgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEubmFtZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXhwZXJpbWVudHMge1xuICBkcmFmdHM6IEV4cGVyaW1lbnRbXTtcbiAgcnVubmluZzogRXhwZXJpbWVudFtdO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICB0aGlzLmRyYWZ0cyA9IChkYXRhLmRyYWZ0cyB8fCBbXSkubWFwKChleHA6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEV4cGVyaW1lbnQoZXhwKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5ydW5uaW5nID0gKGRhdGEucnVubmluZyB8fCBbXSkubWFwKChleHA6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEV4cGVyaW1lbnQoZXhwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGN1cnJlbnQoKTogRXhwZXJpbWVudCB8IG51bGwge1xuICAgIGlmICh0aGlzLnJ1bm5pbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMucnVubmluZ1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIHJlZkZyb21Db29raWUoY29va2llOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWNvb2tpZSB8fCBjb29raWUudHJpbSgpID09PSAnJykgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgc3BsaXR0ZWQgPSBjb29raWUudHJpbSgpLnNwbGl0KCcgJyk7XG4gICAgaWYgKHNwbGl0dGVkLmxlbmd0aCA8IDIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGV4cElkID0gc3BsaXR0ZWRbMF07XG4gICAgY29uc3QgdmFySW5kZXggPSBwYXJzZUludChzcGxpdHRlZFsxXSwgMTApO1xuICAgIGNvbnN0IGV4cCA9IHRoaXMucnVubmluZy5maWx0ZXIoKGV4cCkgPT4ge1xuICAgICAgcmV0dXJuIGV4cC5nb29nbGVJZCgpID09PSBleHBJZCAmJiBleHAudmFyaWF0aW9ucy5sZW5ndGggPiB2YXJJbmRleDtcbiAgICB9KVswXTtcbiAgICByZXR1cm4gZXhwID8gZXhwLnZhcmlhdGlvbnNbdmFySW5kZXhdLnJlZigpIDogbnVsbDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBR0E7QUFGQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBbEJBO0FBb0JBO0FBSUE7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBdEJBO0FBd0JBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBakNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/experiments.ts\n");

/***/ }),

/***/ "./src/form.ts":
/*!*********************!*\
  !*** ./src/form.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar LazySearchForm = (function () {\n    function LazySearchForm(id, api) {\n        this.id = id;\n        this.api = api;\n        this.fields = {};\n    }\n    LazySearchForm.prototype.set = function (key, value) {\n        this.fields[key] = value;\n        return this;\n    };\n    LazySearchForm.prototype.ref = function (ref) {\n        return this.set('ref', ref);\n    };\n    LazySearchForm.prototype.query = function (query) {\n        return this.set('q', query);\n    };\n    LazySearchForm.prototype.pageSize = function (size) {\n        return this.set('pageSize', size);\n    };\n    LazySearchForm.prototype.fetch = function (fields) {\n        console.warn('Warning: Using Fetch is deprecated. Use the property `graphQuery` instead.');\n        return this.set('fetch', fields);\n    };\n    LazySearchForm.prototype.fetchLinks = function (fields) {\n        console.warn('Warning: Using FetchLinks is deprecated. Use the property `graphQuery` instead.');\n        return this.set('fetchLinks', fields);\n    };\n    LazySearchForm.prototype.graphQuery = function (query) {\n        return this.set('graphQuery', query);\n    };\n    LazySearchForm.prototype.lang = function (langCode) {\n        return this.set('lang', langCode);\n    };\n    LazySearchForm.prototype.page = function (p) {\n        return this.set('page', p);\n    };\n    LazySearchForm.prototype.after = function (documentId) {\n        return this.set('after', documentId);\n    };\n    LazySearchForm.prototype.orderings = function (orderings) {\n        return this.set('orderings', orderings);\n    };\n    LazySearchForm.prototype.url = function () {\n        var _this = this;\n        return this.api.get().then(function (api) {\n            return LazySearchForm.toSearchForm(_this, api).url();\n        });\n    };\n    LazySearchForm.prototype.submit = function (cb) {\n        var _this = this;\n        return this.api.get().then(function (api) {\n            return LazySearchForm.toSearchForm(_this, api).submit(cb);\n        });\n    };\n    LazySearchForm.toSearchForm = function (lazyForm, api) {\n        var form = api.form(lazyForm.id);\n        if (form) {\n            return Object.keys(lazyForm.fields).reduce(function (form, fieldKey) {\n                var fieldValue = lazyForm.fields[fieldKey];\n                if (fieldKey === 'q') {\n                    return form.query(fieldValue);\n                }\n                else if (fieldKey === 'pageSize') {\n                    return form.pageSize(fieldValue);\n                }\n                else if (fieldKey === 'fetch') {\n                    return form.fetch(fieldValue);\n                }\n                else if (fieldKey === 'fetchLinks') {\n                    return form.fetchLinks(fieldValue);\n                }\n                else if (fieldKey === 'graphQuery') {\n                    return form.graphQuery(fieldValue);\n                }\n                else if (fieldKey === 'lang') {\n                    return form.lang(fieldValue);\n                }\n                else if (fieldKey === 'page') {\n                    return form.page(fieldValue);\n                }\n                else if (fieldKey === 'after') {\n                    return form.after(fieldValue);\n                }\n                else if (fieldKey === 'orderings') {\n                    return form.orderings(fieldValue);\n                }\n                else {\n                    return form.set(fieldKey, fieldValue);\n                }\n            }, form);\n        }\n        else {\n            throw new Error(\"Unable to access to form \" + lazyForm.id);\n        }\n    };\n    return LazySearchForm;\n}());\nexports.LazySearchForm = LazySearchForm;\nvar SearchForm = (function () {\n    function SearchForm(form, httpClient) {\n        this.httpClient = httpClient;\n        this.form = form;\n        this.data = {};\n        for (var field in form.fields) {\n            if (form.fields[field]['default']) {\n                this.data[field] = [form.fields[field]['default']];\n            }\n        }\n    }\n    SearchForm.prototype.set = function (field, value) {\n        var fieldDesc = this.form.fields[field];\n        if (!fieldDesc)\n            throw new Error('Unknown field ' + field);\n        var checkedValue = value === '' || value === undefined ? null : value;\n        var values = this.data[field] || [];\n        if (fieldDesc.multiple) {\n            values = checkedValue ? values.concat([checkedValue]) : values;\n        }\n        else {\n            values = checkedValue ? [checkedValue] : values;\n        }\n        this.data[field] = values;\n        return this;\n    };\n    /**\n     * Sets a ref to query on for this SearchForm. This is a mandatory\n     * method to call before calling submit(), and api.form('everything').submit()\n     * will not work.\n     */\n    SearchForm.prototype.ref = function (ref) {\n        return this.set('ref', ref);\n    };\n    /**\n     * Sets a predicate-based query for this SearchForm. This is where you\n     * paste what you compose in your prismic.io API browser.\n     */\n    SearchForm.prototype.query = function (query) {\n        if (typeof query === 'string') {\n            return this.query([query]);\n        }\n        else if (Array.isArray(query)) {\n            return this.set('q', \"[\" + query.join('') + \"]\");\n        }\n        else {\n            throw new Error(\"Invalid query : \" + query);\n        }\n    };\n    /**\n     * Sets a page size to query for this SearchForm. This is an optional method.\n     *\n     * @param {number} size - The page size\n     * @returns {SearchForm} - The SearchForm itself\n     */\n    SearchForm.prototype.pageSize = function (size) {\n        return this.set('pageSize', size);\n    };\n    /**\n     * Restrict the results document to the specified fields\n     */\n    SearchForm.prototype.fetch = function (fields) {\n        console.warn('Warning: Using Fetch is deprecated. Use the property `graphQuery` instead.');\n        var strFields = Array.isArray(fields) ? fields.join(',') : fields;\n        return this.set('fetch', strFields);\n    };\n    /**\n     * Include the requested fields in the DocumentLink instances in the result\n     */\n    SearchForm.prototype.fetchLinks = function (fields) {\n        console.warn('Warning: Using FetchLinks is deprecated. Use the property `graphQuery` instead.');\n        var strFields = Array.isArray(fields) ? fields.join(',') : fields;\n        return this.set('fetchLinks', strFields);\n    };\n    /**\n     * Sets the graphquery to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.graphQuery = function (query) {\n        return this.set('graphQuery', query);\n    };\n    /**\n     * Sets the language to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.lang = function (langCode) {\n        return this.set('lang', langCode);\n    };\n    /**\n     * Sets the page number to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.page = function (p) {\n        return this.set('page', p);\n    };\n    /**\n     * Remove all the documents except for those after the specified document in the list. This is an optional method.\n     */\n    SearchForm.prototype.after = function (documentId) {\n        return this.set('after', documentId);\n    };\n    /**\n     * Sets the orderings to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.orderings = function (orderings) {\n        if (!orderings) {\n            return this;\n        }\n        else {\n            return this.set('orderings', \"[\" + orderings.join(',') + \"]\");\n        }\n    };\n    /**\n     * Build the URL to query\n     */\n    SearchForm.prototype.url = function () {\n        var url = this.form.action;\n        if (this.data) {\n            var sep = (url.indexOf('?') > -1 ? '&' : '?');\n            for (var key in this.data) {\n                if (this.data.hasOwnProperty(key)) {\n                    var values = this.data[key];\n                    if (values) {\n                        for (var i = 0; i < values.length; i++) {\n                            url += sep + key + '=' + encodeURIComponent(values[i]);\n                            sep = '&';\n                        }\n                    }\n                }\n            }\n        }\n        return url;\n    };\n    /**\n     * Submits the query, and calls the callback function.\n     */\n    SearchForm.prototype.submit = function (cb) {\n        return this.httpClient.cachedRequest(this.url()).then(function (response) {\n            cb && cb(null, response);\n            return response;\n        })[\"catch\"](function (error) {\n            cb && cb(error);\n            throw error;\n        });\n    };\n    return SearchForm;\n}());\nexports.SearchForm = SearchForm;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZm9ybS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL3NyYy9mb3JtLnRzPzdlMTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwaSBmcm9tICcuL0FwaSc7XG5pbXBvcnQgUmVzb2x2ZWRBcGkgZnJvbSAnLi9SZXNvbHZlZEFwaSc7XG5pbXBvcnQgQXBpU2VhcmNoUmVzcG9uc2UgZnJvbSAnLi9BcGlTZWFyY2hSZXNwb25zZSc7XG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICcuL0h0dHBDbGllbnQnO1xuaW1wb3J0IHsgUmVxdWVzdENhbGxiYWNrIH0gZnJvbSAnLi9yZXF1ZXN0JztcblxuZXhwb3J0IHR5cGUgRmllbGRzID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuZXhwb3J0IGludGVyZmFjZSBGb3JtIHtcbiAgZmllbGRzOiBGaWVsZHM7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHJlbDogc3RyaW5nO1xuICBmb3JtX21ldGhvZDogc3RyaW5nO1xuICBlbmN0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBMYXp5U2VhcmNoRm9ybSB7XG4gIGlkOiBzdHJpbmc7XG4gIGZpZWxkczogRmllbGRzO1xuICBhcGk6IEFwaTtcblxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBhcGk6IEFwaSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICB0aGlzLmZpZWxkcyA9IHt9O1xuICB9XG5cbiAgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHRoaXMuZmllbGRzW2tleV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlZihyZWY6IHN0cmluZyk6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3JlZicsIHJlZik7XG4gIH1cblxuICBxdWVyeShxdWVyeTogc3RyaW5nIHwgc3RyaW5nW10pOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdxJywgcXVlcnkpO1xuICB9XG5cbiAgcGFnZVNpemUoc2l6ZTogbnVtYmVyKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgncGFnZVNpemUnLCBzaXplKTtcbiAgfVxuXG4gIGZldGNoKGZpZWxkczogc3RyaW5nIHwgc3RyaW5nW10pOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgY29uc29sZS53YXJuKCdXYXJuaW5nOiBVc2luZyBGZXRjaCBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIHByb3BlcnR5IGBncmFwaFF1ZXJ5YCBpbnN0ZWFkLicpO1xuICAgIHJldHVybiB0aGlzLnNldCgnZmV0Y2gnLCBmaWVsZHMpO1xuICB9XG5cbiAgZmV0Y2hMaW5rcyhmaWVsZHM6IHN0cmluZyB8IHN0cmluZ1tdKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIGNvbnNvbGUud2FybignV2FybmluZzogVXNpbmcgRmV0Y2hMaW5rcyBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIHByb3BlcnR5IGBncmFwaFF1ZXJ5YCBpbnN0ZWFkLicpO1xuICAgIHJldHVybiB0aGlzLnNldCgnZmV0Y2hMaW5rcycsIGZpZWxkcyk7XG4gIH1cblxuICBncmFwaFF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdncmFwaFF1ZXJ5JywgcXVlcnkpO1xuICB9XG5cbiAgbGFuZyhsYW5nQ29kZTogc3RyaW5nKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnbGFuZycsIGxhbmdDb2RlKTtcbiAgfVxuXG4gIHBhZ2UocDogbnVtYmVyKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgncGFnZScsIHApO1xuICB9XG5cbiAgYWZ0ZXIoZG9jdW1lbnRJZDogc3RyaW5nKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnYWZ0ZXInLCBkb2N1bWVudElkKTtcbiAgfVxuXG4gIG9yZGVyaW5ncyhvcmRlcmluZ3M/OiBzdHJpbmdbXSk6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ29yZGVyaW5ncycsIG9yZGVyaW5ncyk7XG4gIH1cblxuICB1cmwoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0KCkudGhlbigoYXBpKSA9PiB7XG4gICAgICByZXR1cm4gTGF6eVNlYXJjaEZvcm0udG9TZWFyY2hGb3JtKHRoaXMsIGFwaSkudXJsKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdWJtaXQoY2I6IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4pOiBQcm9taXNlPEFwaVNlYXJjaFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuYXBpLmdldCgpLnRoZW4oKGFwaSkgPT4ge1xuICAgICAgcmV0dXJuIExhenlTZWFyY2hGb3JtLnRvU2VhcmNoRm9ybSh0aGlzLCBhcGkpLnN1Ym1pdChjYik7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgdG9TZWFyY2hGb3JtKGxhenlGb3JtOiBMYXp5U2VhcmNoRm9ybSwgYXBpOiBSZXNvbHZlZEFwaSk6IFNlYXJjaEZvcm0ge1xuICAgIGNvbnN0IGZvcm0gPSBhcGkuZm9ybShsYXp5Rm9ybS5pZCk7XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhsYXp5Rm9ybS5maWVsZHMpLnJlZHVjZSgoZm9ybSwgZmllbGRLZXkpID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGxhenlGb3JtLmZpZWxkc1tmaWVsZEtleV07XG4gICAgICAgIGlmIChmaWVsZEtleSA9PT0gJ3EnKSB7XG4gICAgICAgICAgcmV0dXJuIGZvcm0ucXVlcnkoZmllbGRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGRLZXkgPT09ICdwYWdlU2l6ZScpIHtcbiAgICAgICAgICByZXR1cm4gZm9ybS5wYWdlU2l6ZShmaWVsZFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZEtleSA9PT0gJ2ZldGNoJykge1xuICAgICAgICAgIHJldHVybiBmb3JtLmZldGNoKGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkS2V5ID09PSAnZmV0Y2hMaW5rcycpIHtcbiAgICAgICAgICByZXR1cm4gZm9ybS5mZXRjaExpbmtzKGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkS2V5ID09PSAnZ3JhcGhRdWVyeScpIHtcbiAgICAgICAgICByZXR1cm4gZm9ybS5ncmFwaFF1ZXJ5KGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkS2V5ID09PSAnbGFuZycpIHtcbiAgICAgICAgICByZXR1cm4gZm9ybS5sYW5nKGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkS2V5ID09PSAncGFnZScpIHtcbiAgICAgICAgICByZXR1cm4gZm9ybS5wYWdlKGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkS2V5ID09PSAnYWZ0ZXInKSB7XG4gICAgICAgICAgcmV0dXJuIGZvcm0uYWZ0ZXIoZmllbGRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGRLZXkgPT09ICdvcmRlcmluZ3MnKSB7XG4gICAgICAgICAgcmV0dXJuIGZvcm0ub3JkZXJpbmdzKGZpZWxkVmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmb3JtLnNldChmaWVsZEtleSwgZmllbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBhY2Nlc3MgdG8gZm9ybSAke2xhenlGb3JtLmlkfWApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VhcmNoRm9ybSB7XG4gIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQ7XG4gIGZvcm06IEZvcm07XG4gIGRhdGE6IGFueTtcblxuICBjb25zdHJ1Y3Rvcihmb3JtOiBGb3JtLCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50KSB7XG4gICAgdGhpcy5odHRwQ2xpZW50ID0gaHR0cENsaWVudDtcbiAgICB0aGlzLmZvcm0gPSBmb3JtO1xuXG4gICAgdGhpcy5kYXRhID0ge307XG4gICAgZm9yIChjb25zdCBmaWVsZCBpbiBmb3JtLmZpZWxkcykge1xuICAgICAgaWYgKGZvcm0uZmllbGRzW2ZpZWxkXVsnZGVmYXVsdCddKSB7XG4gICAgICAgIHRoaXMuZGF0YVtmaWVsZF0gPSBbZm9ybS5maWVsZHNbZmllbGRdWydkZWZhdWx0J11dO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldChmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogU2VhcmNoRm9ybSB7XG4gICAgY29uc3QgZmllbGREZXNjID0gdGhpcy5mb3JtLmZpZWxkc1tmaWVsZF07XG4gICAgaWYgKCFmaWVsZERlc2MpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBmaWVsZCAnICsgZmllbGQpO1xuICAgIGNvbnN0IGNoZWNrZWRWYWx1ZSA9IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xuICAgIGxldCB2YWx1ZXMgPSB0aGlzLmRhdGFbZmllbGRdIHx8IFtdO1xuICAgIGlmIChmaWVsZERlc2MubXVsdGlwbGUpIHtcbiAgICAgIHZhbHVlcyA9IGNoZWNrZWRWYWx1ZSA/IHZhbHVlcy5jb25jYXQoW2NoZWNrZWRWYWx1ZV0pIDogdmFsdWVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZXMgPSBjaGVja2VkVmFsdWUgPyBbY2hlY2tlZFZhbHVlXSA6IHZhbHVlcztcbiAgICB9XG4gICAgdGhpcy5kYXRhW2ZpZWxkXSA9IHZhbHVlcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgcmVmIHRvIHF1ZXJ5IG9uIGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYSBtYW5kYXRvcnlcbiAgICogbWV0aG9kIHRvIGNhbGwgYmVmb3JlIGNhbGxpbmcgc3VibWl0KCksIGFuZCBhcGkuZm9ybSgnZXZlcnl0aGluZycpLnN1Ym1pdCgpXG4gICAqIHdpbGwgbm90IHdvcmsuXG4gICAqL1xuICByZWYocmVmOiBzdHJpbmcpOiBTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3JlZicsIHJlZik7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHByZWRpY2F0ZS1iYXNlZCBxdWVyeSBmb3IgdGhpcyBTZWFyY2hGb3JtLiBUaGlzIGlzIHdoZXJlIHlvdVxuICAgKiBwYXN0ZSB3aGF0IHlvdSBjb21wb3NlIGluIHlvdXIgcHJpc21pYy5pbyBBUEkgYnJvd3Nlci5cbiAgICovXG4gIHF1ZXJ5KHF1ZXJ5OiBzdHJpbmcgfCBzdHJpbmdbXSk6IFNlYXJjaEZvcm0ge1xuICAgIGlmICh0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeShbcXVlcnldKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoJ3EnLCBgWyR7cXVlcnkuam9pbignJyl9XWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcXVlcnkgOiAke3F1ZXJ5fWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgcGFnZSBzaXplIHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBwYWdlIHNpemVcbiAgICogQHJldHVybnMge1NlYXJjaEZvcm19IC0gVGhlIFNlYXJjaEZvcm0gaXRzZWxmXG4gICAqL1xuICBwYWdlU2l6ZShzaXplOiBudW1iZXIpOiBTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3BhZ2VTaXplJywgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdHJpY3QgdGhlIHJlc3VsdHMgZG9jdW1lbnQgdG8gdGhlIHNwZWNpZmllZCBmaWVsZHNcbiAgICovXG4gIGZldGNoKGZpZWxkczogc3RyaW5nIHwgc3RyaW5nW10pOiBTZWFyY2hGb3JtIHtcbiAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IFVzaW5nIEZldGNoIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgcHJvcGVydHkgYGdyYXBoUXVlcnlgIGluc3RlYWQuJyk7XG4gICAgY29uc3Qgc3RyRmllbGRzID0gQXJyYXkuaXNBcnJheShmaWVsZHMpID8gZmllbGRzLmpvaW4oJywnKSA6IGZpZWxkcztcbiAgICByZXR1cm4gdGhpcy5zZXQoJ2ZldGNoJywgc3RyRmllbGRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmNsdWRlIHRoZSByZXF1ZXN0ZWQgZmllbGRzIGluIHRoZSBEb2N1bWVudExpbmsgaW5zdGFuY2VzIGluIHRoZSByZXN1bHRcbiAgICovXG4gIGZldGNoTGlua3MoZmllbGRzOiBzdHJpbmcgfCBzdHJpbmdbXSk6IFNlYXJjaEZvcm0ge1xuICAgIGNvbnNvbGUud2FybignV2FybmluZzogVXNpbmcgRmV0Y2hMaW5rcyBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIHByb3BlcnR5IGBncmFwaFF1ZXJ5YCBpbnN0ZWFkLicpO1xuICAgIGNvbnN0IHN0ckZpZWxkcyA9IEFycmF5LmlzQXJyYXkoZmllbGRzKSA/IGZpZWxkcy5qb2luKCcsJykgOiBmaWVsZHM7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdmZXRjaExpbmtzJywgc3RyRmllbGRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBncmFwaHF1ZXJ5IHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKi9cbiAgZ3JhcGhRdWVyeShxdWVyeTogc3RyaW5nKTogU2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdncmFwaFF1ZXJ5JywgcXVlcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxhbmd1YWdlIHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKi9cbiAgbGFuZyhsYW5nQ29kZTogc3RyaW5nKTogU2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdsYW5nJywgbGFuZ0NvZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBhZ2UgbnVtYmVyIHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKi9cbiAgcGFnZShwOiBudW1iZXIpOiBTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3BhZ2UnLCBwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHRoZSBkb2N1bWVudHMgZXhjZXB0IGZvciB0aG9zZSBhZnRlciB0aGUgc3BlY2lmaWVkIGRvY3VtZW50IGluIHRoZSBsaXN0LiBUaGlzIGlzIGFuIG9wdGlvbmFsIG1ldGhvZC5cbiAgICovXG4gIGFmdGVyKGRvY3VtZW50SWQ6IHN0cmluZyk6IFNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnYWZ0ZXInLCBkb2N1bWVudElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvcmRlcmluZ3MgdG8gcXVlcnkgZm9yIHRoaXMgU2VhcmNoRm9ybS4gVGhpcyBpcyBhbiBvcHRpb25hbCBtZXRob2QuXG4gICAqL1xuICBvcmRlcmluZ3Mob3JkZXJpbmdzID86IHN0cmluZ1tdKTogU2VhcmNoRm9ybSB7XG4gICAgaWYgKCFvcmRlcmluZ3MpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoJ29yZGVyaW5ncycsIGBbJHtvcmRlcmluZ3Muam9pbignLCcpfV1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgdGhlIFVSTCB0byBxdWVyeVxuICAgKi9cbiAgdXJsKCk6IHN0cmluZyB7XG4gICAgbGV0IHVybCA9IHRoaXMuZm9ybS5hY3Rpb247XG4gICAgaWYgKHRoaXMuZGF0YSkge1xuICAgICAgbGV0IHNlcCA9ICh1cmwuaW5kZXhPZignPycpID4gLTEgPyAnJicgOiAnPycpO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5kYXRhKSB7XG4gICAgICAgIGlmICAodGhpcy5kYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmRhdGFba2V5XTtcbiAgICAgICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB1cmwgKz0gc2VwICsga2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlc1tpXSk7XG4gICAgICAgICAgICAgIHNlcCA9ICcmJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJtaXRzIHRoZSBxdWVyeSwgYW5kIGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICovXG4gIHN1Ym1pdChjYjogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmNhY2hlZFJlcXVlc3Q8QXBpU2VhcmNoUmVzcG9uc2U+KHRoaXMudXJsKCkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjYiAmJiBjYihudWxsLCByZXNwb25zZSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjYiAmJiBjYihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQWlCQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXJHQTtBQXVHQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEzSkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/form.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar Predicates_1 = __webpack_require__(/*! ./Predicates */ \"./src/Predicates.ts\");\nvar experiments_1 = __webpack_require__(/*! ./experiments */ \"./src/experiments.ts\");\nvar client_1 = __webpack_require__(/*! ./client */ \"./src/client.ts\");\nvar Api_1 = __webpack_require__(/*! ./Api */ \"./src/Api.ts\");\nvar ResolvedApi_1 = __webpack_require__(/*! ./ResolvedApi */ \"./src/ResolvedApi.ts\");\nvar Prismic;\n(function (Prismic) {\n    Prismic.experimentCookie = ResolvedApi_1.EXPERIMENT_COOKIE;\n    Prismic.previewCookie = ResolvedApi_1.PREVIEW_COOKIE;\n    Prismic.Predicates = Predicates_1[\"default\"];\n    Prismic.Experiments = experiments_1.Experiments;\n    Prismic.Api = Api_1[\"default\"];\n    function client(url, options) {\n        return new client_1.DefaultClient(url, options);\n    }\n    Prismic.client = client;\n    function getApi(url, options) {\n        return client_1.DefaultClient.getApi(url, options);\n    }\n    Prismic.getApi = getApi;\n    function api(url, options) {\n        return getApi(url, options);\n    }\n    Prismic.api = api;\n})(Prismic || (Prismic = {}));\nmodule.exports = Prismic;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJpc21pY1ByZWRpY2F0ZXMgIGZyb20gJy4vUHJlZGljYXRlcyc7XG5pbXBvcnQgeyBFeHBlcmltZW50cyBhcyBQcmlzbWljRXhwZXJpbWVudCB9IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuaW1wb3J0IHsgRGVmYXVsdENsaWVudCB9IGZyb20gJy4vY2xpZW50JztcbmltcG9ydCBQcmlzbWljQXBpLCB7IEFwaU9wdGlvbnMgfSBmcm9tICcuL0FwaSc7XG5pbXBvcnQgUmVzb2x2ZWRBcGksIHsgRVhQRVJJTUVOVF9DT09LSUUsIFBSRVZJRVdfQ09PS0lFIH0gZnJvbSAnLi9SZXNvbHZlZEFwaSc7XG5cbm5hbWVzcGFjZSBQcmlzbWljIHtcblxuICBleHBvcnQgY29uc3QgZXhwZXJpbWVudENvb2tpZSA9IEVYUEVSSU1FTlRfQ09PS0lFO1xuICBleHBvcnQgY29uc3QgcHJldmlld0Nvb2tpZSA9IFBSRVZJRVdfQ09PS0lFO1xuICBleHBvcnQgY29uc3QgUHJlZGljYXRlcyA9IFByaXNtaWNQcmVkaWNhdGVzO1xuICBleHBvcnQgY29uc3QgRXhwZXJpbWVudHMgPSBQcmlzbWljRXhwZXJpbWVudDtcbiAgZXhwb3J0IGNvbnN0IEFwaSA9IFByaXNtaWNBcGk7XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGNsaWVudCh1cmw6IHN0cmluZywgb3B0aW9ucz86IEFwaU9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IERlZmF1bHRDbGllbnQodXJsLCBvcHRpb25zKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRBcGkodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBBcGlPcHRpb25zKTogUHJvbWlzZTxSZXNvbHZlZEFwaT4ge1xuICAgIHJldHVybiBEZWZhdWx0Q2xpZW50LmdldEFwaSh1cmwsIG9wdGlvbnMpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGFwaSh1cmw6IHN0cmluZywgb3B0aW9ucz86IEFwaU9wdGlvbnMpOiBQcm9taXNlPFJlc29sdmVkQXBpPiB7XG4gICAgcmV0dXJuIGdldEFwaSh1cmwsIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCA9IFByaXNtaWM7XG4iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/lru.ts":
/*!********************!*\
  !*** ./src/lru.ts ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n* A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n* recently used items while discarding least recently used items when its limit\n* is reached.\n*\n* Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n* Typescript-ified by Oleksandr Nikitin <https://tvori.info>\n*\n* Illustration of the design:\n*\n*       entry             entry             entry             entry\n*       ______            ______            ______            ______\n*      | head |.newer => |      |.newer => |      |.newer => | tail |\n*      |  A   |          |  B   |          |  C   |          |  D   |\n*      |______| <= older.|______| <= older.|______| <= older.|______|\n*\n*  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n*/\nexports.__esModule = true;\nfunction MakeLRUCache(limit) {\n    return new LRUCache(limit);\n}\nexports.MakeLRUCache = MakeLRUCache;\nfunction LRUCache(limit) {\n    // Current size of the cache. (Read-only).\n    this.size = 0;\n    // Maximum number of items this cache can hold.\n    this.limit = limit;\n    this._keymap = {};\n}\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function (key, value) {\n    var entry = { key: key, value: value };\n    // Note: No protection agains replacing, and thus orphan entries. By design.\n    this._keymap[key] = entry;\n    if (this.tail) {\n        // link previous tail to the new tail (entry)\n        this.tail.newer = entry;\n        entry.older = this.tail;\n    }\n    else {\n        // we're first in -- yay\n        this.head = entry;\n    }\n    // add new entry to the end of the linked list -- it's now the freshest entry.\n    this.tail = entry;\n    if (this.size === this.limit) {\n        // we hit the limit -- remove the head\n        return this.shift();\n    }\n    else {\n        // increase the size counter\n        this.size++;\n    }\n};\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function () {\n    // todo: handle special case when limit == 1\n    var entry = this.head;\n    if (entry) {\n        if (this.head.newer) {\n            this.head = this.head.newer;\n            this.head.older = undefined;\n        }\n        else {\n            this.head = undefined;\n        }\n        // Remove last strong reference to <entry> and remove links from the purged\n        // entry being returned:\n        entry.newer = entry.older = undefined;\n        // delete is slow, but we need to do this to avoid uncontrollable growth:\n        delete this._keymap[entry.key];\n    }\n    console.log('purging ', entry.key);\n    return entry;\n};\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function (key, returnEntry) {\n    // First, find our cache entry\n    var entry = this._keymap[key];\n    if (entry === undefined)\n        return; // Not cached. Sorry.\n    // As <key> was found in the cache, register it as being requested recently\n    if (entry === this.tail) {\n        // Already the most recently used entry, so no need to update the list\n        return returnEntry ? entry : entry.value;\n    }\n    // HEAD--------------TAIL\n    //   <.older   .newer>\n    //  <--- add direction --\n    //   A  B  C  <D>  E\n    if (entry.newer) {\n        if (entry === this.head)\n            this.head = entry.newer;\n        entry.newer.older = entry.older; // C <-- E.\n    }\n    if (entry.older)\n        entry.older.newer = entry.newer; // C. --> E\n    entry.newer = undefined; // D --x\n    entry.older = this.tail; // D. --> E\n    if (this.tail)\n        this.tail.newer = entry; // E. <-- D\n    this.tail = entry;\n    return returnEntry ? entry : entry.value;\n};\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function (key) {\n    return this._keymap[key];\n};\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function (key, value) {\n    var oldvalue;\n    var entry = this.get(key, true);\n    if (entry) {\n        oldvalue = entry.value;\n        entry.value = value;\n    }\n    else {\n        oldvalue = this.put(key, value);\n        if (oldvalue)\n            oldvalue = oldvalue.value;\n    }\n    return oldvalue;\n};\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function (key) {\n    var entry = this._keymap[key];\n    if (!entry)\n        return;\n    delete this._keymap[entry.key]; // need to do delete unfortunately\n    if (entry.newer && entry.older) {\n        // relink the older entry with the newer entry\n        entry.older.newer = entry.newer;\n        entry.newer.older = entry.older;\n    }\n    else if (entry.newer) {\n        // remove the link to us\n        entry.newer.older = undefined;\n        // link the newer entry to head\n        this.head = entry.newer;\n    }\n    else if (entry.older) {\n        // remove the link to us\n        entry.older.newer = undefined;\n        // link the newer entry to head\n        this.tail = entry.older;\n    }\n    else {\n        this.head = this.tail = undefined;\n    }\n    this.size--;\n    return entry.value;\n};\n/** Removes all entries */\nLRUCache.prototype.removeAll = function () {\n    // This should be safe, as we never expose strong refrences to the outside\n    this.head = this.tail = undefined;\n    this.size = 0;\n    this._keymap = {};\n};\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n    LRUCache.prototype.keys = function () { return Object.keys(this._keymap); };\n}\nelse {\n    LRUCache.prototype.keys = function () {\n        var keys = [];\n        for (var k in this._keymap)\n            keys.push(k);\n        return keys;\n    };\n}\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function (fun, context, desc) {\n    var entry;\n    if (context === true) {\n        desc = true;\n        context = undefined;\n    }\n    else if (typeof context !== 'object')\n        context = this;\n    if (desc) {\n        entry = this.tail;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.older;\n        }\n    }\n    else {\n        entry = this.head;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.newer;\n        }\n    }\n};\n/** Returns a JSON (array) representation */\n//LRUCache.prototype.toJSON = function () {\n//    var s: IEntry[] = [], entry = this.head;\n//    while (entry) {\n//        s.push({ key: entry.key.toJSON(), value: entry.value.toJSON() });\n//        entry = entry.newer;\n//    }\n//    return s;\n//};\n/** Returns a String representation */\nLRUCache.prototype.toString = function () {\n    var s = '', entry = this.head;\n    while (entry) {\n        s += String(entry.key) + ':' + entry.value;\n        entry = entry.newer;\n        if (entry)\n            s += ' < ';\n    }\n    return s;\n};\n// Export ourselves\n//if (typeof this === 'object') this.LRUCache = LRUCache; \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbHJ1LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUHJpc21pY0pTLy4vc3JjL2xydS50cz8xMjUzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuKiBBIGRvdWJseSBsaW5rZWQgbGlzdC1iYXNlZCBMZWFzdCBSZWNlbnRseSBVc2VkIChMUlUpIGNhY2hlLiBXaWxsIGtlZXAgbW9zdFxuKiByZWNlbnRseSB1c2VkIGl0ZW1zIHdoaWxlIGRpc2NhcmRpbmcgbGVhc3QgcmVjZW50bHkgdXNlZCBpdGVtcyB3aGVuIGl0cyBsaW1pdFxuKiBpcyByZWFjaGVkLlxuKlxuKiBMaWNlbnNlZCB1bmRlciBNSVQuIENvcHlyaWdodCAoYykgMjAxMCBSYXNtdXMgQW5kZXJzc29uIDxodHRwOi8vaHVuY2guc2UvPlxuKiBUeXBlc2NyaXB0LWlmaWVkIGJ5IE9sZWtzYW5kciBOaWtpdGluIDxodHRwczovL3R2b3JpLmluZm8+XG4qXG4qIElsbHVzdHJhdGlvbiBvZiB0aGUgZGVzaWduOlxuKlxuKiAgICAgICBlbnRyeSAgICAgICAgICAgICBlbnRyeSAgICAgICAgICAgICBlbnRyeSAgICAgICAgICAgICBlbnRyeVxuKiAgICAgICBfX19fX18gICAgICAgICAgICBfX19fX18gICAgICAgICAgICBfX19fX18gICAgICAgICAgICBfX19fX19cbiogICAgICB8IGhlYWQgfC5uZXdlciA9PiB8ICAgICAgfC5uZXdlciA9PiB8ICAgICAgfC5uZXdlciA9PiB8IHRhaWwgfFxuKiAgICAgIHwgIEEgICB8ICAgICAgICAgIHwgIEIgICB8ICAgICAgICAgIHwgIEMgICB8ICAgICAgICAgIHwgIEQgICB8XG4qICAgICAgfF9fX19fX3wgPD0gb2xkZXIufF9fX19fX3wgPD0gb2xkZXIufF9fX19fX3wgPD0gb2xkZXIufF9fX19fX3xcbipcbiogIHJlbW92ZWQgIDwtLSAgPC0tICA8LS0gIDwtLSAgPC0tICA8LS0gIDwtLSAgPC0tICA8LS0gIDwtLSAgPC0tICBhZGRlZFxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIE1ha2VMUlVDYWNoZShsaW1pdDogbnVtYmVyKTogSUxSVUNhY2hlIHtcbiAgICByZXR1cm4gbmV3ICg8YW55PkxSVUNhY2hlKShsaW1pdCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxSVUNhY2hlIHtcbiAgICBwdXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkO1xuICAgIGdldChrZXk6IHN0cmluZywgRW50cnk6IGJvb2xlYW4pOiBhbnk7XG4gICAgcmVtb3ZlKGtleTogU3RyaW5nKTogdm9pZDtcbiAgICByZW1vdmVBbGwoKTogdm9pZDtcbn1cblxuZnVuY3Rpb24gTFJVQ2FjaGUobGltaXQ6IG51bWJlcikge1xuICAgIC8vIEN1cnJlbnQgc2l6ZSBvZiB0aGUgY2FjaGUuIChSZWFkLW9ubHkpLlxuICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgLy8gTWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdGhpcyBjYWNoZSBjYW4gaG9sZC5cbiAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gICAgdGhpcy5fa2V5bWFwID0ge307XG59XG5cbmludGVyZmFjZSBJRW50cnkge1xuICAgIG5ld2VyPzogSUVudHJ5O1xuICAgIG9sZGVyPzogSUVudHJ5O1xuICAgIGtleTogc3RyaW5nO1xuICAgIHZhbHVlOiBhbnk7XG59XG5cbi8qKlxuICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXNcbiAqIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvciB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkXG4gKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG4gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICB2YXIgZW50cnk6IElFbnRyeSA9IHsga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9O1xuICAgIC8vIE5vdGU6IE5vIHByb3RlY3Rpb24gYWdhaW5zIHJlcGxhY2luZywgYW5kIHRodXMgb3JwaGFuIGVudHJpZXMuIEJ5IGRlc2lnbi5cbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgICAgLy8gbGluayBwcmV2aW91cyB0YWlsIHRvIHRoZSBuZXcgdGFpbCAoZW50cnkpXG4gICAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSdyZSBmaXJzdCBpbiAtLSB5YXlcbiAgICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgfVxuICAgIC8vIGFkZCBuZXcgZW50cnkgdG8gdGhlIGVuZCBvZiB0aGUgbGlua2VkIGxpc3QgLS0gaXQncyBub3cgdGhlIGZyZXNoZXN0IGVudHJ5LlxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcbiAgICAgICAgLy8gd2UgaGl0IHRoZSBsaW1pdCAtLSByZW1vdmUgdGhlIGhlYWRcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hpZnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbmNyZWFzZSB0aGUgc2l6ZSBjb3VudGVyXG4gICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgIH1cbn07XG5cbi8qKlxuICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGUgY2FjaGUuIFJldHVybnMgdGhlXG4gKiByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGUgY2FjaGUgd2FzIGVtcHR5LlxuICpcbiAqIElmIHlvdSBuZWVkIHRvIHBlcmZvcm0gYW55IGZvcm0gb2YgZmluYWxpemF0aW9uIG9mIHB1cmdlZCBpdGVtcywgdGhpcyBpcyBhXG4gKiBnb29kIHBsYWNlIHRvIGRvIGl0LiBTaW1wbHkgb3ZlcnJpZGUvcmVwbGFjZSB0aGlzIGZ1bmN0aW9uOlxuICpcbiAqICAgdmFyIGMgPSBuZXcgTFJVQ2FjaGUoMTIzKTtcbiAqICAgYy5zaGlmdCA9IGZ1bmN0aW9uKCkge1xuICogICAgIHZhciBlbnRyeSA9IExSVUNhY2hlLnByb3RvdHlwZS5zaGlmdC5jYWxsKHRoaXMpO1xuICogICAgIGRvU29tZXRoaW5nV2l0aChlbnRyeSk7XG4gKiAgICAgcmV0dXJuIGVudHJ5O1xuICogICB9XG4gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyB0b2RvOiBoYW5kbGUgc3BlY2lhbCBjYXNlIHdoZW4gbGltaXQgPT0gMVxuICAgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZC5uZXdlcikge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgICAgICAgICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBsYXN0IHN0cm9uZyByZWZlcmVuY2UgdG8gPGVudHJ5PiBhbmQgcmVtb3ZlIGxpbmtzIGZyb20gdGhlIHB1cmdlZFxuICAgICAgICAvLyBlbnRyeSBiZWluZyByZXR1cm5lZDpcbiAgICAgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gZGVsZXRlIGlzIHNsb3csIGJ1dCB3ZSBuZWVkIHRvIGRvIHRoaXMgdG8gYXZvaWQgdW5jb250cm9sbGFibGUgZ3Jvd3RoOlxuICAgICAgICBkZWxldGUgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV07XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdwdXJnaW5nICcsIGVudHJ5LmtleSk7XG4gICAgcmV0dXJuIGVudHJ5O1xufTtcblxuLyoqXG4gKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCA8a2V5PlxuICogb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXk6IHN0cmluZywgcmV0dXJuRW50cnk6IGJvb2xlYW4pOiBhbnkge1xuICAgIC8vIEZpcnN0LCBmaW5kIG91ciBjYWNoZSBlbnRyeVxuICAgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIE5vdCBjYWNoZWQuIFNvcnJ5LlxuICAgIC8vIEFzIDxrZXk+IHdhcyBmb3VuZCBpbiB0aGUgY2FjaGUsIHJlZ2lzdGVyIGl0IGFzIGJlaW5nIHJlcXVlc3RlZCByZWNlbnRseVxuICAgIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgICAgIC8vIEFscmVhZHkgdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBlbnRyeSwgc28gbm8gbmVlZCB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbiAgICB9XG4gICAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAgIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cbiAgICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG4gICAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpXG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cbiAgICB9XG4gICAgaWYgKGVudHJ5Lm9sZGVyKVxuICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuICAgIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICAgIGlmICh0aGlzLnRhaWwpXG4gICAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBGb2xsb3dpbmcgY29kZSBpcyBvcHRpb25hbCBhbmQgY2FuIGJlIHJlbW92ZWQgd2l0aG91dCBicmVha2luZyB0aGUgY29yZVxuLy8gZnVuY3Rpb25hbGl0eS5cblxuLyoqXG4gKiBDaGVjayBpZiA8a2V5PiBpcyBpbiB0aGUgY2FjaGUgd2l0aG91dCByZWdpc3RlcmluZyByZWNlbnQgdXNlLiBGZWFzaWJsZSBpZlxuICogeW91IGRvIG5vdCB3YW50IHRvIGNoYWdlIHRoZSBzdGF0ZSBvZiB0aGUgY2FjaGUsIGJ1dCBvbmx5IFwicGVla1wiIGF0IGl0LlxuICogUmV0dXJucyB0aGUgZW50cnkgYXNzb2NpYXRlZCB3aXRoIDxrZXk+IGlmIGZvdW5kLCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICovXG5MUlVDYWNoZS5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChrZXk6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLl9rZXltYXBba2V5XTtcbn07XG5cbi8qKlxuICogVXBkYXRlIHRoZSB2YWx1ZSBvZiBlbnRyeSB3aXRoIDxrZXk+LiBSZXR1cm5zIHRoZSBvbGQgdmFsdWUsIG9yIHVuZGVmaW5lZCBpZlxuICogZW50cnkgd2FzIG5vdCBpbiB0aGUgY2FjaGUuXG4gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICB2YXIgb2xkdmFsdWU6IGFueTtcbiAgICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgICBvbGR2YWx1ZSA9IGVudHJ5LnZhbHVlO1xuICAgICAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9sZHZhbHVlID0gdGhpcy5wdXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIGlmIChvbGR2YWx1ZSkgb2xkdmFsdWUgPSBvbGR2YWx1ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9sZHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgZW50cnkgPGtleT4gZnJvbSBjYWNoZSBhbmQgcmV0dXJuIGl0cyB2YWx1ZS4gUmV0dXJucyB1bmRlZmluZWQgaWYgbm90XG4gKiBmb3VuZC5cbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXk6IHN0cmluZykge1xuICAgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICAgIGlmICghZW50cnkpIHJldHVybjtcbiAgICBkZWxldGUgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV07IC8vIG5lZWQgdG8gZG8gZGVsZXRlIHVuZm9ydHVuYXRlbHlcbiAgICBpZiAoZW50cnkubmV3ZXIgJiYgZW50cnkub2xkZXIpIHtcbiAgICAgICAgLy8gcmVsaW5rIHRoZSBvbGRlciBlbnRyeSB3aXRoIHRoZSBuZXdlciBlbnRyeVxuICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgIH0gZWxzZSBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBsaW5rIHRvIHVzXG4gICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBsaW5rIHRoZSBuZXdlciBlbnRyeSB0byBoZWFkXG4gICAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH0gZWxzZSBpZiAoZW50cnkub2xkZXIpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBsaW5rIHRvIHVzXG4gICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBsaW5rIHRoZSBuZXdlciBlbnRyeSB0byBoZWFkXG4gICAgICAgIHRoaXMudGFpbCA9IGVudHJ5Lm9sZGVyO1xuICAgIH0gZWxzZSB7Ly8gaWYoZW50cnkub2xkZXIgPT09IHVuZGVmaW5lZCAmJiBlbnRyeS5uZXdlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLnNpemUtLTtcbiAgICByZXR1cm4gZW50cnkudmFsdWU7XG59O1xuXG4vKiogUmVtb3ZlcyBhbGwgZW50cmllcyAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBzYWZlLCBhcyB3ZSBuZXZlciBleHBvc2Ugc3Ryb25nIHJlZnJlbmNlcyB0byB0aGUgb3V0c2lkZVxuICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNpemUgPSAwO1xuICAgIHRoaXMuX2tleW1hcCA9IHt9O1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyBhbGwga2V5cyBvZiBlbnRyaWVzIHN0b3JlZCBpbiB0aGUgY2FjaGUgb2JqZWN0LCBpblxuICogYXJiaXRyYXJ5IG9yZGVyLlxuICovXG5pZiAodHlwZW9mIE9iamVjdC5rZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9rZXltYXApOyB9O1xufSBlbHNlIHtcbiAgICBMUlVDYWNoZS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5fa2V5bWFwKSBrZXlzLnB1c2goayk7XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG59XG5cbi8qKlxuICogQ2FsbCBgZnVuYCBmb3IgZWFjaCBlbnRyeS4gU3RhcnRpbmcgd2l0aCB0aGUgbmV3ZXN0IGVudHJ5IGlmIGBkZXNjYCBpcyBhIHRydWVcbiAqIHZhbHVlLCBvdGhlcndpc2Ugc3RhcnRzIHdpdGggdGhlIG9sZGVzdCAoaGVhZCkgZW5ydHkgYW5kIG1vdmVzIHRvd2FyZHMgdGhlXG4gKiB0YWlsLlxuICpcbiAqIGBmdW5gIGlzIGNhbGxlZCB3aXRoIDMgYXJndW1lbnRzIGluIHRoZSBjb250ZXh0IGBjb250ZXh0YDpcbiAqICAgYGZ1bi5jYWxsKGNvbnRleHQsIE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSwgTFJVQ2FjaGUgc2VsZilgXG4gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZ1bjogRnVuY3Rpb24sIGNvbnRleHQ6IGFueSwgZGVzYzogYm9vbGVhbikge1xuICAgIHZhciBlbnRyeTogSUVudHJ5IHwgdW5kZWZpbmVkO1xuICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7IGRlc2MgPSB0cnVlOyBjb250ZXh0ID0gdW5kZWZpbmVkOyB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnKSBjb250ZXh0ID0gdGhpcztcbiAgICBpZiAoZGVzYykge1xuICAgICAgICBlbnRyeSA9IHRoaXMudGFpbDtcbiAgICAgICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgICAgICBmdW4uY2FsbChjb250ZXh0LCBlbnRyeS5rZXksIGVudHJ5LnZhbHVlLCB0aGlzKTtcbiAgICAgICAgICAgIGVudHJ5ID0gZW50cnkub2xkZXI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgICAgICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgICAgICBmdW4uY2FsbChjb250ZXh0LCBlbnRyeS5rZXksIGVudHJ5LnZhbHVlLCB0aGlzKTtcbiAgICAgICAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKiogUmV0dXJucyBhIEpTT04gKGFycmF5KSByZXByZXNlbnRhdGlvbiAqL1xuLy9MUlVDYWNoZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuLy8gICAgdmFyIHM6IElFbnRyeVtdID0gW10sIGVudHJ5ID0gdGhpcy5oZWFkO1xuLy8gICAgd2hpbGUgKGVudHJ5KSB7XG4vLyAgICAgICAgcy5wdXNoKHsga2V5OiBlbnRyeS5rZXkudG9KU09OKCksIHZhbHVlOiBlbnRyeS52YWx1ZS50b0pTT04oKSB9KTtcbi8vICAgICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuLy8gICAgfVxuLy8gICAgcmV0dXJuIHM7XG4vL307XG5cbi8qKiBSZXR1cm5zIGEgU3RyaW5nIHJlcHJlc2VudGF0aW9uICovXG5MUlVDYWNoZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHMgPSAnJywgZW50cnkgPSB0aGlzLmhlYWQ7XG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgIHMgKz0gU3RyaW5nKGVudHJ5LmtleSkgKyAnOicgKyBlbnRyeS52YWx1ZTtcbiAgICAgICAgZW50cnkgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgaWYgKGVudHJ5KVxuICAgICAgICAgICAgcyArPSAnIDwgJztcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59O1xuXG4vLyBFeHBvcnQgb3Vyc2VsdmVzXG4vL2lmICh0eXBlb2YgdGhpcyA9PT0gJ29iamVjdCcpIHRoaXMuTFJVQ2FjaGUgPSBMUlVDYWNoZTsiXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lru.ts\n");

/***/ }),

/***/ "./src/request.ts":
/*!************************!*\
  !*** ./src/request.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nfunction fetchRequest(url, options, callback) {\n    var fetchOptions = {\n        headers: {\n            Accept: 'application/json'\n        }\n    };\n    if (options && options.proxyAgent) {\n        fetchOptions.agent = options.proxyAgent;\n    }\n    // can't use number because of NodeJS globals included\n    var timeoutId;\n    var fetchPromise = fetch(url, fetchOptions);\n    var promise = options.timeoutInMs ? Promise.race([\n        fetchPromise,\n        new Promise(function (_, reject) {\n            timeoutId = setTimeout(function () { return reject(new Error(url + \" response timeout\")); }, options.timeoutInMs);\n        })\n    ]) : fetchPromise;\n    promise.then(function (resp) {\n        clearTimeout(timeoutId);\n        if (~~(resp.status / 100 !== 2)) {\n            /**\n             * @description\n             * drain the resp before throwing an error to prevent memory leaks\n             * @link https://github.com/bitinn/node-fetch/issues/83\n             */\n            return resp.text().then(function () {\n                var e = new Error(\"Unexpected status code [\" + resp.status + \"] on URL \" + url);\n                e.status = resp.status;\n                throw e;\n            });\n        }\n        return resp.json().then(function (result) {\n            var cacheControl = resp.headers.get('cache-control');\n            var parsedCacheControl = cacheControl ? /max-age=(\\d+)/.exec(cacheControl) : null;\n            var ttl = parsedCacheControl ? parseInt(parsedCacheControl[1], 10) : undefined;\n            callback(null, result, resp, ttl);\n        });\n    })[\"catch\"](function (err) {\n        clearTimeout(timeoutId);\n        callback(err);\n    });\n}\nvar DefaultRequestHandler = (function () {\n    function DefaultRequestHandler(options) {\n        this.options = options || {};\n    }\n    DefaultRequestHandler.prototype.request = function (url, callback) {\n        fetchRequest(url, this.options, callback);\n    };\n    return DefaultRequestHandler;\n}());\nexports.DefaultRequestHandler = DefaultRequestHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVxdWVzdC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1ByaXNtaWNKUy8uL3NyYy9yZXF1ZXN0LnRzPzI0MGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIE5vZGVSZXF1ZXN0SW5pdCBleHRlbmRzIFJlcXVlc3RJbml0IHtcbiAgYWdlbnQ/OiBhbnk7XG59XG5cbmZ1bmN0aW9uIGZldGNoUmVxdWVzdDxUPih1cmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEhhbmRsZXJPcHRpb24sIGNhbGxiYWNrOiBSZXF1ZXN0Q2FsbGJhY2s8VD4pOiB2b2lkIHtcblxuICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7XG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgfSBhcyBOb2RlUmVxdWVzdEluaXQ7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm94eUFnZW50KSB7XG4gICAgZmV0Y2hPcHRpb25zLmFnZW50ID0gb3B0aW9ucy5wcm94eUFnZW50O1xuICB9XG5cbiAgLy8gY2FuJ3QgdXNlIG51bWJlciBiZWNhdXNlIG9mIE5vZGVKUyBnbG9iYWxzIGluY2x1ZGVkXG4gIGxldCB0aW1lb3V0SWQ6IGFueTtcblxuICBjb25zdCBmZXRjaFByb21pc2UgPSBmZXRjaCh1cmwsIGZldGNoT3B0aW9ucylcblxuICBjb25zdCBwcm9taXNlID0gb3B0aW9ucy50aW1lb3V0SW5NcyA/IFByb21pc2UucmFjZShbXG4gICAgZmV0Y2hQcm9taXNlLFxuICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+IHJlamVjdChuZXcgRXJyb3IoYCR7dXJsfSByZXNwb25zZSB0aW1lb3V0YCkpLFxuICAgICAgICBvcHRpb25zLnRpbWVvdXRJbk1zXG4gICAgICApXG4gICAgfSkgYXMgUHJvbWlzZTxSZXNwb25zZT5cbiAgXSkgOiBmZXRjaFByb21pc2VcblxuICBwcm9taXNlLnRoZW4oKHJlc3A6IFJlc3BvbnNlKSA9PiB7XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblxuICAgIGlmICh+fihyZXNwLnN0YXR1cyAvIDEwMCAhPT0gMikpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBkcmFpbiB0aGUgcmVzcCBiZWZvcmUgdGhyb3dpbmcgYW4gZXJyb3IgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICAgICAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2JpdGlubi9ub2RlLWZldGNoL2lzc3Vlcy84M1xuICAgICAgICAgKi9cbiAgICAgIHJldHVybiByZXNwLnRleHQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3QgZTogYW55ID0gbmV3IEVycm9yKGBVbmV4cGVjdGVkIHN0YXR1cyBjb2RlIFske3Jlc3Auc3RhdHVzfV0gb24gVVJMICR7dXJsfWApO1xuICAgICAgICBlLnN0YXR1cyA9IHJlc3Auc3RhdHVzO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3AuanNvbigpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVDb250cm9sID0gcmVzcC5oZWFkZXJzLmdldCgnY2FjaGUtY29udHJvbCcpO1xuICAgICAgY29uc3QgcGFyc2VkQ2FjaGVDb250cm9sID0gY2FjaGVDb250cm9sID8gL21heC1hZ2U9KFxcZCspLy5leGVjKGNhY2hlQ29udHJvbCkgOiBudWxsO1xuICAgICAgY29uc3QgdHRsID0gcGFyc2VkQ2FjaGVDb250cm9sID8gcGFyc2VJbnQocGFyc2VkQ2FjaGVDb250cm9sWzFdLCAxMCkgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCwgcmVzcCwgdHRsKTtcbiAgICB9KTtcbiAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICBjYWxsYmFjayhlcnIpO1xuICB9KTtcbn1cblxuZXhwb3J0IHR5cGUgUmVxdWVzdENhbGxiYWNrPFQ+ID0gKGVycm9yOiBFcnJvciB8IG51bGwsIHJlc3VsdD86IFQgfCBudWxsLCByZXNwPzogUmVzcG9uc2UsIHR0bD86IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlck9wdGlvbiB7XG4gIHByb3h5QWdlbnQ/OiBhbnk7XG4gIHRpbWVvdXRJbk1zPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RIYW5kbGVyIHtcbiAgcmVxdWVzdDxUPih1cmw6IHN0cmluZywgY2I6IFJlcXVlc3RDYWxsYmFjazxUPik6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0UmVxdWVzdEhhbmRsZXIgaW1wbGVtZW50cyBSZXF1ZXN0SGFuZGxlciB7XG5cbiAgb3B0aW9uczogUmVxdWVzdEhhbmRsZXJPcHRpb247XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IFJlcXVlc3RIYW5kbGVyT3B0aW9uKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgfVxuXG4gIHJlcXVlc3Q8VD4odXJsOiBzdHJpbmcsIGNhbGxiYWNrOiBSZXF1ZXN0Q2FsbGJhY2s8VD4pOiB2b2lkIHtcblxuICAgIGZldGNoUmVxdWVzdCh1cmwsIHRoaXMub3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFaQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/request.ts\n");

/***/ }),

/***/ 0:
/*!*******************************************************************************!*\
  !*** multi promise-polyfill/src/polyfill cross-fetch/polyfill ./src/index.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! promise-polyfill/src/polyfill */"./node_modules/promise-polyfill/src/polyfill.js");
__webpack_require__(/*! cross-fetch/polyfill */"cross-fetch/polyfill");
module.exports = __webpack_require__(/*! /Users/veloce/dev/prismic-javascript/src/index.ts */"./src/index.ts");


/***/ }),

/***/ "cross-fetch/polyfill":
/*!**************************************************************************************************************************************************!*\
  !*** external {"root":"cross-fetch/polyfill","commonjs2":"cross-fetch/polyfill","commonjs":"cross-fetch/polyfill","amd":"cross-fetch/polyfill"} ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_cross_fetch_polyfill__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3Jvc3MtZmV0Y2gvcG9seWZpbGwuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QcmlzbWljSlMvZXh0ZXJuYWwge1wicm9vdFwiOlwiY3Jvc3MtZmV0Y2gvcG9seWZpbGxcIixcImNvbW1vbmpzMlwiOlwiY3Jvc3MtZmV0Y2gvcG9seWZpbGxcIixcImNvbW1vbmpzXCI6XCJjcm9zcy1mZXRjaC9wb2x5ZmlsbFwiLFwiYW1kXCI6XCJjcm9zcy1mZXRjaC9wb2x5ZmlsbFwifT8wOGEwIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9jcm9zc19mZXRjaF9wb2x5ZmlsbF9fOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///cross-fetch/polyfill\n");

/***/ })

/******/ });
});