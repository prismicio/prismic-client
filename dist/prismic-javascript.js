(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("fetch-everywhere"));
	else if(typeof define === 'function' && define.amd)
		define("PrismicJS", ["fetch-everywhere"], factory);
	else if(typeof exports === 'object')
		exports["PrismicJS"] = factory(require("fetch-everywhere"));
	else
		root["PrismicJS"] = factory(root["fetch-everywhere"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 4);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!***************************!*\
  !*** ./src/Predicates.ts ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar OPERATOR = {\n    at: 'at',\n    not: 'not',\n    missing: 'missing',\n    has: 'has',\n    any: 'any',\n    \"in\": 'in',\n    fulltext: 'fulltext',\n    similar: 'similar',\n    numberGt: 'number.gt',\n    numberLt: 'number.lt',\n    numberInRange: 'number.inRange',\n    dateBefore: 'date.before',\n    dateAfter: 'date.after',\n    dateBetween: 'date.between',\n    dateDayOfMonth: 'date.day-of-month',\n    dateDayOfMonthAfter: 'date.day-of-month-after',\n    dateDayOfMonthBefore: 'date.day-of-month-before',\n    dateDayOfWeek: 'date.day-of-week',\n    dateDayOfWeekAfter: 'date.day-of-week-after',\n    dateDayOfWeekBefore: 'date.day-of-week-before',\n    dateMonth: 'date.month',\n    dateMonthBefore: 'date.month-before',\n    dateMonthAfter: 'date.month-after',\n    dateYear: 'date.year',\n    dateHour: 'date.hour',\n    dateHourBefore: 'date.hour-before',\n    dateHourAfter: 'date.hour-after',\n    GeopointNear: 'geopoint.near'\n};\nfunction encode(value) {\n    if (typeof value === 'string') {\n        return \"\\\"\" + value + \"\\\"\";\n    }\n    else if (value instanceof Array) {\n        return \"[\" + value.map(function (v) { return encode(v); }).join(',') + \"]\";\n    }\n    else if (typeof value === 'number') {\n        return value;\n    }\n    else {\n        return null;\n    }\n}\nvar geopoint = {\n    near: function (fragment, latitude, longitude, radius) {\n        return \"[\" + OPERATOR.GeopointNear + \"(\" + fragment + \", \" + latitude + \", \" + longitude + \", \" + radius + \")]\";\n    }\n};\nvar date = {\n    before: function (fragment, before) {\n        return \"[\" + OPERATOR.dateBefore + \"(\" + fragment + \", \" + before.getTime() + \")]\";\n    },\n    after: function (fragment, after) {\n        return \"[\" + OPERATOR.dateAfter + \"(\" + fragment + \", \" + after.getTime() + \")]\";\n    },\n    between: function (fragment, before, after) {\n        return \"[\" + OPERATOR.dateBetween + \"(\" + fragment + \", \" + before.getTime() + \", \" + after.getTime() + \")]\";\n    },\n    dayOfMonth: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonth + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfMonthAfter: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonthAfter + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfMonthBefore: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfMonthBefore + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfWeek: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeek + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfWeekAfter: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeekAfter + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    dayOfWeekBefore: function (fragment, day) {\n        return \"[\" + OPERATOR.dateDayOfWeekBefore + \"(\" + fragment + \", \" + day + \")]\";\n    },\n    month: function (fragment, month) {\n        if (typeof month === 'number') {\n            return \"[\" + OPERATOR.dateMonth + \"(\" + fragment + \", \" + month + \")]\";\n        }\n        else {\n            return \"[\" + OPERATOR.dateMonth + \"(\" + fragment + \", \\\"\" + month + \"\\\")]\";\n        }\n    },\n    monthBefore: function (fragment, month) {\n        if (typeof month === 'number') {\n            return \"[\" + OPERATOR.dateMonthBefore + \"(\" + fragment + \", \" + month + \")]\";\n        }\n        else {\n            return \"[\" + OPERATOR.dateMonthBefore + \"(\" + fragment + \", \\\"\" + month + \"\\\")]\";\n        }\n    },\n    monthAfter: function (fragment, month) {\n        if (typeof month === 'number') {\n            return \"[\" + OPERATOR.dateMonthAfter + \"(\" + fragment + \", \" + month + \")]\";\n        }\n        else {\n            return \"[\" + OPERATOR.dateMonthAfter + \"(\" + fragment + \", \\\"\" + month + \"\\\")]\";\n        }\n    },\n    year: function (fragment, year) {\n        return \"[\" + OPERATOR.dateYear + \"(\" + fragment + \", \" + year + \")]\";\n    },\n    hour: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHour + \"(\" + fragment + \", \" + hour + \")]\";\n    },\n    hourBefore: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHourBefore + \"(\" + fragment + \", \" + hour + \")]\";\n    },\n    hourAfter: function (fragment, hour) {\n        return \"[\" + OPERATOR.dateHourAfter + \"(\" + fragment + \", \" + hour + \")]\";\n    }\n};\nvar number = {\n    gt: function (fragment, value) {\n        return \"[\" + OPERATOR.numberGt + \"(\" + fragment + \", \" + value + \")]\";\n    },\n    lt: function (fragment, value) {\n        return \"[\" + OPERATOR.numberLt + \"(\" + fragment + \", \" + value + \")]\";\n    },\n    inRange: function (fragment, before, after) {\n        return \"[\" + OPERATOR.numberInRange + \"(\" + fragment + \", \" + before + \", \" + after + \")]\";\n    }\n};\nexports[\"default\"] = {\n    at: function (fragment, value) {\n        return \"[\" + OPERATOR.at + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    not: function (fragment, value) {\n        return \"[\" + OPERATOR.not + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    missing: function (fragment) {\n        return \"[\" + OPERATOR.missing + \"(\" + fragment + \")]\";\n    },\n    has: function (fragment) {\n        return \"[\" + OPERATOR.has + \"(\" + fragment + \")]\";\n    },\n    any: function (fragment, values) {\n        return \"[\" + OPERATOR.any + \"(\" + fragment + \", \" + encode(values) + \")]\";\n    },\n    \"in\": function (fragment, values) {\n        return \"[\" + OPERATOR[\"in\"] + \"(\" + fragment + \", \" + encode(values) + \")]\";\n    },\n    fulltext: function (fragment, value) {\n        return \"[\" + OPERATOR.fulltext + \"(\" + fragment + \", \" + encode(value) + \")]\";\n    },\n    similar: function (documentId, maxResults) {\n        return \"[\" + OPERATOR.similar + \"(\\\"\" + documentId + \"\\\", \" + maxResults + \")]\";\n    },\n    date: date,\n    dateBefore: date.before,\n    dateAfter: date.after,\n    dateBetween: date.between,\n    dayOfMonth: date.dayOfMonth,\n    dayOfMonthAfter: date.dayOfMonthAfter,\n    dayOfMonthBefore: date.dayOfMonthBefore,\n    dayOfWeek: date.dayOfWeek,\n    dayOfWeekAfter: date.dayOfWeekAfter,\n    dayOfWeekBefore: date.dayOfWeekBefore,\n    month: date.month,\n    monthBefore: date.monthBefore,\n    monthAfter: date.monthAfter,\n    year: date.year,\n    hour: date.hour,\n    hourBefore: date.hourBefore,\n    hourAfter: date.hourAfter,\n    number: number,\n    gt: number.gt,\n    lt: number.lt,\n    inRange: number.inRange,\n    near: geopoint.near,\n    geopoint: geopoint\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9QcmVkaWNhdGVzLnRzP2YzMDkiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgT1BFUkFUT1IgPSB7XG4gIGF0OiAnYXQnLFxuICBub3Q6ICdub3QnLFxuICBtaXNzaW5nOiAnbWlzc2luZycsXG4gIGhhczogJ2hhcycsXG4gIGFueTogJ2FueScsXG4gIGluOiAnaW4nLFxuICBmdWxsdGV4dDogJ2Z1bGx0ZXh0JyxcbiAgc2ltaWxhcjogJ3NpbWlsYXInLFxuICBudW1iZXJHdDogJ251bWJlci5ndCcsXG4gIG51bWJlckx0OiAnbnVtYmVyLmx0JyxcbiAgbnVtYmVySW5SYW5nZTogJ251bWJlci5pblJhbmdlJyxcbiAgZGF0ZUJlZm9yZTogJ2RhdGUuYmVmb3JlJyxcbiAgZGF0ZUFmdGVyOiAnZGF0ZS5hZnRlcicsXG4gIGRhdGVCZXR3ZWVuOiAnZGF0ZS5iZXR3ZWVuJyxcbiAgZGF0ZURheU9mTW9udGg6ICdkYXRlLmRheS1vZi1tb250aCcsXG4gIGRhdGVEYXlPZk1vbnRoQWZ0ZXI6ICdkYXRlLmRheS1vZi1tb250aC1hZnRlcicsXG4gIGRhdGVEYXlPZk1vbnRoQmVmb3JlOiAnZGF0ZS5kYXktb2YtbW9udGgtYmVmb3JlJyxcbiAgZGF0ZURheU9mV2VlazogJ2RhdGUuZGF5LW9mLXdlZWsnLFxuICBkYXRlRGF5T2ZXZWVrQWZ0ZXI6ICdkYXRlLmRheS1vZi13ZWVrLWFmdGVyJyxcbiAgZGF0ZURheU9mV2Vla0JlZm9yZTogJ2RhdGUuZGF5LW9mLXdlZWstYmVmb3JlJyxcbiAgZGF0ZU1vbnRoOiAnZGF0ZS5tb250aCcsXG4gIGRhdGVNb250aEJlZm9yZTogJ2RhdGUubW9udGgtYmVmb3JlJyxcbiAgZGF0ZU1vbnRoQWZ0ZXI6ICdkYXRlLm1vbnRoLWFmdGVyJyxcbiAgZGF0ZVllYXI6ICdkYXRlLnllYXInLFxuICBkYXRlSG91cjogJ2RhdGUuaG91cicsXG4gIGRhdGVIb3VyQmVmb3JlOiAnZGF0ZS5ob3VyLWJlZm9yZScsXG4gIGRhdGVIb3VyQWZ0ZXI6ICdkYXRlLmhvdXItYWZ0ZXInLFxuICBHZW9wb2ludE5lYXI6ICdnZW9wb2ludC5uZWFyJyxcbn07XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiBgWyR7dmFsdWUubWFwKHYgPT4gZW5jb2RlKHYpKS5qb2luKCcsJyl9XWA7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5jb25zdCBnZW9wb2ludCA9IHtcbiAgbmVhcihmcmFnbWVudDogc3RyaW5nLCBsYXRpdHVkZTogbnVtYmVyLCBsb25naXR1ZGU6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuR2VvcG9pbnROZWFyfSgke2ZyYWdtZW50fSwgJHtsYXRpdHVkZX0sICR7bG9uZ2l0dWRlfSwgJHtyYWRpdXN9KV1gO1xuICB9LFxufTtcblxuY29uc3QgZGF0ZSA9IHtcblxuICBiZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgYmVmb3JlOiBEYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVCZWZvcmV9KCR7ZnJhZ21lbnR9LCAke2JlZm9yZS5nZXRUaW1lKCl9KV1gO1xuICB9LFxuXG4gIGFmdGVyKGZyYWdtZW50OiBzdHJpbmcsIGFmdGVyOiBEYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVBZnRlcn0oJHtmcmFnbWVudH0sICR7YWZ0ZXIuZ2V0VGltZSgpfSldYDtcbiAgfSxcblxuICBiZXR3ZWVuKGZyYWdtZW50OiBzdHJpbmcsIGJlZm9yZTogRGF0ZSwgYWZ0ZXI6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZUJldHdlZW59KCR7ZnJhZ21lbnR9LCAke2JlZm9yZS5nZXRUaW1lKCl9LCAke2FmdGVyLmdldFRpbWUoKX0pXWA7XG4gIH0sXG5cbiAgZGF5T2ZNb250aChmcmFnbWVudDogc3RyaW5nLCBkYXk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlRGF5T2ZNb250aH0oJHtmcmFnbWVudH0sICR7ZGF5fSldYDtcbiAgfSxcblxuICBkYXlPZk1vbnRoQWZ0ZXIoZnJhZ21lbnQ6IHN0cmluZywgZGF5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZURheU9mTW9udGhBZnRlcn0oJHtmcmFnbWVudH0sICR7ZGF5fSldYDtcbiAgfSxcblxuICBkYXlPZk1vbnRoQmVmb3JlKGZyYWdtZW50OiBzdHJpbmcsIGRheTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVEYXlPZk1vbnRoQmVmb3JlfSgke2ZyYWdtZW50fSwgJHtkYXl9KV1gO1xuICB9LFxuXG4gIGRheU9mV2VlayhmcmFnbWVudDogc3RyaW5nLCBkYXk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlRGF5T2ZXZWVrfSgke2ZyYWdtZW50fSwgJHtkYXl9KV1gO1xuICB9LFxuXG4gIGRheU9mV2Vla0FmdGVyKGZyYWdtZW50OiBzdHJpbmcsIGRheTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVEYXlPZldlZWtBZnRlcn0oJHtmcmFnbWVudH0sICR7ZGF5fSldYDtcbiAgfSxcblxuICBkYXlPZldlZWtCZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgZGF5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZURheU9mV2Vla0JlZm9yZX0oJHtmcmFnbWVudH0sICR7ZGF5fSldYDtcbiAgfSxcblxuICBtb250aChmcmFnbWVudDogc3RyaW5nLCBtb250aDogbnVtYmVyIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIG1vbnRoID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlTW9udGh9KCR7ZnJhZ21lbnR9LCAke21vbnRofSldYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlTW9udGh9KCR7ZnJhZ21lbnR9LCBcIiR7bW9udGh9XCIpXWA7XG4gICAgfVxuICB9LFxuXG4gIG1vbnRoQmVmb3JlKGZyYWdtZW50OiBzdHJpbmcsIG1vbnRoOiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh0eXBlb2YgbW9udGggPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVNb250aEJlZm9yZX0oJHtmcmFnbWVudH0sICR7bW9udGh9KV1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVNb250aEJlZm9yZX0oJHtmcmFnbWVudH0sIFwiJHttb250aH1cIildYDtcbiAgICB9XG4gIH0sXG5cbiAgbW9udGhBZnRlcihmcmFnbWVudDogc3RyaW5nLCBtb250aDogbnVtYmVyIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIG1vbnRoID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlTW9udGhBZnRlcn0oJHtmcmFnbWVudH0sICR7bW9udGh9KV1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVNb250aEFmdGVyfSgke2ZyYWdtZW50fSwgXCIke21vbnRofVwiKV1gO1xuICAgIH1cbiAgfSxcblxuICB5ZWFyKGZyYWdtZW50OiBzdHJpbmcsIHllYXI6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5kYXRlWWVhcn0oJHtmcmFnbWVudH0sICR7eWVhcn0pXWA7XG4gIH0sXG5cbiAgaG91cihmcmFnbWVudDogc3RyaW5nLCBob3VyOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuZGF0ZUhvdXJ9KCR7ZnJhZ21lbnR9LCAke2hvdXJ9KV1gO1xuICB9LFxuXG4gIGhvdXJCZWZvcmUoZnJhZ21lbnQ6IHN0cmluZywgaG91cjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVIb3VyQmVmb3JlfSgke2ZyYWdtZW50fSwgJHtob3VyfSldYDtcbiAgfSxcblxuICBob3VyQWZ0ZXIoZnJhZ21lbnQ6IHN0cmluZywgaG91cjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmRhdGVIb3VyQWZ0ZXJ9KCR7ZnJhZ21lbnR9LCAke2hvdXJ9KV1gO1xuICB9LFxufTtcblxuY29uc3QgbnVtYmVyID0ge1xuICBndChmcmFnbWVudDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLm51bWJlckd0fSgke2ZyYWdtZW50fSwgJHt2YWx1ZX0pXWA7XG4gIH0sXG5cbiAgbHQoZnJhZ21lbnQ6IHN0cmluZywgdmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5udW1iZXJMdH0oJHtmcmFnbWVudH0sICR7dmFsdWV9KV1gO1xuICB9LFxuXG4gIGluUmFuZ2UoZnJhZ21lbnQ6IHN0cmluZywgYmVmb3JlOiBudW1iZXIsIGFmdGVyOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IubnVtYmVySW5SYW5nZX0oJHtmcmFnbWVudH0sICR7YmVmb3JlfSwgJHthZnRlcn0pXWA7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGF0KGZyYWdtZW50OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5hdH0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKHZhbHVlKX0pXWA7XG4gIH0sXG4gIFxuICBub3QoZnJhZ21lbnQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5ub3R9KCR7ZnJhZ21lbnR9LCAke2VuY29kZSh2YWx1ZSl9KV1gO1xuICB9LFxuXG4gIG1pc3NpbmcoZnJhZ21lbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5taXNzaW5nfSgke2ZyYWdtZW50fSldYDtcbiAgfSxcblxuICBoYXMoZnJhZ21lbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBbJHtPUEVSQVRPUi5oYXN9KCR7ZnJhZ21lbnR9KV1gO1xuICB9LFxuXG4gIGFueShmcmFnbWVudDogc3RyaW5nLCB2YWx1ZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmFueX0oJHtmcmFnbWVudH0sICR7ZW5jb2RlKHZhbHVlcyl9KV1gO1xuICB9LFxuXG4gIGluKGZyYWdtZW50OiBzdHJpbmcsIHZhbHVlczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7T1BFUkFUT1IuaW59KCR7ZnJhZ21lbnR9LCAke2VuY29kZSh2YWx1ZXMpfSldYDtcbiAgfSxcblxuICBmdWxsdGV4dChmcmFnbWVudDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLmZ1bGx0ZXh0fSgke2ZyYWdtZW50fSwgJHtlbmNvZGUodmFsdWUpfSldYDtcbiAgfSxcblxuICBzaW1pbGFyKGRvY3VtZW50SWQ6IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske09QRVJBVE9SLnNpbWlsYXJ9KFwiJHtkb2N1bWVudElkfVwiLCAke21heFJlc3VsdHN9KV1gO1xuICB9LFxuXG4gIGRhdGUsXG5cbiAgZGF0ZUJlZm9yZTogZGF0ZS5iZWZvcmUsXG5cbiAgZGF0ZUFmdGVyOiBkYXRlLmFmdGVyLFxuXG4gIGRhdGVCZXR3ZWVuOiBkYXRlLmJldHdlZW4sXG5cbiAgZGF5T2ZNb250aDogZGF0ZS5kYXlPZk1vbnRoLFxuXG4gIGRheU9mTW9udGhBZnRlcjogZGF0ZS5kYXlPZk1vbnRoQWZ0ZXIsXG5cbiAgZGF5T2ZNb250aEJlZm9yZTogZGF0ZS5kYXlPZk1vbnRoQmVmb3JlLFxuXG4gIGRheU9mV2VlazogZGF0ZS5kYXlPZldlZWssXG5cbiAgZGF5T2ZXZWVrQWZ0ZXI6IGRhdGUuZGF5T2ZXZWVrQWZ0ZXIsXG5cbiAgZGF5T2ZXZWVrQmVmb3JlOiBkYXRlLmRheU9mV2Vla0JlZm9yZSxcblxuICBtb250aDogZGF0ZS5tb250aCxcblxuICBtb250aEJlZm9yZTogZGF0ZS5tb250aEJlZm9yZSxcblxuICBtb250aEFmdGVyOiBkYXRlLm1vbnRoQWZ0ZXIsXG5cbiAgeWVhcjogZGF0ZS55ZWFyLFxuXG4gIGhvdXI6IGRhdGUuaG91cixcblxuICBob3VyQmVmb3JlOiBkYXRlLmhvdXJCZWZvcmUsXG5cbiAgaG91ckFmdGVyOiBkYXRlLmhvdXJBZnRlcixcblxuICBudW1iZXIsXG5cbiAgZ3Q6IG51bWJlci5ndCxcblxuICBsdDogbnVtYmVyLmx0LFxuXG4gIGluUmFuZ2U6IG51bWJlci5pblJhbmdlLFxuXG4gIG5lYXI6IGdlb3BvaW50Lm5lYXIsXG5cbiAgZ2VvcG9pbnQsXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1ByZWRpY2F0ZXMudHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!****************************!*\
  !*** ./src/experiments.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar Variation = (function () {\n    function Variation(data) {\n        this.data = {};\n        this.data = data;\n    }\n    Variation.prototype.id = function () {\n        return this.data.id;\n    };\n    Variation.prototype.ref = function () {\n        return this.data.ref;\n    };\n    Variation.prototype.label = function () {\n        return this.data.label;\n    };\n    return Variation;\n}());\nexports.Variation = Variation;\nvar Experiment = (function () {\n    function Experiment(data) {\n        this.data = {};\n        this.data = data;\n        this.variations = (data.variations || []).map(function (v) {\n            return new Variation(v);\n        });\n    }\n    Experiment.prototype.id = function () {\n        return this.data.id;\n    };\n    Experiment.prototype.googleId = function () {\n        return this.data.googleId;\n    };\n    Experiment.prototype.name = function () {\n        return this.data.name;\n    };\n    return Experiment;\n}());\nexports.Experiment = Experiment;\nvar Experiments = (function () {\n    function Experiments(data) {\n        if (data) {\n            this.drafts = (data.drafts || []).map(function (exp) {\n                return new Experiment(exp);\n            });\n            this.running = (data.running || []).map(function (exp) {\n                return new Experiment(exp);\n            });\n        }\n    }\n    Experiments.prototype.current = function () {\n        if (this.running.length > 0) {\n            return this.running[0];\n        }\n    };\n    Experiments.prototype.refFromCookie = function (cookie) {\n        if (!cookie || cookie.trim() === '')\n            return null;\n        var splitted = cookie.trim().split(' ');\n        if (splitted.length < 2)\n            return null;\n        var expId = splitted[0];\n        var varIndex = parseInt(splitted[1], 10);\n        var exp = this.running.filter(function (exp) {\n            return exp.googleId() === expId && exp.variations.length > varIndex;\n        })[0];\n        return exp ? exp.variations[varIndex].ref() : null;\n    };\n    return Experiments;\n}());\nexports.Experiments = Experiments;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9leHBlcmltZW50cy50cz85MjA2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWYXJpYXRpb24ge1xuICBkYXRhOiBhbnkgPSB7fTtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmlkO1xuICB9XG5cbiAgcmVmKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5yZWY7XG4gIH1cblxuICBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEubGFiZWw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV4cGVyaW1lbnQge1xuICB2YXJpYXRpb25zOiBWYXJpYXRpb25bXTtcbiAgZGF0YTogYW55ID0ge307XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnZhcmlhdGlvbnMgPSAoZGF0YS52YXJpYXRpb25zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBWYXJpYXRpb24odik7XG4gICAgfSk7XG4gIH1cblxuICBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEuaWQ7XG4gIH1cblxuICBnb29nbGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZ29vZ2xlSWQ7XG4gIH1cblxuICBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5uYW1lO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFeHBlcmltZW50cyB7XG4gIGRyYWZ0czogRXhwZXJpbWVudFtdO1xuICBydW5uaW5nOiBFeHBlcmltZW50W107XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHRoaXMuZHJhZnRzID0gKGRhdGEuZHJhZnRzIHx8IFtdKS5tYXAoKGV4cDogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRXhwZXJpbWVudChleHApO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnJ1bm5pbmcgPSAoZGF0YS5ydW5uaW5nIHx8IFtdKS5tYXAoKGV4cDogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRXhwZXJpbWVudChleHApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY3VycmVudCgpOiBFeHBlcmltZW50IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5ydW5uaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmdbMF07XG4gICAgfVxuICB9XG4gIHJlZkZyb21Db29raWUoY29va2llOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWNvb2tpZSB8fCBjb29raWUudHJpbSgpID09PSAnJykgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgc3BsaXR0ZWQgPSBjb29raWUudHJpbSgpLnNwbGl0KCcgJyk7XG4gICAgaWYgKHNwbGl0dGVkLmxlbmd0aCA8IDIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGV4cElkID0gc3BsaXR0ZWRbMF07XG4gICAgY29uc3QgdmFySW5kZXggPSBwYXJzZUludChzcGxpdHRlZFsxXSwgMTApO1xuICAgIGNvbnN0IGV4cCA9IHRoaXMucnVubmluZy5maWx0ZXIoKGV4cCkgPT4ge1xuICAgICAgcmV0dXJuIGV4cC5nb29nbGVJZCgpID09PSBleHBJZCAmJiBleHAudmFyaWF0aW9ucy5sZW5ndGggPiB2YXJJbmRleDtcbiAgICB9KVswXTtcbiAgICByZXR1cm4gZXhwID8gZXhwLnZhcmlhdGlvbnNbdmFySW5kZXhdLnJlZigpIDogbnVsbDtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2V4cGVyaW1lbnRzLnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBR0E7QUFGQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBbEJBO0FBb0JBO0FBSUE7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBdEJBO0FBd0JBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBL0JBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!********************!*\
  !*** ./src/Api.ts ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar ResolvedApi_1 = __webpack_require__(/*! ./ResolvedApi */ 3);\nvar HttpClient_1 = __webpack_require__(/*! ./HttpClient */ 10);\nvar Api = (function () {\n    function Api(url, options) {\n        this.options = options || {};\n        this.url = url;\n        if (this.options.accessToken) {\n            var accessTokenParam = \"access_token=\" + this.options.accessToken;\n            this.url += (url.indexOf('?') > -1 ? '&' : '?') + accessTokenParam;\n        }\n        this.apiDataTTL = this.options.apiDataTTL || 5;\n        this.httpClient = new HttpClient_1[\"default\"](this.options.requestHandler, this.options.apiCache, this.options.proxyAgent);\n    }\n    /**\n     * Fetches data used to construct the api client, from cache if it's\n     * present, otherwise from calling the prismic api endpoint (which is\n     * then cached).\n     */\n    Api.prototype.get = function (cb) {\n        var _this = this;\n        return this.httpClient.cachedRequest(this.url, { ttl: this.apiDataTTL }).then(function (data) {\n            var resolvedApi = new ResolvedApi_1[\"default\"](data, _this.httpClient, _this.options);\n            cb && cb(null, resolvedApi);\n            return resolvedApi;\n        })[\"catch\"](function (error) {\n            cb && cb(error);\n            throw error;\n        });\n    };\n    return Api;\n}());\nexports[\"default\"] = Api;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9BcGkudHM/NTFlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJlZGljYXRlcyBmcm9tICcuL1ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIsIFJlcXVlc3RDYWxsYmFjayB9IGZyb20gJy4vcmVxdWVzdCc7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gJy4vZG9jdW1lbnRzJztcbmltcG9ydCB7IEFwaUNhY2hlIH0gZnJvbSAnLi9jYWNoZSc7XG5pbXBvcnQgUmVzb2x2ZWRBcGksIHsgQXBpRGF0YSB9IGZyb20gJy4vUmVzb2x2ZWRBcGknO1xuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnLi9IdHRwQ2xpZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBBcGlPcHRpb25zIHtcbiAgYWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIHJlcXVlc3RIYW5kbGVyPzogUmVxdWVzdEhhbmRsZXI7XG4gIHJlcT86IGFueTtcbiAgYXBpQ2FjaGU/OiBBcGlDYWNoZTtcbiAgYXBpRGF0YVRUTD86IG51bWJlcjtcbiAgcHJveHlBZ2VudD86IGFueTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgdXJsOiBzdHJpbmc7XG4gIG9wdGlvbnM6IEFwaU9wdGlvbnM7XG4gIGFwaURhdGFUVEw6IG51bWJlcjtcbiAgaHR0cENsaWVudDogSHR0cENsaWVudDtcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgb3B0aW9ucz86IEFwaU9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4pIHtcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuUGFyYW0gPSBgYWNjZXNzX3Rva2VuPSR7dGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VufWA7XG4gICAgICB0aGlzLnVybCArPSAodXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArIGFjY2Vzc1Rva2VuUGFyYW07XG4gICAgfVxuICAgIHRoaXMuYXBpRGF0YVRUTCA9IHRoaXMub3B0aW9ucy5hcGlEYXRhVFRMIHx8IDU7XG4gICAgdGhpcy5odHRwQ2xpZW50ID0gbmV3IEh0dHBDbGllbnQoXG4gICAgICB0aGlzLm9wdGlvbnMucmVxdWVzdEhhbmRsZXIsXG4gICAgICB0aGlzLm9wdGlvbnMuYXBpQ2FjaGUsXG4gICAgICB0aGlzLm9wdGlvbnMucHJveHlBZ2VudCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgZGF0YSB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgYXBpIGNsaWVudCwgZnJvbSBjYWNoZSBpZiBpdCdzXG4gICAqIHByZXNlbnQsIG90aGVyd2lzZSBmcm9tIGNhbGxpbmcgdGhlIHByaXNtaWMgYXBpIGVuZHBvaW50ICh3aGljaCBpc1xuICAgKiB0aGVuIGNhY2hlZCkuXG4gICAqL1xuICBnZXQoY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8UmVzb2x2ZWRBcGk+KTogUHJvbWlzZTxSZXNvbHZlZEFwaT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuY2FjaGVkUmVxdWVzdDxBcGlEYXRhPih0aGlzLnVybCwgeyB0dGw6IHRoaXMuYXBpRGF0YVRUTCB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCByZXNvbHZlZEFwaSA9IG5ldyBSZXNvbHZlZEFwaShkYXRhLCB0aGlzLmh0dHBDbGllbnQsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjYiAmJiBjYihudWxsLCByZXNvbHZlZEFwaSk7XG4gICAgICByZXR1cm4gcmVzb2x2ZWRBcGk7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjYiAmJiBjYihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0FwaS50cyJdLCJtYXBwaW5ncyI6Ijs7QUFJQTtBQUNBO0FBV0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!****************************!*\
  !*** ./src/ResolvedApi.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar experiments_1 = __webpack_require__(/*! ./experiments */ 1);\nvar form_1 = __webpack_require__(/*! ./form */ 8);\nvar Predicates_1 = __webpack_require__(/*! ./Predicates */ 0);\nvar Cookies_1 = __webpack_require__(/*! ./Cookies */ 9);\nexports.PREVIEW_COOKIE = 'io.prismic.preview';\nexports.EXPERIMENT_COOKIE = 'io.prismic.experiment';\nvar ResolvedApi = (function () {\n    function ResolvedApi(data, httpClient, options) {\n        this.data = data;\n        this.masterRef = data.refs.filter(function (ref) { return ref.isMasterRef; })[0];\n        this.experiments = new experiments_1.Experiments(data.experiments);\n        this.bookmarks = data.bookmarks;\n        this.httpClient = httpClient;\n        this.options = options;\n        this.refs = data.refs;\n        this.tags = data.tags;\n        this.types = data.types;\n    }\n    /**\n     * Returns a useable form from its id, as described in the RESTful description of the API.\n     * For instance: api.form(\"everything\") works on every repository (as \"everything\" exists by default)\n     * You can then chain the calls: api.form(\"everything\").query('[[:d = at(document.id, \"UkL0gMuvzYUANCpf\")]]').ref(ref).submit()\n     */\n    ResolvedApi.prototype.form = function (formId) {\n        var form = this.data.forms[formId];\n        if (form) {\n            return new form_1.SearchForm(form, this.httpClient);\n        }\n        return null;\n    };\n    ResolvedApi.prototype.everything = function () {\n        var f = this.form('everything');\n        if (!f)\n            throw new Error('Missing everything form');\n        return f;\n    };\n    /**\n     * The ID of the master ref on this prismic.io API.\n     * Do not use like this: searchForm.ref(api.master()).\n     * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n     */\n    ResolvedApi.prototype.master = function () {\n        return this.masterRef.ref;\n    };\n    /**\n     * Returns the ref ID for a given ref's label.\n     * Do not use like this: searchForm.ref(api.ref(\"Future release label\")).\n     * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n     */\n    ResolvedApi.prototype.ref = function (label) {\n        var ref = this.data.refs.filter(function (ref) { return ref.label === label; })[0];\n        return ref ? ref.ref : null;\n    };\n    ResolvedApi.prototype.currentExperiment = function () {\n        return this.experiments.current();\n    };\n    /**\n     * Query the repository\n     */\n    ResolvedApi.prototype.query = function (q, optionsOrCallback, cb) {\n        if (cb === void 0) { cb = function () { }; }\n        var _a = typeof optionsOrCallback === 'function'\n            ? { options: {}, callback: optionsOrCallback }\n            : { options: optionsOrCallback || {}, callback: cb }, options = _a.options, callback = _a.callback;\n        var form = this.everything();\n        for (var key in options) {\n            form = form.set(key, options[key]);\n        }\n        if (!options.ref) {\n            // Look in cookies if we have a ref (preview or experiment)\n            var cookieString = '';\n            if (this.options.req) {\n                cookieString = this.options.req.headers['cookie'] || '';\n            }\n            else if (typeof window !== 'undefined' && window.document) {\n                cookieString = window.document.cookie || '';\n            }\n            var cookies = Cookies_1[\"default\"].parse(cookieString);\n            var previewRef = cookies[exports.PREVIEW_COOKIE];\n            var experimentRef = this.experiments.refFromCookie(cookies[exports.EXPERIMENT_COOKIE]);\n            form = form.ref(previewRef || experimentRef || this.masterRef.ref);\n        }\n        if (q) {\n            form.query(q);\n        }\n        return form.submit(callback);\n    };\n    /**\n     * Retrieve the document returned by the given query\n     * @param {string|array|Predicate} the query\n     * @param {object} additional parameters. In NodeJS, pass the request as 'req'.\n     * @param {function} callback(err, doc)\n     */\n    ResolvedApi.prototype.queryFirst = function (q, optionsOrCallback, cb) {\n        var _a = typeof optionsOrCallback === 'function'\n            ? { options: {}, callback: optionsOrCallback }\n            : { options: optionsOrCallback || {}, callback: cb || (function () { }) }, options = _a.options, callback = _a.callback;\n        options.page = 1;\n        options.pageSize = 1;\n        return this.query(q, options).then(function (response) {\n            var document = response && response.results && response.results[0];\n            callback(null, document);\n            return document;\n        })[\"catch\"](function (error) {\n            callback(error);\n            throw error;\n        });\n    };\n    /**\n     * Retrieve the document with the given id\n     */\n    ResolvedApi.prototype.getByID = function (id, maybeOptions, cb) {\n        var options = maybeOptions || {};\n        if (!options.lang)\n            options.lang = '*';\n        return this.queryFirst(Predicates_1[\"default\"].at('document.id', id), options, cb);\n    };\n    /**\n     * Retrieve multiple documents from an array of id\n     */\n    ResolvedApi.prototype.getByIDs = function (ids, maybeOptions, cb) {\n        var options = maybeOptions || {};\n        if (!options.lang)\n            options.lang = '*';\n        return this.query(Predicates_1[\"default\"][\"in\"]('document.id', ids), options, cb);\n    };\n    /**\n     * Retrieve the document with the given uid\n     */\n    ResolvedApi.prototype.getByUID = function (type, uid, maybeOptions, cb) {\n        var options = maybeOptions || {};\n        if (!options.lang)\n            options.lang = '*';\n        return this.queryFirst(Predicates_1[\"default\"].at(\"my.\" + type + \".uid\", uid), options, cb);\n    };\n    /**\n     * Retrieve the singleton document with the given type\n     */\n    ResolvedApi.prototype.getSingle = function (type, maybeOptions, cb) {\n        var options = maybeOptions || {};\n        return this.queryFirst(Predicates_1[\"default\"].at('document.type', type), options, cb);\n    };\n    /**\n     * Retrieve the document with the given bookmark\n     */\n    ResolvedApi.prototype.getBookmark = function (bookmark, maybeOptions, cb) {\n        var id = this.data.bookmarks[bookmark];\n        if (id) {\n            return this.getByID(id, maybeOptions, cb);\n        }\n        else {\n            return Promise.reject('Error retrieving bookmarked id');\n        }\n    };\n    ResolvedApi.prototype.previewSession = function (token, linkResolver, defaultUrl, cb) {\n        var _this = this;\n        return this.httpClient.request(token).then(function (result) {\n            if (!result.mainDocument) {\n                cb && cb(null, defaultUrl);\n                return Promise.resolve(defaultUrl);\n            }\n            else {\n                return _this.getByID(result.mainDocument).then(function (document) {\n                    if (!document) {\n                        cb && cb(null, defaultUrl);\n                        return defaultUrl;\n                    }\n                    else {\n                        var url = linkResolver(document);\n                        cb && cb(null, url);\n                        return url;\n                    }\n                });\n            }\n        })[\"catch\"](function (error) {\n            cb && cb(error);\n            throw error;\n        });\n    };\n    return ResolvedApi;\n}());\nexports[\"default\"] = ResolvedApi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9SZXNvbHZlZEFwaS50cz9kODlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3RIYW5kbGVyLCBSZXF1ZXN0Q2FsbGJhY2sgfSBmcm9tICcuL3JlcXVlc3QnO1xuaW1wb3J0IHsgQXBpQ2FjaGUgfSBmcm9tICcuL2NhY2hlJztcbmltcG9ydCB7IEV4cGVyaW1lbnQsIEV4cGVyaW1lbnRzIH0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQgeyBTZWFyY2hGb3JtLCBGb3JtIH0gZnJvbSAnLi9mb3JtJztcbmltcG9ydCBQcmVkaWNhdGVzIGZyb20gJy4vUHJlZGljYXRlcyc7XG5pbXBvcnQgQ29va2llcyBmcm9tICcuL0Nvb2tpZXMnO1xuaW1wb3J0IEFwaVNlYXJjaFJlc3BvbnNlIGZyb20gJy4vQXBpU2VhcmNoUmVzcG9uc2UnO1xuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnLi9IdHRwQ2xpZW50JztcbmltcG9ydCB7IENsaWVudCB9IGZyb20gJy4vY2xpZW50JztcblxuZXhwb3J0IGNvbnN0IFBSRVZJRVdfQ09PS0lFID0gJ2lvLnByaXNtaWMucHJldmlldyc7XG5leHBvcnQgY29uc3QgRVhQRVJJTUVOVF9DT09LSUUgPSAnaW8ucHJpc21pYy5leHBlcmltZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBSZWYge1xuICByZWY6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgaXNNYXN0ZXJSZWY6IHN0cmluZztcbiAgc2NoZWR1bGVkQXQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcGlEYXRhIHtcbiAgcmVmczogUmVmW107XG4gIGJvb2ttYXJrczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgdHlwZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBmb3JtczogeyBba2V5OiBzdHJpbmddOiBGb3JtIH07XG4gIGV4cGVyaW1lbnRzOiBhbnk7XG4gIG9hdXRoX2luaXRpYXRlOiBzdHJpbmc7XG4gIG9hdXRoX3Rva2VuOiBzdHJpbmc7XG4gIHZlcnNpb246IHN0cmluZztcbiAgbGljZW5jZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZXZpZXdSZXNwb25zZSB7XG4gIG1haW5Eb2N1bWVudD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeU9wdGlvbnMge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x2ZWRBcGlPcHRpb25zIHtcbiAgcmVxPzogYW55O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNvbHZlZEFwaSBpbXBsZW1lbnRzIENsaWVudCB7XG4gIGRhdGE6IEFwaURhdGE7XG4gIG1hc3RlclJlZjogUmVmO1xuICBleHBlcmltZW50czogRXhwZXJpbWVudHM7XG4gIG9wdGlvbnM6IFJlc29sdmVkQXBpT3B0aW9ucztcbiAgaHR0cENsaWVudDogSHR0cENsaWVudDtcbiAgYm9va21hcmtzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICByZWZzOiBSZWZbXTtcbiAgdGFnczogc3RyaW5nW107XG4gIHR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IEFwaURhdGEsIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIG9wdGlvbnM6IFJlc29sdmVkQXBpT3B0aW9ucykge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5tYXN0ZXJSZWYgPSBkYXRhLnJlZnMuZmlsdGVyKHJlZiA9PiByZWYuaXNNYXN0ZXJSZWYpWzBdO1xuICAgIHRoaXMuZXhwZXJpbWVudHMgPSBuZXcgRXhwZXJpbWVudHMoZGF0YS5leHBlcmltZW50cyk7XG4gICAgdGhpcy5ib29rbWFya3MgPSBkYXRhLmJvb2ttYXJrcztcbiAgICB0aGlzLmh0dHBDbGllbnQgPSBodHRwQ2xpZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5yZWZzID0gZGF0YS5yZWZzO1xuICAgIHRoaXMudGFncyA9IGRhdGEudGFncztcbiAgICB0aGlzLnR5cGVzID0gZGF0YS50eXBlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdXNlYWJsZSBmb3JtIGZyb20gaXRzIGlkLCBhcyBkZXNjcmliZWQgaW4gdGhlIFJFU1RmdWwgZGVzY3JpcHRpb24gb2YgdGhlIEFQSS5cbiAgICogRm9yIGluc3RhbmNlOiBhcGkuZm9ybShcImV2ZXJ5dGhpbmdcIikgd29ya3Mgb24gZXZlcnkgcmVwb3NpdG9yeSAoYXMgXCJldmVyeXRoaW5nXCIgZXhpc3RzIGJ5IGRlZmF1bHQpXG4gICAqIFlvdSBjYW4gdGhlbiBjaGFpbiB0aGUgY2FsbHM6IGFwaS5mb3JtKFwiZXZlcnl0aGluZ1wiKS5xdWVyeSgnW1s6ZCA9IGF0KGRvY3VtZW50LmlkLCBcIlVrTDBnTXV2ellVQU5DcGZcIildXScpLnJlZihyZWYpLnN1Ym1pdCgpXG4gICAqL1xuICBmb3JtKGZvcm1JZDogc3RyaW5nKTogU2VhcmNoRm9ybSB8IG51bGwge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLmRhdGEuZm9ybXNbZm9ybUlkXTtcbiAgICBpZiAoZm9ybSkge1xuICAgICAgcmV0dXJuIG5ldyBTZWFyY2hGb3JtKGZvcm0sIHRoaXMuaHR0cENsaWVudCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZXZlcnl0aGluZygpOiBTZWFyY2hGb3JtIHtcbiAgICBjb25zdCBmID0gdGhpcy5mb3JtKCdldmVyeXRoaW5nJyk7XG4gICAgaWYgKCFmKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZXZlcnl0aGluZyBmb3JtJyk7XG4gICAgcmV0dXJuIGY7XG4gIH1cblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBtYXN0ZXIgcmVmIG9uIHRoaXMgcHJpc21pYy5pbyBBUEkuXG4gICAqIERvIG5vdCB1c2UgbGlrZSB0aGlzOiBzZWFyY2hGb3JtLnJlZihhcGkubWFzdGVyKCkpLlxuICAgKiBJbnN0ZWFkLCBzZXQgeW91ciByZWYgb25jZSBpbiBhIHZhcmlhYmxlLCBhbmQgY2FsbCBpdCB3aGVuIHlvdSBuZWVkIGl0OyB0aGlzIHdpbGwgYWxsb3cgdG8gY2hhbmdlIHRoZSByZWYgeW91J3JlIHZpZXdpbmcgZWFzaWx5IGZvciB5b3VyIGVudGlyZSBwYWdlLlxuICAgKi9cbiAgbWFzdGVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubWFzdGVyUmVmLnJlZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZWYgSUQgZm9yIGEgZ2l2ZW4gcmVmJ3MgbGFiZWwuXG4gICAqIERvIG5vdCB1c2UgbGlrZSB0aGlzOiBzZWFyY2hGb3JtLnJlZihhcGkucmVmKFwiRnV0dXJlIHJlbGVhc2UgbGFiZWxcIikpLlxuICAgKiBJbnN0ZWFkLCBzZXQgeW91ciByZWYgb25jZSBpbiBhIHZhcmlhYmxlLCBhbmQgY2FsbCBpdCB3aGVuIHlvdSBuZWVkIGl0OyB0aGlzIHdpbGwgYWxsb3cgdG8gY2hhbmdlIHRoZSByZWYgeW91J3JlIHZpZXdpbmcgZWFzaWx5IGZvciB5b3VyIGVudGlyZSBwYWdlLlxuICAgKi9cbiAgcmVmKGxhYmVsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCByZWYgPSB0aGlzLmRhdGEucmVmcy5maWx0ZXIocmVmID0+IHJlZi5sYWJlbCA9PT0gbGFiZWwpWzBdO1xuICAgIHJldHVybiByZWYgPyByZWYucmVmIDogbnVsbDtcbiAgfVxuXG4gIGN1cnJlbnRFeHBlcmltZW50KCk6IEV4cGVyaW1lbnQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmV4cGVyaW1lbnRzLmN1cnJlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSB0aGUgcmVwb3NpdG9yeVxuICAgKi9cbiAgcXVlcnkocTogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnNPckNhbGxiYWNrOiBRdWVyeU9wdGlvbnMgfCBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+LCBjYjogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPiA9ICgpID0+IHt9KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgb3B0aW9ucywgY2FsbGJhY2sgfSA9IHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHsgb3B0aW9uczoge30gYXMgUXVlcnlPcHRpb25zLCBjYWxsYmFjazogb3B0aW9uc09yQ2FsbGJhY2sgfVxuICAgIDogeyBvcHRpb25zOiBvcHRpb25zT3JDYWxsYmFjayB8fCB7fSwgY2FsbGJhY2s6IGNiIH07XG5cbiAgICBsZXQgZm9ybSA9IHRoaXMuZXZlcnl0aGluZygpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpIHtcbiAgICAgIGZvcm0gPSBmb3JtLnNldChrZXksIG9wdGlvbnNba2V5XSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5yZWYpIHtcbiAgICAgIC8vIExvb2sgaW4gY29va2llcyBpZiB3ZSBoYXZlIGEgcmVmIChwcmV2aWV3IG9yIGV4cGVyaW1lbnQpXG4gICAgICBsZXQgY29va2llU3RyaW5nID0gJyc7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnJlcSkgeyAvLyBOb2RlSlNcbiAgICAgICAgY29va2llU3RyaW5nID0gdGhpcy5vcHRpb25zLnJlcS5oZWFkZXJzWydjb29raWUnXSB8fCAnJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50KSB7IC8vIEJyb3dzZXJcbiAgICAgICAgY29va2llU3RyaW5nID0gd2luZG93LmRvY3VtZW50LmNvb2tpZSB8fCAnJztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvb2tpZXMgPSBDb29raWVzLnBhcnNlKGNvb2tpZVN0cmluZyk7XG4gICAgICBjb25zdCBwcmV2aWV3UmVmID0gY29va2llc1tQUkVWSUVXX0NPT0tJRV07XG4gICAgICBjb25zdCBleHBlcmltZW50UmVmID0gdGhpcy5leHBlcmltZW50cy5yZWZGcm9tQ29va2llKGNvb2tpZXNbRVhQRVJJTUVOVF9DT09LSUVdKTtcbiAgICAgIGZvcm0gPSBmb3JtLnJlZihwcmV2aWV3UmVmIHx8IGV4cGVyaW1lbnRSZWYgfHwgdGhpcy5tYXN0ZXJSZWYucmVmKTtcbiAgICB9XG4gICAgaWYgKHEpIHtcbiAgICAgIGZvcm0ucXVlcnkocSk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtLnN1Ym1pdChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGRvY3VtZW50IHJldHVybmVkIGJ5IHRoZSBnaXZlbiBxdWVyeVxuICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheXxQcmVkaWNhdGV9IHRoZSBxdWVyeVxuICAgKiBAcGFyYW0ge29iamVjdH0gYWRkaXRpb25hbCBwYXJhbWV0ZXJzLiBJbiBOb2RlSlMsIHBhc3MgdGhlIHJlcXVlc3QgYXMgJ3JlcScuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrKGVyciwgZG9jKVxuICAgKi9cbiAgcXVlcnlGaXJzdChxOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uc09yQ2FsbGJhY2s6IFF1ZXJ5T3B0aW9ucyB8IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4sIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCB7IG9wdGlvbnMsIGNhbGxiYWNrIH0gPSB0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB7IG9wdGlvbnM6IHt9IGFzIFF1ZXJ5T3B0aW9ucywgY2FsbGJhY2s6IG9wdGlvbnNPckNhbGxiYWNrIH1cbiAgICAgICAgOiB7IG9wdGlvbnM6IG9wdGlvbnNPckNhbGxiYWNrIHx8IHt9LCBjYWxsYmFjazogY2IgfHwgKCgpID0+IHt9KSB9O1xuXG4gICAgb3B0aW9ucy5wYWdlID0gMTtcbiAgICBvcHRpb25zLnBhZ2VTaXplID0gMTtcblxuICAgIHJldHVybiB0aGlzLnF1ZXJ5KHEsIG9wdGlvbnMpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IHJlc3BvbnNlICYmIHJlc3BvbnNlLnJlc3VsdHMgJiYgcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGRvY3VtZW50KTtcbiAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBpZFxuICAgKi9cbiAgZ2V0QnlJRChpZDogc3RyaW5nLCBtYXliZU9wdGlvbnM/OiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCBvcHRpb25zID0gbWF5YmVPcHRpb25zIHx8IHt9O1xuICAgIGlmICghb3B0aW9ucy5sYW5nKSBvcHRpb25zLmxhbmcgPSAnKic7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlGaXJzdChQcmVkaWNhdGVzLmF0KCdkb2N1bWVudC5pZCcsIGlkKSwgb3B0aW9ucywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIG11bHRpcGxlIGRvY3VtZW50cyBmcm9tIGFuIGFycmF5IG9mIGlkXG4gICAqL1xuICBnZXRCeUlEcyhpZHM6IHN0cmluZ1tdLCBtYXliZU9wdGlvbnM/OiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+IHtcbiAgICBjb25zdCBvcHRpb25zID0gbWF5YmVPcHRpb25zIHx8IHt9O1xuICAgIGlmICghb3B0aW9ucy5sYW5nKSBvcHRpb25zLmxhbmcgPSAnKic7XG4gICAgcmV0dXJuIHRoaXMucXVlcnkoUHJlZGljYXRlcy5pbignZG9jdW1lbnQuaWQnLCBpZHMpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGRvY3VtZW50IHdpdGggdGhlIGdpdmVuIHVpZFxuICAgKi9cbiAgZ2V0QnlVSUQodHlwZTogc3RyaW5nLCB1aWQ6IHN0cmluZywgbWF5YmVPcHRpb25zPzogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1heWJlT3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMubGFuZykgb3B0aW9ucy5sYW5nID0gJyonO1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5Rmlyc3QoUHJlZGljYXRlcy5hdChgbXkuJHt0eXBlfS51aWRgLCB1aWQpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIHNpbmdsZXRvbiBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiB0eXBlXG4gICAqL1xuICBnZXRTaW5nbGUodHlwZTogc3RyaW5nLCBtYXliZU9wdGlvbnM/OiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCBvcHRpb25zID0gbWF5YmVPcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5Rmlyc3QoUHJlZGljYXRlcy5hdCgnZG9jdW1lbnQudHlwZScsIHR5cGUpLCBvcHRpb25zLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGRvY3VtZW50IHdpdGggdGhlIGdpdmVuIGJvb2ttYXJrXG4gICAqL1xuICBnZXRCb29rbWFyayhib29rbWFyazogc3RyaW5nLCBtYXliZU9wdGlvbnM/OiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICBjb25zdCBpZCA9IHRoaXMuZGF0YS5ib29rbWFya3NbYm9va21hcmtdO1xuICAgIGlmIChpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QnlJRChpZCwgbWF5YmVPcHRpb25zLCBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnRXJyb3IgcmV0cmlldmluZyBib29rbWFya2VkIGlkJyk7XG4gICAgfVxuICB9XG5cbiAgcHJldmlld1Nlc3Npb24odG9rZW46IHN0cmluZywgbGlua1Jlc29sdmVyOiAoZG9jOiBhbnkpID0+IHN0cmluZywgZGVmYXVsdFVybDogc3RyaW5nLCBjYj86IFJlcXVlc3RDYWxsYmFjazxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8UHJldmlld1Jlc3BvbnNlPih0b2tlbikudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAoIXJlc3VsdC5tYWluRG9jdW1lbnQpIHtcbiAgICAgICAgY2IgJiYgY2IobnVsbCwgZGVmYXVsdFVybCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVmYXVsdFVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRCeUlEKHJlc3VsdC5tYWluRG9jdW1lbnQpLnRoZW4oKGRvY3VtZW50KSA9PiB7XG4gICAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgY2IgJiYgY2IobnVsbCwgZGVmYXVsdFVybCk7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFVybDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbGlua1Jlc29sdmVyKGRvY3VtZW50KTtcbiAgICAgICAgICAgIGNiICYmIGNiKG51bGwsIHVybCk7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjYiAmJiBjYihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1Jlc29sdmVkQXBpLnRzIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQW1DQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!*********************************************!*\
  !*** multi fetch-everywhere ./src/index.ts ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! fetch-everywhere */5);
module.exports = __webpack_require__(/*! /Volumes/data/hub/prismic/prismic-javascript/src/index.ts */6);


/***/ }),
/* 5 */
/*!**********************************************************************************************************************************!*\
  !*** external {"root":"fetch-everywhere","commonjs2":"fetch-everywhere","commonjs":"fetch-everywhere","amd":"fetch-everywhere"} ***!
  \**********************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_5__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJmZXRjaC1ldmVyeXdoZXJlXCIsXCJjb21tb25qczJcIjpcImZldGNoLWV2ZXJ5d2hlcmVcIixcImNvbW1vbmpzXCI6XCJmZXRjaC1ldmVyeXdoZXJlXCIsXCJhbWRcIjpcImZldGNoLWV2ZXJ5d2hlcmVcIn0/ZTIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcImZldGNoLWV2ZXJ5d2hlcmVcIixcImNvbW1vbmpzMlwiOlwiZmV0Y2gtZXZlcnl3aGVyZVwiLFwiY29tbW9uanNcIjpcImZldGNoLWV2ZXJ5d2hlcmVcIixcImFtZFwiOlwiZmV0Y2gtZXZlcnl3aGVyZVwifVxuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar Predicates_1 = __webpack_require__(/*! ./Predicates */ 0);\nvar experiments_1 = __webpack_require__(/*! ./experiments */ 1);\nvar client_1 = __webpack_require__(/*! ./client */ 7);\nvar Api_1 = __webpack_require__(/*! ./Api */ 2);\nvar ResolvedApi_1 = __webpack_require__(/*! ./ResolvedApi */ 3);\nvar Prismic;\n(function (Prismic) {\n    Prismic.experimentCookie = ResolvedApi_1.EXPERIMENT_COOKIE;\n    Prismic.previewCookie = ResolvedApi_1.PREVIEW_COOKIE;\n    Prismic.Predicates = Predicates_1[\"default\"];\n    Prismic.Experiments = experiments_1.Experiments;\n    Prismic.Api = Api_1[\"default\"];\n    function client(url, options) {\n        return new client_1.DefaultClient(url, options);\n    }\n    Prismic.client = client;\n    function getApi(url, options) {\n        return client_1.DefaultClient.getApi(url, options);\n    }\n    Prismic.getApi = getApi;\n    function api(url, options) {\n        return getApi(url, options);\n    }\n    Prismic.api = api;\n})(Prismic || (Prismic = {}));\nmodule.exports = Prismic;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbmRleC50cz9lYWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcmlzbWljUHJlZGljYXRlcyAgZnJvbSAnLi9QcmVkaWNhdGVzJztcbmltcG9ydCB7IEV4cGVyaW1lbnRzIGFzIFByaXNtaWNFeHBlcmltZW50IH0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQgeyBEZWZhdWx0Q2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuaW1wb3J0IFByaXNtaWNBcGksIHsgQXBpT3B0aW9ucyB9IGZyb20gJy4vQXBpJztcbmltcG9ydCBSZXNvbHZlZEFwaSwgeyBFWFBFUklNRU5UX0NPT0tJRSwgUFJFVklFV19DT09LSUUgfSBmcm9tICcuL1Jlc29sdmVkQXBpJztcblxubmFtZXNwYWNlIFByaXNtaWMge1xuXG4gIGV4cG9ydCBjb25zdCBleHBlcmltZW50Q29va2llID0gRVhQRVJJTUVOVF9DT09LSUU7XG4gIGV4cG9ydCBjb25zdCBwcmV2aWV3Q29va2llID0gUFJFVklFV19DT09LSUU7XG4gIGV4cG9ydCBjb25zdCBQcmVkaWNhdGVzID0gUHJpc21pY1ByZWRpY2F0ZXM7XG4gIGV4cG9ydCBjb25zdCBFeHBlcmltZW50cyA9IFByaXNtaWNFeHBlcmltZW50O1xuICBleHBvcnQgY29uc3QgQXBpID0gUHJpc21pY0FwaTtcblxuICBleHBvcnQgZnVuY3Rpb24gY2xpZW50KHVybDogc3RyaW5nLCBvcHRpb25zPzogQXBpT3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgRGVmYXVsdENsaWVudCh1cmwsIG9wdGlvbnMpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGdldEFwaSh1cmw6IHN0cmluZywgb3B0aW9ucz86IEFwaU9wdGlvbnMpOiBQcm9taXNlPFJlc29sdmVkQXBpPiB7XG4gICAgcmV0dXJuIERlZmF1bHRDbGllbnQuZ2V0QXBpKHVybCwgb3B0aW9ucyk7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gYXBpKHVybDogc3RyaW5nLCBvcHRpb25zPzogQXBpT3B0aW9ucyk6IFByb21pc2U8UmVzb2x2ZWRBcGk+IHtcbiAgICByZXR1cm4gZ2V0QXBpKHVybCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0ID0gUHJpc21pYztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50cyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!***********************!*\
  !*** ./src/client.ts ***!
  \***********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar form_1 = __webpack_require__(/*! ./form */ 8);\nvar Api_1 = __webpack_require__(/*! ./Api */ 2);\nvar DefaultClient = (function () {\n    function DefaultClient(url, options) {\n        this.api = new Api_1[\"default\"](url, options);\n    }\n    DefaultClient.prototype.getApi = function () {\n        return this.api.get();\n    };\n    DefaultClient.prototype.everything = function () {\n        return this.form('everything');\n    };\n    DefaultClient.prototype.form = function (formId) {\n        return new form_1.LazySearchForm(formId, this.api);\n    };\n    DefaultClient.prototype.query = function (q, optionsOrCallback, cb) {\n        return this.getApi().then(function (api) { return api.query(q, optionsOrCallback, cb); });\n    };\n    DefaultClient.prototype.queryFirst = function (q, optionsOrCallback, cb) {\n        return this.getApi().then(function (api) { return api.queryFirst(q, optionsOrCallback, cb); });\n    };\n    DefaultClient.prototype.getByID = function (id, options, cb) {\n        return this.getApi().then(function (api) { return api.getByID(id, options, cb); });\n    };\n    DefaultClient.prototype.getByIDs = function (ids, options, cb) {\n        return this.getApi().then(function (api) { return api.getByIDs(ids, options, cb); });\n    };\n    DefaultClient.prototype.getByUID = function (type, uid, options, cb) {\n        return this.getApi().then(function (api) { return api.getByUID(type, uid, options, cb); });\n    };\n    DefaultClient.prototype.getSingle = function (type, options, cb) {\n        return this.getApi().then(function (api) { return api.getSingle(type, options, cb); });\n    };\n    DefaultClient.prototype.getBookmark = function (bookmark, options, cb) {\n        return this.getApi().then(function (api) { return api.getBookmark(bookmark, options, cb); });\n    };\n    DefaultClient.prototype.previewSession = function (token, linkResolver, defaultUrl, cb) {\n        return this.getApi().then(function (api) { return api.previewSession(token, linkResolver, defaultUrl, cb); });\n    };\n    DefaultClient.getApi = function (url, options) {\n        var api = new Api_1[\"default\"](url, options);\n        return api.get();\n    };\n    return DefaultClient;\n}());\nexports.DefaultClient = DefaultClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jbGllbnQudHM/MDc2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVzb2x2ZWRBcGksIHsgUXVlcnlPcHRpb25zLCBFWFBFUklNRU5UX0NPT0tJRSwgUFJFVklFV19DT09LSUUgfSBmcm9tICcuL1Jlc29sdmVkQXBpJztcbmltcG9ydCBBcGlTZWFyY2hSZXNwb25zZSBmcm9tICcuL0FwaVNlYXJjaFJlc3BvbnNlJztcbmltcG9ydCB7IFNlYXJjaEZvcm0sIExhenlTZWFyY2hGb3JtIH0gZnJvbSAnLi9mb3JtJztcbmltcG9ydCB7IEV4cGVyaW1lbnQgfSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7IFJlcXVlc3RIYW5kbGVyLCBSZXF1ZXN0Q2FsbGJhY2sgfSBmcm9tICcuL3JlcXVlc3QnO1xuaW1wb3J0IEFwaSwgeyBBcGlPcHRpb25zIH0gZnJvbSAnLi9BcGknO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudCB7XG4gIHF1ZXJ5KHE6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zT3JDYWxsYmFjazogUXVlcnlPcHRpb25zIHwgUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPiwgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT47XG4gIHF1ZXJ5Rmlyc3QocTogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnNPckNhbGxiYWNrOiBRdWVyeU9wdGlvbnMgfCBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+LCBjYjogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+O1xuICBnZXRCeUlEKGlkOiBzdHJpbmcsIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I6IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PjtcbiAgZ2V0QnlJRHMoaWRzOiBzdHJpbmdbXSwgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYjogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+O1xuICBnZXRCeVVJRCh0eXBlOiBzdHJpbmcsIHVpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiOiBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudD47XG4gIGdldFNpbmdsZSh0eXBlOiBzdHJpbmcsIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I6IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PjtcbiAgZ2V0Qm9va21hcmsoYm9va21hcms6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYjogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+O1xuICBwcmV2aWV3U2Vzc2lvbih0b2tlbjogc3RyaW5nLCBsaW5rUmVzb2x2ZXI6IChkb2M6IGFueSkgPT4gc3RyaW5nLCBkZWZhdWx0VXJsOiBzdHJpbmcsIGNiPzogUmVxdWVzdENhbGxiYWNrPHN0cmluZz4pOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0Q2xpZW50IGltcGxlbWVudHMgQ2xpZW50IHtcblxuICBhcGk6IEFwaTtcbiAgcmVzb2x2ZWRBcGk6IFJlc29sdmVkQXBpO1xuXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBvcHRpb25zPzogQXBpT3B0aW9ucykge1xuICAgIHRoaXMuYXBpID0gbmV3IEFwaSh1cmwsIG9wdGlvbnMpO1xuICB9XG5cbiAgZ2V0QXBpKCk6IFByb21pc2U8UmVzb2x2ZWRBcGk+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0KCk7XG4gIH1cblxuICBldmVyeXRoaW5nKCk6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtKCdldmVyeXRoaW5nJyk7XG4gIH1cblxuICBmb3JtKGZvcm1JZDogc3RyaW5nKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiBuZXcgTGF6eVNlYXJjaEZvcm0oZm9ybUlkLCB0aGlzLmFwaSk7XG4gIH1cblxuICBxdWVyeShxOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uc09yQ2FsbGJhY2s6IFF1ZXJ5T3B0aW9ucyB8IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4sIGNiPzogUmVxdWVzdENhbGxiYWNrPEFwaVNlYXJjaFJlc3BvbnNlPik6IFByb21pc2U8QXBpU2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkucXVlcnkocSwgb3B0aW9uc09yQ2FsbGJhY2ssIGNiKSk7XG4gIH1cblxuICBxdWVyeUZpcnN0KHE6IHN0cmluZyB8IHN0cmluZ1tdLCBvcHRpb25zT3JDYWxsYmFjazogUXVlcnlPcHRpb25zIHwgUmVxdWVzdENhbGxiYWNrPERvY3VtZW50PiwgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudD4ge1xuICAgIHJldHVybiB0aGlzLmdldEFwaSgpLnRoZW4oYXBpID0+IGFwaS5xdWVyeUZpcnN0KHEsIG9wdGlvbnNPckNhbGxiYWNrLCBjYikpO1xuICB9XG5cbiAgZ2V0QnlJRChpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkuZ2V0QnlJRChpZCwgb3B0aW9ucywgY2IpKTtcbiAgfVxuXG4gIGdldEJ5SURzKGlkczogc3RyaW5nW10sIG9wdGlvbnM6IFF1ZXJ5T3B0aW9ucywgY2I/OiBSZXF1ZXN0Q2FsbGJhY2s8QXBpU2VhcmNoUmVzcG9uc2U+KTogUHJvbWlzZTxBcGlTZWFyY2hSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEFwaSgpLnRoZW4oYXBpID0+IGFwaS5nZXRCeUlEcyhpZHMsIG9wdGlvbnMsIGNiKSk7XG4gIH1cblxuICBnZXRCeVVJRCh0eXBlOiBzdHJpbmcsIHVpZDogc3RyaW5nLCBvcHRpb25zOiBRdWVyeU9wdGlvbnMsIGNiPzogUmVxdWVzdENhbGxiYWNrPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkuZ2V0QnlVSUQodHlwZSwgdWlkLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgZ2V0U2luZ2xlKHR5cGU6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXBpKCkudGhlbihhcGkgPT4gYXBpLmdldFNpbmdsZSh0eXBlLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgZ2V0Qm9va21hcmsoYm9va21hcms6IHN0cmluZywgb3B0aW9uczogUXVlcnlPcHRpb25zLCBjYj86IFJlcXVlc3RDYWxsYmFjazxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXBpKCkudGhlbihhcGkgPT4gYXBpLmdldEJvb2ttYXJrKGJvb2ttYXJrLCBvcHRpb25zLCBjYikpO1xuICB9XG5cbiAgcHJldmlld1Nlc3Npb24odG9rZW46IHN0cmluZywgbGlua1Jlc29sdmVyOiAoZG9jOiBhbnkpID0+IHN0cmluZywgZGVmYXVsdFVybDogc3RyaW5nLCBjYj86IFJlcXVlc3RDYWxsYmFjazxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBcGkoKS50aGVuKGFwaSA9PiBhcGkucHJldmlld1Nlc3Npb24odG9rZW4sIGxpbmtSZXNvbHZlciwgZGVmYXVsdFVybCwgY2IpKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRBcGkodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBBcGlPcHRpb25zKTogUHJvbWlzZTxSZXNvbHZlZEFwaT4ge1xuICAgIGNvbnN0IGFwaSA9IG5ldyBBcGkodXJsLCBvcHRpb25zKTtcbiAgICByZXR1cm4gYXBpLmdldCgpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY2xpZW50LnRzIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBR0E7QUFhQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXpEQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!*********************!*\
  !*** ./src/form.ts ***!
  \*********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar LazySearchForm = (function () {\n    function LazySearchForm(id, api) {\n        this.id = id;\n        this.api = api;\n        this.fields = {};\n    }\n    LazySearchForm.prototype.set = function (field, value) {\n        this.fields[field] = value;\n        return this;\n    };\n    LazySearchForm.prototype.ref = function (ref) {\n        return this.set('ref', ref);\n    };\n    LazySearchForm.prototype.query = function (query) {\n        return this.set('q', query);\n    };\n    LazySearchForm.prototype.pageSize = function (size) {\n        return this.set('pageSize', size);\n    };\n    LazySearchForm.prototype.fetch = function (fields) {\n        return this.set('fetch', fields);\n    };\n    LazySearchForm.prototype.fetchLinks = function (fields) {\n        return this.set('fetchLinks', fields);\n    };\n    LazySearchForm.prototype.lang = function (langCode) {\n        return this.set('lang', langCode);\n    };\n    LazySearchForm.prototype.page = function (p) {\n        return this.set('page', p);\n    };\n    LazySearchForm.prototype.after = function (documentId) {\n        return this.set('after', documentId);\n    };\n    LazySearchForm.prototype.orderings = function (orderings) {\n        return this.set('orderings', orderings);\n    };\n    LazySearchForm.prototype.url = function () {\n        var _this = this;\n        return this.api.get().then(function (api) {\n            return LazySearchForm.toSearchForm(_this, api).url();\n        });\n    };\n    LazySearchForm.prototype.submit = function (cb) {\n        var _this = this;\n        return this.api.get().then(function (api) {\n            return LazySearchForm.toSearchForm(_this, api).submit(cb);\n        });\n    };\n    LazySearchForm.toSearchForm = function (lazyForm, api) {\n        var form = api.form(lazyForm.id);\n        if (form) {\n            return Object.keys(lazyForm.fields).reduce(function (form, fieldKey) {\n                var fieldValue = lazyForm.fields[fieldKey];\n                return form.set(fieldKey, fieldValue);\n            }, form);\n        }\n        else {\n            throw new Error(\"Unable to access to form \" + lazyForm.id);\n        }\n    };\n    return LazySearchForm;\n}());\nexports.LazySearchForm = LazySearchForm;\nvar SearchForm = (function () {\n    function SearchForm(form, httpClient) {\n        this.httpClient = httpClient;\n        this.form = form;\n        this.data = {};\n        for (var field in form.fields) {\n            if (form.fields[field]['default']) {\n                this.data[field] = [form.fields[field]['default']];\n            }\n        }\n    }\n    SearchForm.prototype.set = function (field, value) {\n        var fieldDesc = this.form.fields[field];\n        if (!fieldDesc)\n            throw new Error('Unknown field ' + field);\n        var checkedValue = value === '' || value === undefined ? null : value;\n        var values = this.data[field] || [];\n        if (fieldDesc.multiple) {\n            values = checkedValue ? values.concat([checkedValue]) : values;\n        }\n        else {\n            values = checkedValue ? [checkedValue] : values;\n        }\n        this.data[field] = values;\n        return this;\n    };\n    /**\n     * Sets a ref to query on for this SearchForm. This is a mandatory\n     * method to call before calling submit(), and api.form('everything').submit()\n     * will not work.\n     */\n    SearchForm.prototype.ref = function (ref) {\n        return this.set('ref', ref);\n    };\n    /**\n     * Sets a predicate-based query for this SearchForm. This is where you\n     * paste what you compose in your prismic.io API browser.\n     */\n    SearchForm.prototype.query = function (query) {\n        if (typeof query === 'string') {\n            return this.query([query]);\n        }\n        else if (query instanceof Array) {\n            return this.set('q', \"[\" + query.join('') + \"]\");\n        }\n        else {\n            throw new Error(\"Invalid query : \" + query);\n        }\n    };\n    /**\n     * Sets a page size to query for this SearchForm. This is an optional method.\n     *\n     * @param {number} size - The page size\n     * @returns {SearchForm} - The SearchForm itself\n     */\n    SearchForm.prototype.pageSize = function (size) {\n        return this.set('pageSize', size);\n    };\n    /**\n     * Restrict the results document to the specified fields\n     */\n    SearchForm.prototype.fetch = function (fields) {\n        var strFields = fields instanceof Array ? fields.join(',') : fields;\n        return this.set('fetch', strFields);\n    };\n    /**\n     * Include the requested fields in the DocumentLink instances in the result\n     */\n    SearchForm.prototype.fetchLinks = function (fields) {\n        var strFields = fields instanceof Array ? fields.join(',') : fields;\n        return this.set('fetchLinks', strFields);\n    };\n    /**\n     * Sets the language to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.lang = function (langCode) {\n        return this.set('lang', langCode);\n    };\n    /**\n     * Sets the page number to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.page = function (p) {\n        return this.set('page', p);\n    };\n    /**\n     * Remove all the documents except for those after the specified document in the list. This is an optional method.\n     */\n    SearchForm.prototype.after = function (documentId) {\n        return this.set('after', documentId);\n    };\n    /**\n     * Sets the orderings to query for this SearchForm. This is an optional method.\n     */\n    SearchForm.prototype.orderings = function (orderings) {\n        if (!orderings) {\n            return this;\n        }\n        else {\n            return this.set('orderings', \"[\" + orderings.join(',') + \"]\");\n        }\n    };\n    /**\n     * Build the URL to query\n     */\n    SearchForm.prototype.url = function () {\n        var url = this.form.action;\n        if (this.data) {\n            var sep = (url.indexOf('?') > -1 ? '&' : '?');\n            for (var key in this.data) {\n                if (this.data.hasOwnProperty(key)) {\n                    var values = this.data[key];\n                    if (values) {\n                        for (var i = 0; i < values.length; i++) {\n                            url += sep + key + '=' + encodeURIComponent(values[i]);\n                            sep = '&';\n                        }\n                    }\n                }\n            }\n        }\n        return url;\n    };\n    /**\n     * Submits the query, and calls the callback function.\n     */\n    SearchForm.prototype.submit = function (cb) {\n        return this.httpClient.cachedRequest(this.url(), cb);\n    };\n    return SearchForm;\n}());\nexports.SearchForm = SearchForm;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9mb3JtLnRzPzAzMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwaSBmcm9tICcuL0FwaSc7XG5pbXBvcnQgUmVzb2x2ZWRBcGkgZnJvbSAnLi9SZXNvbHZlZEFwaSc7XG5pbXBvcnQgQXBpU2VhcmNoUmVzcG9uc2UgZnJvbSAnLi9BcGlTZWFyY2hSZXNwb25zZSc7XG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICcuL0h0dHBDbGllbnQnO1xuaW1wb3J0IHsgUmVxdWVzdENhbGxiYWNrIH0gZnJvbSAnLi9yZXF1ZXN0JztcblxuZXhwb3J0IHR5cGUgRmllbGRzID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuZXhwb3J0IGludGVyZmFjZSBGb3JtIHtcbiAgZmllbGRzOiBGaWVsZHM7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHJlbDogc3RyaW5nO1xuICBmb3JtX21ldGhvZDogc3RyaW5nO1xuICBlbmN0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBMYXp5U2VhcmNoRm9ybSB7XG4gIGlkOiBzdHJpbmc7XG4gIGZpZWxkczogRmllbGRzO1xuICBhcGk6IEFwaTtcblxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBhcGk6IEFwaSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICB0aGlzLmZpZWxkcyA9IHt9O1xuICB9XG5cbiAgc2V0KGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgdGhpcy5maWVsZHNbZmllbGRdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWYocmVmOiBzdHJpbmcpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdyZWYnLCByZWYpO1xuICB9XG5cbiAgcXVlcnkocXVlcnk6IHN0cmluZyB8IHN0cmluZ1tdKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgncScsIHF1ZXJ5KTtcbiAgfVxuXG4gIHBhZ2VTaXplKHNpemU6IG51bWJlcik6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3BhZ2VTaXplJywgc2l6ZSk7XG4gIH1cblxuICBmZXRjaChmaWVsZHM6IHN0cmluZyB8IHN0cmluZ1tdKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnZmV0Y2gnLCBmaWVsZHMpO1xuICB9XG5cbiAgZmV0Y2hMaW5rcyhmaWVsZHM6IHN0cmluZyB8IHN0cmluZ1tdKTogTGF6eVNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnZmV0Y2hMaW5rcycsIGZpZWxkcyk7XG4gIH1cblxuICBsYW5nKGxhbmdDb2RlOiBzdHJpbmcpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdsYW5nJywgbGFuZ0NvZGUpO1xuICB9XG5cbiAgcGFnZShwOiBudW1iZXIpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdwYWdlJywgcCk7XG4gIH1cblxuICBhZnRlcihkb2N1bWVudElkOiBzdHJpbmcpOiBMYXp5U2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdhZnRlcicsIGRvY3VtZW50SWQpO1xuICB9XG5cbiAgb3JkZXJpbmdzKG9yZGVyaW5ncyA/OiBzdHJpbmdbXSk6IExhenlTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ29yZGVyaW5ncycsIG9yZGVyaW5ncyk7XG4gIH1cblxuICB1cmwoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0KCkudGhlbigoYXBpKSA9PiB7XG4gICAgICByZXR1cm4gTGF6eVNlYXJjaEZvcm0udG9TZWFyY2hGb3JtKHRoaXMsIGFwaSkudXJsKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdWJtaXQoY2I6IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4pOiBQcm9taXNlPEFwaVNlYXJjaFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuYXBpLmdldCgpLnRoZW4oKGFwaSkgPT4ge1xuICAgICAgcmV0dXJuIExhenlTZWFyY2hGb3JtLnRvU2VhcmNoRm9ybSh0aGlzLCBhcGkpLnN1Ym1pdChjYik7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgdG9TZWFyY2hGb3JtKGxhenlGb3JtOiBMYXp5U2VhcmNoRm9ybSwgYXBpOiBSZXNvbHZlZEFwaSk6IFNlYXJjaEZvcm0ge1xuICAgIGNvbnN0IGZvcm0gPSBhcGkuZm9ybShsYXp5Rm9ybS5pZCk7XG4gICAgaWYgKGZvcm0pIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhsYXp5Rm9ybS5maWVsZHMpLnJlZHVjZSgoZm9ybSwgZmllbGRLZXkpID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGxhenlGb3JtLmZpZWxkc1tmaWVsZEtleV07XG4gICAgICAgIHJldHVybiBmb3JtLnNldChmaWVsZEtleSwgZmllbGRWYWx1ZSk7XG4gICAgICB9LCBmb3JtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYWNjZXNzIHRvIGZvcm0gJHtsYXp5Rm9ybS5pZH1gKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNlYXJjaEZvcm0ge1xuICBodHRwQ2xpZW50OiBIdHRwQ2xpZW50O1xuICBmb3JtOiBGb3JtO1xuICBkYXRhOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoZm9ybTogRm9ybSwgaHR0cENsaWVudDogSHR0cENsaWVudCkge1xuICAgIHRoaXMuaHR0cENsaWVudCA9IGh0dHBDbGllbnQ7XG4gICAgdGhpcy5mb3JtID0gZm9ybTtcblxuICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgIGZvciAoY29uc3QgZmllbGQgaW4gZm9ybS5maWVsZHMpIHtcbiAgICAgIGlmIChmb3JtLmZpZWxkc1tmaWVsZF1bJ2RlZmF1bHQnXSkge1xuICAgICAgICB0aGlzLmRhdGFbZmllbGRdID0gW2Zvcm0uZmllbGRzW2ZpZWxkXVsnZGVmYXVsdCddXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXQoZmllbGQ6IHN0cmluZywgdmFsdWU6IGFueSk6IFNlYXJjaEZvcm0ge1xuICAgIGNvbnN0IGZpZWxkRGVzYyA9IHRoaXMuZm9ybS5maWVsZHNbZmllbGRdO1xuICAgIGlmICghZmllbGREZXNjKSB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZmllbGQgJyArIGZpZWxkKTtcbiAgICBjb25zdCBjaGVja2VkVmFsdWUgPSB2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcbiAgICBsZXQgdmFsdWVzID0gdGhpcy5kYXRhW2ZpZWxkXSB8fCBbXTtcbiAgICBpZiAoZmllbGREZXNjLm11bHRpcGxlKSB7XG4gICAgICB2YWx1ZXMgPSBjaGVja2VkVmFsdWUgPyB2YWx1ZXMuY29uY2F0KFtjaGVja2VkVmFsdWVdKSA6IHZhbHVlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVzID0gY2hlY2tlZFZhbHVlID8gW2NoZWNrZWRWYWx1ZV0gOiB2YWx1ZXM7XG4gICAgfVxuICAgIHRoaXMuZGF0YVtmaWVsZF0gPSB2YWx1ZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHJlZiB0byBxdWVyeSBvbiBmb3IgdGhpcyBTZWFyY2hGb3JtLiBUaGlzIGlzIGEgbWFuZGF0b3J5XG4gICAqIG1ldGhvZCB0byBjYWxsIGJlZm9yZSBjYWxsaW5nIHN1Ym1pdCgpLCBhbmQgYXBpLmZvcm0oJ2V2ZXJ5dGhpbmcnKS5zdWJtaXQoKVxuICAgKiB3aWxsIG5vdCB3b3JrLlxuICAgKi9cbiAgcmVmKHJlZjogc3RyaW5nKTogU2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdyZWYnLCByZWYpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYSBwcmVkaWNhdGUtYmFzZWQgcXVlcnkgZm9yIHRoaXMgU2VhcmNoRm9ybS4gVGhpcyBpcyB3aGVyZSB5b3VcbiAgICogcGFzdGUgd2hhdCB5b3UgY29tcG9zZSBpbiB5b3VyIHByaXNtaWMuaW8gQVBJIGJyb3dzZXIuXG4gICAqL1xuICBxdWVyeShxdWVyeTogc3RyaW5nIHwgc3RyaW5nW10pOiBTZWFyY2hGb3JtIHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRoaXMucXVlcnkoW3F1ZXJ5XSk7XG4gICAgfSBlbHNlIGlmIChxdWVyeSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoJ3EnLCBgWyR7cXVlcnkuam9pbignJyl9XWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcXVlcnkgOiAke3F1ZXJ5fWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgcGFnZSBzaXplIHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBwYWdlIHNpemVcbiAgICogQHJldHVybnMge1NlYXJjaEZvcm19IC0gVGhlIFNlYXJjaEZvcm0gaXRzZWxmXG4gICAqL1xuICBwYWdlU2l6ZShzaXplOiBudW1iZXIpOiBTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ3BhZ2VTaXplJywgc2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdHJpY3QgdGhlIHJlc3VsdHMgZG9jdW1lbnQgdG8gdGhlIHNwZWNpZmllZCBmaWVsZHNcbiAgICovXG4gIGZldGNoKGZpZWxkczogc3RyaW5nIHwgc3RyaW5nW10pOiBTZWFyY2hGb3JtIHtcbiAgICBjb25zdCBzdHJGaWVsZHMgPSBmaWVsZHMgaW5zdGFuY2VvZiBBcnJheSA/IGZpZWxkcy5qb2luKCcsJykgOiBmaWVsZHM7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdmZXRjaCcsIHN0ckZpZWxkcyk7XG4gIH1cblxuICAvKipcbiAgICogSW5jbHVkZSB0aGUgcmVxdWVzdGVkIGZpZWxkcyBpbiB0aGUgRG9jdW1lbnRMaW5rIGluc3RhbmNlcyBpbiB0aGUgcmVzdWx0XG4gICAqL1xuICBmZXRjaExpbmtzKGZpZWxkczogc3RyaW5nIHwgc3RyaW5nW10pOiBTZWFyY2hGb3JtIHtcbiAgICBjb25zdCBzdHJGaWVsZHMgPSBmaWVsZHMgaW5zdGFuY2VvZiBBcnJheSA/IGZpZWxkcy5qb2luKCcsJykgOiBmaWVsZHM7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdmZXRjaExpbmtzJywgc3RyRmllbGRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsYW5ndWFnZSB0byBxdWVyeSBmb3IgdGhpcyBTZWFyY2hGb3JtLiBUaGlzIGlzIGFuIG9wdGlvbmFsIG1ldGhvZC5cbiAgICovXG4gIGxhbmcobGFuZ0NvZGU6IHN0cmluZyk6IFNlYXJjaEZvcm0ge1xuICAgIHJldHVybiB0aGlzLnNldCgnbGFuZycsIGxhbmdDb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwYWdlIG51bWJlciB0byBxdWVyeSBmb3IgdGhpcyBTZWFyY2hGb3JtLiBUaGlzIGlzIGFuIG9wdGlvbmFsIG1ldGhvZC5cbiAgICovXG4gIHBhZ2UocDogbnVtYmVyKTogU2VhcmNoRm9ybSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KCdwYWdlJywgcCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0aGUgZG9jdW1lbnRzIGV4Y2VwdCBmb3IgdGhvc2UgYWZ0ZXIgdGhlIHNwZWNpZmllZCBkb2N1bWVudCBpbiB0aGUgbGlzdC4gVGhpcyBpcyBhbiBvcHRpb25hbCBtZXRob2QuXG4gICAqL1xuICBhZnRlcihkb2N1bWVudElkOiBzdHJpbmcpOiBTZWFyY2hGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5zZXQoJ2FmdGVyJywgZG9jdW1lbnRJZCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgb3JkZXJpbmdzIHRvIHF1ZXJ5IGZvciB0aGlzIFNlYXJjaEZvcm0uIFRoaXMgaXMgYW4gb3B0aW9uYWwgbWV0aG9kLlxuICAgKi9cbiAgb3JkZXJpbmdzKG9yZGVyaW5ncyA/OiBzdHJpbmdbXSk6IFNlYXJjaEZvcm0ge1xuICAgIGlmICghb3JkZXJpbmdzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KCdvcmRlcmluZ3MnLCBgWyR7b3JkZXJpbmdzLmpvaW4oJywnKX1dYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIHRoZSBVUkwgdG8gcXVlcnlcbiAgICovXG4gIHVybCgpOiBzdHJpbmcge1xuICAgIGxldCB1cmwgPSB0aGlzLmZvcm0uYWN0aW9uO1xuICAgIGlmICh0aGlzLmRhdGEpIHtcbiAgICAgIGxldCBzZXAgPSAodXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuZGF0YSkge1xuICAgICAgICBpZiAgKHRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5kYXRhW2tleV07XG4gICAgICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdXJsICs9IHNlcCArIGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICBzZXAgPSAnJic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKipcbiAgICogU3VibWl0cyB0aGUgcXVlcnksIGFuZCBjYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqL1xuICBzdWJtaXQoY2I6IFJlcXVlc3RDYWxsYmFjazxBcGlTZWFyY2hSZXNwb25zZT4pOiBQcm9taXNlPEFwaVNlYXJjaFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5jYWNoZWRSZXF1ZXN0PEFwaVNlYXJjaFJlc3BvbnNlPih0aGlzLnVybCgpLCBjYik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9mb3JtLnRzIl0sIm1hcHBpbmdzIjoiOztBQWlCQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEzRUE7QUE2RUE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBNUlBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!************************!*\
  !*** ./src/Cookies.ts ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\n// Some portions of code from https://github.com/jshttp/cookie\nvar decode = decodeURIComponent;\nfunction tryDecode(str, decode) {\n    try {\n        return decode(str);\n    }\n    catch (e) {\n        return str;\n    }\n}\nfunction parse(str, options) {\n    if (typeof str !== 'string') {\n        throw new TypeError('argument str must be a string');\n    }\n    var obj = {};\n    var opt = options || {};\n    var pairs = str.split(/; */);\n    var dec = opt.decode || decode;\n    pairs.forEach(function (pair) {\n        var eq_idx = pair.indexOf('=');\n        // skip things that don't look like key=value\n        if (eq_idx < 0) {\n            return;\n        }\n        var key = pair.substr(0, eq_idx).trim();\n        var val = pair.substr(++eq_idx, pair.length).trim();\n        // quoted values\n        if ('\"' == val[0]) {\n            val = val.slice(1, -1);\n        }\n        // only assign once\n        if (undefined == obj[key]) {\n            obj[key] = tryDecode(val, dec);\n        }\n    });\n    return obj;\n}\nexports[\"default\"] = { parse: parse };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9Db29raWVzLnRzPzVlMzYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBDb29raWUge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG59XG5cbi8vIFNvbWUgcG9ydGlvbnMgb2YgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc2h0dHAvY29va2llXG5cbnZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cbmZ1bmN0aW9uIHRyeURlY29kZShzdHI6IHN0cmluZywgZGVjb2RlOiAoc3RyOiBzdHJpbmcpID0+IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGUoc3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2Uoc3RyOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc3RyIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuXG4gIHZhciBvYmogPSA8Q29va2llPnt9O1xuICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHBhaXJzID0gc3RyLnNwbGl0KC87ICovKTtcbiAgdmFyIGRlYyA9IG9wdC5kZWNvZGUgfHwgZGVjb2RlO1xuXG4gIHBhaXJzLmZvckVhY2goZnVuY3Rpb24ocGFpcikge1xuICAgIHZhciBlcV9pZHggPSBwYWlyLmluZGV4T2YoJz0nKTtcblxuICAgIC8vIHNraXAgdGhpbmdzIHRoYXQgZG9uJ3QgbG9vayBsaWtlIGtleT12YWx1ZVxuICAgIGlmIChlcV9pZHggPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGtleSA9IHBhaXIuc3Vic3RyKDAsIGVxX2lkeCkudHJpbSgpO1xuICAgIHZhciB2YWwgPSBwYWlyLnN1YnN0cigrK2VxX2lkeCwgcGFpci5sZW5ndGgpLnRyaW0oKTtcblxuICAgIC8vIHF1b3RlZCB2YWx1ZXNcbiAgICBpZiAoJ1wiJyA9PSB2YWxbMF0pIHtcbiAgICAgIHZhbCA9IHZhbC5zbGljZSgxLCAtMSk7XG4gICAgfVxuXG4gICAgLy8gb25seSBhc3NpZ24gb25jZVxuICAgIGlmICh1bmRlZmluZWQgPT0gb2JqW2tleV0pIHtcbiAgICAgIG9ialtrZXldID0gdHJ5RGVjb2RlKHZhbCwgZGVjKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgcGFyc2UgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9Db29raWVzLnRzIl0sIm1hcHBpbmdzIjoiOztBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!***************************!*\
  !*** ./src/HttpClient.ts ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar cache_1 = __webpack_require__(/*! ./cache */ 11);\nvar request_1 = __webpack_require__(/*! ./request */ 13);\nvar HttpClient = (function () {\n    function HttpClient(requestHandler, cache, proxyAgent) {\n        this.requestHandler = requestHandler || new request_1.DefaultRequestHandler({ proxyAgent: proxyAgent });\n        this.cache = cache || new cache_1.DefaultApiCache();\n    }\n    HttpClient.prototype.request = function (url, callback) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.requestHandler.request(url, function (err, result, xhr, ttl) {\n                if (err) {\n                    reject(err);\n                    callback && callback(err, null, xhr, ttl);\n                }\n                else if (result) {\n                    resolve(result);\n                    callback && callback(null, result, xhr, ttl);\n                }\n            });\n        });\n    };\n    /**\n     * Fetch a URL corresponding to a query, and parse the response as a Response object\n     */\n    HttpClient.prototype.cachedRequest = function (url, maybeOptions) {\n        var _this = this;\n        var options = maybeOptions || {};\n        var run = function (cb) {\n            var cacheKey = options.cacheKey || url;\n            _this.cache.get(cacheKey, function (cacheGetError, cacheGetValue) {\n                if (cacheGetError || cacheGetValue) {\n                    cb(cacheGetError, cacheGetValue);\n                }\n                else {\n                    _this.request(url, function (fetchError, fetchValue, xhr, ttlReq) {\n                        if (fetchError) {\n                            cb(fetchError, null);\n                        }\n                        else {\n                            var ttl = ttlReq || options.ttl;\n                            if (ttl) {\n                                _this.cache.set(cacheKey, fetchValue, ttl, cb);\n                            }\n                            cb(null, fetchValue);\n                        }\n                    });\n                }\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            run(function (err, value) {\n                if (err)\n                    reject(err);\n                if (value)\n                    resolve(value);\n            });\n        });\n    };\n    return HttpClient;\n}());\nexports[\"default\"] = HttpClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvSHR0cENsaWVudC50cz81Y2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwaUNhY2hlLCBEZWZhdWx0QXBpQ2FjaGUgfSBmcm9tICcuL2NhY2hlJztcbmltcG9ydCB7IFJlcXVlc3RIYW5kbGVyLCBEZWZhdWx0UmVxdWVzdEhhbmRsZXIsIFJlcXVlc3RDYWxsYmFjayB9IGZyb20gJy4vcmVxdWVzdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHR0cENsaWVudE9wdGlvbnMge1xuICB0dGw/OiBudW1iZXI7XG4gIGNhY2hlS2V5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIdHRwQ2xpZW50IHtcblxuICBwcml2YXRlIGNhY2hlOiBBcGlDYWNoZTtcbiAgcHJpdmF0ZSByZXF1ZXN0SGFuZGxlcjogUmVxdWVzdEhhbmRsZXI7XG5cbiAgY29uc3RydWN0b3IocmVxdWVzdEhhbmRsZXI/OiBSZXF1ZXN0SGFuZGxlciwgY2FjaGU/OiBBcGlDYWNoZSwgcHJveHlBZ2VudD86IGFueSkge1xuICAgIHRoaXMucmVxdWVzdEhhbmRsZXIgPSByZXF1ZXN0SGFuZGxlciB8fCBuZXcgRGVmYXVsdFJlcXVlc3RIYW5kbGVyKHsgcHJveHlBZ2VudCB9KTtcbiAgICB0aGlzLmNhY2hlID0gY2FjaGUgfHwgbmV3IERlZmF1bHRBcGlDYWNoZSgpO1xuICB9XG5cbiAgcmVxdWVzdDxUPih1cmw6IHN0cmluZywgY2FsbGJhY2s/OiBSZXF1ZXN0Q2FsbGJhY2s8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXF1ZXN0SGFuZGxlci5yZXF1ZXN0PFQ+KHVybCwgKGVyciwgcmVzdWx0LCB4aHIsIHR0bCkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZXJyLCBudWxsLCB4aHIsIHR0bCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwsIHJlc3VsdCwgeGhyLCB0dGwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhIFVSTCBjb3JyZXNwb25kaW5nIHRvIGEgcXVlcnksIGFuZCBwYXJzZSB0aGUgcmVzcG9uc2UgYXMgYSBSZXNwb25zZSBvYmplY3RcbiAgICovXG4gIGNhY2hlZFJlcXVlc3Q8VD4odXJsOiBzdHJpbmcsIG1heWJlT3B0aW9ucz86IEh0dHBDbGllbnRPcHRpb25zKTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1heWJlT3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBydW4gPSAoY2I6IFJlcXVlc3RDYWxsYmFjazxUPikgPT4ge1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBvcHRpb25zLmNhY2hlS2V5IHx8IHVybDtcbiAgICAgIHRoaXMuY2FjaGUuZ2V0PFQ+KGNhY2hlS2V5LCAoY2FjaGVHZXRFcnJvciwgY2FjaGVHZXRWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAoY2FjaGVHZXRFcnJvciB8fCBjYWNoZUdldFZhbHVlKSB7XG4gICAgICAgICAgY2IoY2FjaGVHZXRFcnJvciwgY2FjaGVHZXRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0PFQ+KHVybCwgKGZldGNoRXJyb3IsIGZldGNoVmFsdWUsIHhociwgdHRsUmVxKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmV0Y2hFcnJvcikge1xuICAgICAgICAgICAgICBjYihmZXRjaEVycm9yLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IHR0bCA9IHR0bFJlcSB8fCBvcHRpb25zLnR0bDtcbiAgICAgICAgICAgICAgaWYgKHR0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuc2V0KGNhY2hlS2V5LCBmZXRjaFZhbHVlLCB0dGwsIGNiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYihudWxsLCBmZXRjaFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBydW4oKGVyciwgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgIGlmICh2YWx1ZSkgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0h0dHBDbGllbnQudHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQU9BO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!**********************!*\
  !*** ./src/cache.ts ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\nvar lru_1 = __webpack_require__(/*! ./lru */ 12);\nvar DefaultApiCache = (function () {\n    function DefaultApiCache(limit) {\n        if (limit === void 0) { limit = 1000; }\n        this.lru = lru_1.MakeLRUCache(limit);\n    }\n    DefaultApiCache.prototype.isExpired = function (key) {\n        var value = this.lru.get(key, false);\n        if (value) {\n            return value.expiredIn !== 0 && value.expiredIn < Date.now();\n        }\n        else {\n            return false;\n        }\n    };\n    DefaultApiCache.prototype.get = function (key, cb) {\n        var value = this.lru.get(key, false);\n        if (value && !this.isExpired(key)) {\n            cb(null, value.data);\n        }\n        else {\n            cb && cb(null);\n        }\n    };\n    DefaultApiCache.prototype.set = function (key, value, ttl, cb) {\n        this.lru.remove(key);\n        this.lru.put(key, {\n            data: value,\n            expiredIn: ttl ? (Date.now() + (ttl * 1000)) : 0\n        });\n        cb && cb(null);\n    };\n    DefaultApiCache.prototype.remove = function (key, cb) {\n        this.lru.remove(key);\n        cb && cb(null);\n    };\n    DefaultApiCache.prototype.clear = function (cb) {\n        this.lru.removeAll();\n        cb && cb(null);\n    };\n    return DefaultApiCache;\n}());\nexports.DefaultApiCache = DefaultApiCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY2FjaGUudHM/ODdiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTFJVQ2FjaGUsIE1ha2VMUlVDYWNoZSB9IGZyb20gJy4vbHJ1JztcblxuZXhwb3J0IGludGVyZmFjZSBBcGlDYWNoZSB7XG4gIGlzRXhwaXJlZChrZXk6IFN0cmluZyk6IGJvb2xlYW47XG4gIGdldDxUPihrZXk6IHN0cmluZywgY2I6IChlcnJvcjogRXJyb3IgfCBudWxsLCBlbnRyeT86IFQpID0+IHZvaWQpOiB2b2lkO1xuICBzZXQ8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBULCB0dGw6IG51bWJlciwgY2I/OiAoZXJyb3I6IEVycm9yIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQ7XG4gIHJlbW92ZShrZXk6IHN0cmluZywgY2I/OiAoZXJyb3I6IEVycm9yIHwgbnVsbCkgPT4gdm9pZCk6IHZvaWQ7XG4gIGNsZWFyKGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRGVmYXVsdEFwaUNhY2hlIGltcGxlbWVudHMgQXBpQ2FjaGUge1xuICBscnU6IElMUlVDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihsaW1pdDogbnVtYmVyID0gMTAwMCkge1xuICAgIHRoaXMubHJ1ID0gTWFrZUxSVUNhY2hlKGxpbWl0KTtcbiAgfVxuXG4gIGlzRXhwaXJlZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5scnUuZ2V0KGtleSwgZmFsc2UpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLmV4cGlyZWRJbiAhPT0gMCAmJiB2YWx1ZS5leHBpcmVkSW4gPCBEYXRlLm5vdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZ2V0PFQ+KGtleTogc3RyaW5nLCBjYjogKGVycm9yOiBFcnJvciB8IG51bGwsIGVudHJ5PzogVCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5scnUuZ2V0KGtleSwgZmFsc2UpO1xuICAgIGlmICh2YWx1ZSAmJiAhdGhpcy5pc0V4cGlyZWQoa2V5KSkge1xuICAgICAgY2IobnVsbCwgdmFsdWUuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNiICYmIGNiKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQsIHR0bDogbnVtYmVyLCBjYj86IChlcnJvcjogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5scnUucmVtb3ZlKGtleSk7XG4gICAgdGhpcy5scnUucHV0KGtleSwge1xuICAgICAgZGF0YTogdmFsdWUsXG4gICAgICBleHBpcmVkSW46IHR0bCA/IChEYXRlLm5vdygpICsgKHR0bCAqIDEwMDApKSA6IDAsXG4gICAgfSk7XG4gICAgY2IgJiYgY2IobnVsbCk7XG4gIH1cblxuICByZW1vdmUoa2V5OiBzdHJpbmcsIGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxydS5yZW1vdmUoa2V5KTtcbiAgICBjYiAmJiBjYihudWxsKTtcbiAgfVxuXG4gIGNsZWFyKGNiPzogKGVycm9yOiBFcnJvciB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxydS5yZW1vdmVBbGwoKTtcbiAgICBjYiAmJiBjYihudWxsKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NhY2hlLnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBVUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTNDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!********************!*\
  !*** ./src/lru.ts ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n* A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n* recently used items while discarding least recently used items when its limit\n* is reached.\n*\n* Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n* Typescript-ified by Oleksandr Nikitin <https://tvori.info>\n*\n* Illustration of the design:\n*\n*       entry             entry             entry             entry\n*       ______            ______            ______            ______\n*      | head |.newer => |      |.newer => |      |.newer => | tail |\n*      |  A   |          |  B   |          |  C   |          |  D   |\n*      |______| <= older.|______| <= older.|______| <= older.|______|\n*\n*  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n*/\nexports.__esModule = true;\nfunction MakeLRUCache(limit) {\n    return new LRUCache(limit);\n}\nexports.MakeLRUCache = MakeLRUCache;\nfunction LRUCache(limit) {\n    // Current size of the cache. (Read-only).\n    this.size = 0;\n    // Maximum number of items this cache can hold.\n    this.limit = limit;\n    this._keymap = {};\n}\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function (key, value) {\n    var entry = { key: key, value: value };\n    // Note: No protection agains replacing, and thus orphan entries. By design.\n    this._keymap[key] = entry;\n    if (this.tail) {\n        // link previous tail to the new tail (entry)\n        this.tail.newer = entry;\n        entry.older = this.tail;\n    }\n    else {\n        // we're first in -- yay\n        this.head = entry;\n    }\n    // add new entry to the end of the linked list -- it's now the freshest entry.\n    this.tail = entry;\n    if (this.size === this.limit) {\n        // we hit the limit -- remove the head\n        return this.shift();\n    }\n    else {\n        // increase the size counter\n        this.size++;\n    }\n};\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function () {\n    // todo: handle special case when limit == 1\n    var entry = this.head;\n    if (entry) {\n        if (this.head.newer) {\n            this.head = this.head.newer;\n            this.head.older = undefined;\n        }\n        else {\n            this.head = undefined;\n        }\n        // Remove last strong reference to <entry> and remove links from the purged\n        // entry being returned:\n        entry.newer = entry.older = undefined;\n        // delete is slow, but we need to do this to avoid uncontrollable growth:\n        delete this._keymap[entry.key];\n    }\n    console.log('purging ', entry.key);\n    return entry;\n};\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function (key, returnEntry) {\n    // First, find our cache entry\n    var entry = this._keymap[key];\n    if (entry === undefined)\n        return; // Not cached. Sorry.\n    // As <key> was found in the cache, register it as being requested recently\n    if (entry === this.tail) {\n        // Already the most recently used entry, so no need to update the list\n        return returnEntry ? entry : entry.value;\n    }\n    // HEAD--------------TAIL\n    //   <.older   .newer>\n    //  <--- add direction --\n    //   A  B  C  <D>  E\n    if (entry.newer) {\n        if (entry === this.head)\n            this.head = entry.newer;\n        entry.newer.older = entry.older; // C <-- E.\n    }\n    if (entry.older)\n        entry.older.newer = entry.newer; // C. --> E\n    entry.newer = undefined; // D --x\n    entry.older = this.tail; // D. --> E\n    if (this.tail)\n        this.tail.newer = entry; // E. <-- D\n    this.tail = entry;\n    return returnEntry ? entry : entry.value;\n};\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function (key) {\n    return this._keymap[key];\n};\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function (key, value) {\n    var oldvalue;\n    var entry = this.get(key, true);\n    if (entry) {\n        oldvalue = entry.value;\n        entry.value = value;\n    }\n    else {\n        oldvalue = this.put(key, value);\n        if (oldvalue)\n            oldvalue = oldvalue.value;\n    }\n    return oldvalue;\n};\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function (key) {\n    var entry = this._keymap[key];\n    if (!entry)\n        return;\n    delete this._keymap[entry.key]; // need to do delete unfortunately\n    if (entry.newer && entry.older) {\n        // relink the older entry with the newer entry\n        entry.older.newer = entry.newer;\n        entry.newer.older = entry.older;\n    }\n    else if (entry.newer) {\n        // remove the link to us\n        entry.newer.older = undefined;\n        // link the newer entry to head\n        this.head = entry.newer;\n    }\n    else if (entry.older) {\n        // remove the link to us\n        entry.older.newer = undefined;\n        // link the newer entry to head\n        this.tail = entry.older;\n    }\n    else {\n        this.head = this.tail = undefined;\n    }\n    this.size--;\n    return entry.value;\n};\n/** Removes all entries */\nLRUCache.prototype.removeAll = function () {\n    // This should be safe, as we never expose strong refrences to the outside\n    this.head = this.tail = undefined;\n    this.size = 0;\n    this._keymap = {};\n};\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n    LRUCache.prototype.keys = function () { return Object.keys(this._keymap); };\n}\nelse {\n    LRUCache.prototype.keys = function () {\n        var keys = [];\n        for (var k in this._keymap)\n            keys.push(k);\n        return keys;\n    };\n}\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function (fun, context, desc) {\n    var entry;\n    if (context === true) {\n        desc = true;\n        context = undefined;\n    }\n    else if (typeof context !== 'object')\n        context = this;\n    if (desc) {\n        entry = this.tail;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.older;\n        }\n    }\n    else {\n        entry = this.head;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.newer;\n        }\n    }\n};\n/** Returns a JSON (array) representation */\n//LRUCache.prototype.toJSON = function () {\n//    var s: IEntry[] = [], entry = this.head;\n//    while (entry) {\n//        s.push({ key: entry.key.toJSON(), value: entry.value.toJSON() });\n//        entry = entry.newer;\n//    }\n//    return s;\n//};\n/** Returns a String representation */\nLRUCache.prototype.toString = function () {\n    var s = '', entry = this.head;\n    while (entry) {\n        s += String(entry.key) + ':' + entry.value;\n        entry = entry.newer;\n        if (entry)\n            s += ' < ';\n    }\n    return s;\n};\n// Export ourselves\n//if (typeof this === 'object') this.LRUCache = LRUCache; \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbHJ1LnRzPzFlNzgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4qIEEgZG91Ymx5IGxpbmtlZCBsaXN0LWJhc2VkIExlYXN0IFJlY2VudGx5IFVzZWQgKExSVSkgY2FjaGUuIFdpbGwga2VlcCBtb3N0XG4qIHJlY2VudGx5IHVzZWQgaXRlbXMgd2hpbGUgZGlzY2FyZGluZyBsZWFzdCByZWNlbnRseSB1c2VkIGl0ZW1zIHdoZW4gaXRzIGxpbWl0XG4qIGlzIHJlYWNoZWQuXG4qXG4qIExpY2Vuc2VkIHVuZGVyIE1JVC4gQ29weXJpZ2h0IChjKSAyMDEwIFJhc211cyBBbmRlcnNzb24gPGh0dHA6Ly9odW5jaC5zZS8+XG4qIFR5cGVzY3JpcHQtaWZpZWQgYnkgT2xla3NhbmRyIE5pa2l0aW4gPGh0dHBzOi8vdHZvcmkuaW5mbz5cbipcbiogSWxsdXN0cmF0aW9uIG9mIHRoZSBkZXNpZ246XG4qXG4qICAgICAgIGVudHJ5ICAgICAgICAgICAgIGVudHJ5ICAgICAgICAgICAgIGVudHJ5ICAgICAgICAgICAgIGVudHJ5XG4qICAgICAgIF9fX19fXyAgICAgICAgICAgIF9fX19fXyAgICAgICAgICAgIF9fX19fXyAgICAgICAgICAgIF9fX19fX1xuKiAgICAgIHwgaGVhZCB8Lm5ld2VyID0+IHwgICAgICB8Lm5ld2VyID0+IHwgICAgICB8Lm5ld2VyID0+IHwgdGFpbCB8XG4qICAgICAgfCAgQSAgIHwgICAgICAgICAgfCAgQiAgIHwgICAgICAgICAgfCAgQyAgIHwgICAgICAgICAgfCAgRCAgIHxcbiogICAgICB8X19fX19ffCA8PSBvbGRlci58X19fX19ffCA8PSBvbGRlci58X19fX19ffCA8PSBvbGRlci58X19fX19ffFxuKlxuKiAgcmVtb3ZlZCAgPC0tICA8LS0gIDwtLSAgPC0tICA8LS0gIDwtLSAgPC0tICA8LS0gIDwtLSAgPC0tICA8LS0gIGFkZGVkXG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gTWFrZUxSVUNhY2hlKGxpbWl0OiBudW1iZXIpOiBJTFJVQ2FjaGUge1xuICAgIHJldHVybiBuZXcgKDxhbnk+TFJVQ2FjaGUpKGxpbWl0KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTFJVQ2FjaGUge1xuICAgIHB1dChrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gICAgZ2V0KGtleTogc3RyaW5nLCBFbnRyeTogYm9vbGVhbik6IGFueTtcbiAgICByZW1vdmUoa2V5OiBTdHJpbmcpOiB2b2lkO1xuICAgIHJlbW92ZUFsbCgpOiB2b2lkO1xufVxuXG5mdW5jdGlvbiBMUlVDYWNoZShsaW1pdDogbnVtYmVyKSB7XG4gICAgLy8gQ3VycmVudCBzaXplIG9mIHRoZSBjYWNoZS4gKFJlYWQtb25seSkuXG4gICAgdGhpcy5zaXplID0gMDtcbiAgICAvLyBNYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0aGlzIGNhY2hlIGNhbiBob2xkLlxuICAgIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgICB0aGlzLl9rZXltYXAgPSB7fTtcbn1cblxuaW50ZXJmYWNlIElFbnRyeSB7XG4gICAgbmV3ZXI/OiBJRW50cnk7XG4gICAgb2xkZXI/OiBJRW50cnk7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgdmFsdWU6IGFueTtcbn1cblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhc1xuICogcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWRcbiAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIHZhciBlbnRyeTogSUVudHJ5ID0geyBrZXk6IGtleSwgdmFsdWU6IHZhbHVlIH07XG4gICAgLy8gTm90ZTogTm8gcHJvdGVjdGlvbiBhZ2FpbnMgcmVwbGFjaW5nLCBhbmQgdGh1cyBvcnBoYW4gZW50cmllcy4gQnkgZGVzaWduLlxuICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG4gICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgICAvLyBsaW5rIHByZXZpb3VzIHRhaWwgdG8gdGhlIG5ldyB0YWlsIChlbnRyeSlcbiAgICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG4gICAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHdlJ3JlIGZpcnN0IGluIC0tIHlheVxuICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB9XG4gICAgLy8gYWRkIG5ldyBlbnRyeSB0byB0aGUgZW5kIG9mIHRoZSBsaW5rZWQgbGlzdCAtLSBpdCdzIG5vdyB0aGUgZnJlc2hlc3QgZW50cnkuXG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuICAgICAgICAvLyB3ZSBoaXQgdGhlIGxpbWl0IC0tIHJlbW92ZSB0aGUgaGVhZFxuICAgICAgICByZXR1cm4gdGhpcy5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGluY3JlYXNlIHRoZSBzaXplIGNvdW50ZXJcbiAgICAgICAgdGhpcy5zaXplKys7XG4gICAgfVxufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZSBjYWNoZS4gUmV0dXJucyB0aGVcbiAqIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZSBjYWNoZSB3YXMgZW1wdHkuXG4gKlxuICogSWYgeW91IG5lZWQgdG8gcGVyZm9ybSBhbnkgZm9ybSBvZiBmaW5hbGl6YXRpb24gb2YgcHVyZ2VkIGl0ZW1zLCB0aGlzIGlzIGFcbiAqIGdvb2QgcGxhY2UgdG8gZG8gaXQuIFNpbXBseSBvdmVycmlkZS9yZXBsYWNlIHRoaXMgZnVuY3Rpb246XG4gKlxuICogICB2YXIgYyA9IG5ldyBMUlVDYWNoZSgxMjMpO1xuICogICBjLnNoaWZ0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgdmFyIGVudHJ5ID0gTFJVQ2FjaGUucHJvdG90eXBlLnNoaWZ0LmNhbGwodGhpcyk7XG4gKiAgICAgZG9Tb21ldGhpbmdXaXRoKGVudHJ5KTtcbiAqICAgICByZXR1cm4gZW50cnk7XG4gKiAgIH1cbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHRvZG86IGhhbmRsZSBzcGVjaWFsIGNhc2Ugd2hlbiBsaW1pdCA9PSAxXG4gICAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgICBpZiAodGhpcy5oZWFkLm5ld2VyKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG4gICAgICAgICAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIGxhc3Qgc3Ryb25nIHJlZmVyZW5jZSB0byA8ZW50cnk+IGFuZCByZW1vdmUgbGlua3MgZnJvbSB0aGUgcHVyZ2VkXG4gICAgICAgIC8vIGVudHJ5IGJlaW5nIHJldHVybmVkOlxuICAgICAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBkZWxldGUgaXMgc2xvdywgYnV0IHdlIG5lZWQgdG8gZG8gdGhpcyB0byBhdm9pZCB1bmNvbnRyb2xsYWJsZSBncm93dGg6XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9rZXltYXBbZW50cnkua2V5XTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ3B1cmdpbmcgJywgZW50cnkua2V5KTtcbiAgICByZXR1cm4gZW50cnk7XG59O1xuXG4vKipcbiAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+XG4gKiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuICovXG5MUlVDYWNoZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleTogc3RyaW5nLCByZXR1cm5FbnRyeTogYm9vbGVhbik6IGFueSB7XG4gICAgLy8gRmlyc3QsIGZpbmQgb3VyIGNhY2hlIGVudHJ5XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG4gICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gTm90IGNhY2hlZC4gU29ycnkuXG4gICAgLy8gQXMgPGtleT4gd2FzIGZvdW5kIGluIHRoZSBjYWNoZSwgcmVnaXN0ZXIgaXQgYXMgYmVpbmcgcmVxdWVzdGVkIHJlY2VudGx5XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcbiAgICAgICAgLy8gQWxyZWFkeSB0aGUgbW9zdCByZWNlbnRseSB1c2VkIGVudHJ5LCBzbyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuICAgIH1cbiAgICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG4gICAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuICAgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZClcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICAgIH1cbiAgICBpZiAoZW50cnkub2xkZXIpXG4gICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gICAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG4gICAgaWYgKHRoaXMudGFpbClcbiAgICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEZvbGxvd2luZyBjb2RlIGlzIG9wdGlvbmFsIGFuZCBjYW4gYmUgcmVtb3ZlZCB3aXRob3V0IGJyZWFraW5nIHRoZSBjb3JlXG4vLyBmdW5jdGlvbmFsaXR5LlxuXG4vKipcbiAqIENoZWNrIGlmIDxrZXk+IGlzIGluIHRoZSBjYWNoZSB3aXRob3V0IHJlZ2lzdGVyaW5nIHJlY2VudCB1c2UuIEZlYXNpYmxlIGlmXG4gKiB5b3UgZG8gbm90IHdhbnQgdG8gY2hhZ2UgdGhlIHN0YXRlIG9mIHRoZSBjYWNoZSwgYnV0IG9ubHkgXCJwZWVrXCIgYXQgaXQuXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSBhc3NvY2lhdGVkIHdpdGggPGtleT4gaWYgZm91bmQsIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQuXG4gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuX2tleW1hcFtrZXldO1xufTtcblxuLyoqXG4gKiBVcGRhdGUgdGhlIHZhbHVlIG9mIGVudHJ5IHdpdGggPGtleT4uIFJldHVybnMgdGhlIG9sZCB2YWx1ZSwgb3IgdW5kZWZpbmVkIGlmXG4gKiBlbnRyeSB3YXMgbm90IGluIHRoZSBjYWNoZS5cbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIHZhciBvbGR2YWx1ZTogYW55O1xuICAgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICAgIG9sZHZhbHVlID0gZW50cnkudmFsdWU7XG4gICAgICAgIGVudHJ5LnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2xkdmFsdWUgPSB0aGlzLnB1dChrZXksIHZhbHVlKTtcbiAgICAgICAgaWYgKG9sZHZhbHVlKSBvbGR2YWx1ZSA9IG9sZHZhbHVlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2xkdmFsdWU7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBlbnRyeSA8a2V5PiBmcm9tIGNhY2hlIGFuZCByZXR1cm4gaXRzIHZhbHVlLiBSZXR1cm5zIHVuZGVmaW5lZCBpZiBub3RcbiAqIGZvdW5kLlxuICovXG5MUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleTogc3RyaW5nKSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG4gICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xuICAgIGRlbGV0ZSB0aGlzLl9rZXltYXBbZW50cnkua2V5XTsgLy8gbmVlZCB0byBkbyBkZWxldGUgdW5mb3J0dW5hdGVseVxuICAgIGlmIChlbnRyeS5uZXdlciAmJiBlbnRyeS5vbGRlcikge1xuICAgICAgICAvLyByZWxpbmsgdGhlIG9sZGVyIGVudHJ5IHdpdGggdGhlIG5ld2VyIGVudHJ5XG4gICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgfSBlbHNlIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGxpbmsgdG8gdXNcbiAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIGxpbmsgdGhlIG5ld2VyIGVudHJ5IHRvIGhlYWRcbiAgICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG4gICAgfSBlbHNlIGlmIChlbnRyeS5vbGRlcikge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGxpbmsgdG8gdXNcbiAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIGxpbmsgdGhlIG5ld2VyIGVudHJ5IHRvIGhlYWRcbiAgICAgICAgdGhpcy50YWlsID0gZW50cnkub2xkZXI7XG4gICAgfSBlbHNlIHsvLyBpZihlbnRyeS5vbGRlciA9PT0gdW5kZWZpbmVkICYmIGVudHJ5Lm5ld2VyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuc2l6ZS0tO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZTtcbn07XG5cbi8qKiBSZW1vdmVzIGFsbCBlbnRyaWVzICovXG5MUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFRoaXMgc2hvdWxkIGJlIHNhZmUsIGFzIHdlIG5ldmVyIGV4cG9zZSBzdHJvbmcgcmVmcmVuY2VzIHRvIHRoZSBvdXRzaWRlXG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgdGhpcy5fa2V5bWFwID0ge307XG59O1xuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBjb250YWluaW5nIGFsbCBrZXlzIG9mIGVudHJpZXMgc3RvcmVkIGluIHRoZSBjYWNoZSBvYmplY3QsIGluXG4gKiBhcmJpdHJhcnkgb3JkZXIuXG4gKi9cbmlmICh0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBMUlVDYWNoZS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2tleW1hcCk7IH07XG59IGVsc2Uge1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9rZXltYXApIGtleXMucHVzaChrKTtcbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBDYWxsIGBmdW5gIGZvciBlYWNoIGVudHJ5LiBTdGFydGluZyB3aXRoIHRoZSBuZXdlc3QgZW50cnkgaWYgYGRlc2NgIGlzIGEgdHJ1ZVxuICogdmFsdWUsIG90aGVyd2lzZSBzdGFydHMgd2l0aCB0aGUgb2xkZXN0IChoZWFkKSBlbnJ0eSBhbmQgbW92ZXMgdG93YXJkcyB0aGVcbiAqIHRhaWwuXG4gKlxuICogYGZ1bmAgaXMgY2FsbGVkIHdpdGggMyBhcmd1bWVudHMgaW4gdGhlIGNvbnRleHQgYGNvbnRleHRgOlxuICogICBgZnVuLmNhbGwoY29udGV4dCwgT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVlLCBMUlVDYWNoZSBzZWxmKWBcbiAqL1xuTFJVQ2FjaGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZnVuOiBGdW5jdGlvbiwgY29udGV4dDogYW55LCBkZXNjOiBib29sZWFuKSB7XG4gICAgdmFyIGVudHJ5OiBJRW50cnkgfCB1bmRlZmluZWQ7XG4gICAgaWYgKGNvbnRleHQgPT09IHRydWUpIHsgZGVzYyA9IHRydWU7IGNvbnRleHQgPSB1bmRlZmluZWQ7IH1cbiAgICBlbHNlIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcpIGNvbnRleHQgPSB0aGlzO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICAgIGVudHJ5ID0gdGhpcy50YWlsO1xuICAgICAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgICAgICAgIGZ1bi5jYWxsKGNvbnRleHQsIGVudHJ5LmtleSwgZW50cnkudmFsdWUsIHRoaXMpO1xuICAgICAgICAgICAgZW50cnkgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJ5ID0gdGhpcy5oZWFkO1xuICAgICAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgICAgICAgIGZ1bi5jYWxsKGNvbnRleHQsIGVudHJ5LmtleSwgZW50cnkudmFsdWUsIHRoaXMpO1xuICAgICAgICAgICAgZW50cnkgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKiBSZXR1cm5zIGEgSlNPTiAoYXJyYXkpIHJlcHJlc2VudGF0aW9uICovXG4vL0xSVUNhY2hlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4vLyAgICB2YXIgczogSUVudHJ5W10gPSBbXSwgZW50cnkgPSB0aGlzLmhlYWQ7XG4vLyAgICB3aGlsZSAoZW50cnkpIHtcbi8vICAgICAgICBzLnB1c2goeyBrZXk6IGVudHJ5LmtleS50b0pTT04oKSwgdmFsdWU6IGVudHJ5LnZhbHVlLnRvSlNPTigpIH0pO1xuLy8gICAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4vLyAgICB9XG4vLyAgICByZXR1cm4gcztcbi8vfTtcblxuLyoqIFJldHVybnMgYSBTdHJpbmcgcmVwcmVzZW50YXRpb24gKi9cbkxSVUNhY2hlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcyA9ICcnLCBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgICAgcyArPSBTdHJpbmcoZW50cnkua2V5KSArICc6JyArIGVudHJ5LnZhbHVlO1xuICAgICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICBpZiAoZW50cnkpXG4gICAgICAgICAgICBzICs9ICcgPCAnO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn07XG5cbi8vIEV4cG9ydCBvdXJzZWx2ZXNcbi8vaWYgKHR5cGVvZiB0aGlzID09PSAnb2JqZWN0JykgdGhpcy5MUlVDYWNoZSA9IExSVUNhY2hlO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9scnUudHMiXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!************************!*\
  !*** ./src/request.ts ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nexports.__esModule = true;\n// Number of maximum simultaneous connections to the prismic server\nvar MAX_CONNECTIONS = 20;\n// Number of requests currently running (capped by MAX_CONNECTIONS)\nvar running = 0;\n// Requests in queue\nvar queue = [];\nfunction fetchRequest(url, options, callback) {\n    var fetchOptions = {\n        headers: {\n            Accept: 'application/json'\n        }\n    };\n    if (options && options.proxyAgent) {\n        fetchOptions.agent = options.proxyAgent;\n    }\n    fetch(url, fetchOptions).then(function (xhr) {\n        if (~~(xhr.status / 100 !== 2)) {\n            var e = new Error(\"Unexpected status code [\" + xhr.status + \"] on URL \" + url);\n            e.status = xhr.status;\n            throw e;\n        }\n        else {\n            return xhr.json().then(function (result) {\n                var cacheControl = xhr.headers.get('cache-control');\n                var parsedCacheControl = cacheControl ? /max-age=(\\d+)/.exec(cacheControl) : null;\n                var ttl = parsedCacheControl ? parseInt(parsedCacheControl[1], 10) : undefined;\n                callback(null, result, xhr, ttl);\n            });\n        }\n    })[\"catch\"](callback);\n}\nfunction processQueue(options) {\n    if (queue.length > 0 && running < MAX_CONNECTIONS) {\n        running++;\n        var req_1 = queue.shift();\n        if (req_1) {\n            fetchRequest(req_1.url, options, function (error, result, xhr, ttl) {\n                running--;\n                req_1.callback(error, result, xhr, ttl);\n                processQueue(options);\n            });\n        }\n    }\n}\nvar DefaultRequestHandler = (function () {\n    function DefaultRequestHandler(options) {\n        this.options = options || {};\n    }\n    DefaultRequestHandler.prototype.request = function (url, callback) {\n        queue.push({ url: url, callback: callback });\n        processQueue(this.options);\n    };\n    return DefaultRequestHandler;\n}());\nexports.DefaultRequestHandler = DefaultRequestHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVxdWVzdC50cz85YjUwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE51bWJlciBvZiBtYXhpbXVtIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucyB0byB0aGUgcHJpc21pYyBzZXJ2ZXJcbmNvbnN0IE1BWF9DT05ORUNUSU9OUzogbnVtYmVyID0gMjA7XG5cbi8vIE51bWJlciBvZiByZXF1ZXN0cyBjdXJyZW50bHkgcnVubmluZyAoY2FwcGVkIGJ5IE1BWF9DT05ORUNUSU9OUylcbmxldCBydW5uaW5nOiBudW1iZXIgPSAwO1xuXG5pbnRlcmZhY2UgVGFzayB7XG4gIHVybDogc3RyaW5nO1xuICBjYWxsYmFjazogUmVxdWVzdENhbGxiYWNrPGFueT47XG59XG5cbi8vIFJlcXVlc3RzIGluIHF1ZXVlXG5jb25zdCBxdWV1ZTogVGFza1tdID0gW107XG5cbmludGVyZmFjZSBOb2RlUmVxdWVzdEluaXQgZXh0ZW5kcyBSZXF1ZXN0SW5pdCB7XG4gIGFnZW50PzogYW55O1xufVxuXG5mdW5jdGlvbiBmZXRjaFJlcXVlc3Q8VD4odXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RIYW5kbGVyT3B0aW9uLCBjYWxsYmFjazogUmVxdWVzdENhbGxiYWNrPFQ+KTogdm9pZCB7XG5cbiAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gIH0gYXMgTm9kZVJlcXVlc3RJbml0O1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucHJveHlBZ2VudCkge1xuICAgIGZldGNoT3B0aW9ucy5hZ2VudCA9IG9wdGlvbnMucHJveHlBZ2VudDtcbiAgfVxuXG4gIGZldGNoKHVybCwgZmV0Y2hPcHRpb25zKS50aGVuKCh4aHIpID0+IHtcbiAgICBpZiAofn4oeGhyLnN0YXR1cyAvIDEwMCAhPT0gMikpIHtcbiAgICAgIGNvbnN0IGU6IGFueSA9IG5ldyBFcnJvcihgVW5leHBlY3RlZCBzdGF0dXMgY29kZSBbJHt4aHIuc3RhdHVzfV0gb24gVVJMICR7dXJsfWApO1xuICAgICAgZS5zdGF0dXMgPSB4aHIuc3RhdHVzO1xuICAgICAgdGhyb3cgZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHhoci5qc29uKCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGNhY2hlQ29udHJvbCA9IHhoci5oZWFkZXJzLmdldCgnY2FjaGUtY29udHJvbCcpO1xuICAgICAgICBjb25zdCBwYXJzZWRDYWNoZUNvbnRyb2wgPSBjYWNoZUNvbnRyb2wgPyAvbWF4LWFnZT0oXFxkKykvLmV4ZWMoY2FjaGVDb250cm9sKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IHR0bCA9IHBhcnNlZENhY2hlQ29udHJvbCA/IHBhcnNlSW50KHBhcnNlZENhY2hlQ29udHJvbFsxXSwgMTApIDogdW5kZWZpbmVkO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQsIHhociwgdHRsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSkuY2F0Y2goY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzUXVldWUob3B0aW9uczogUmVxdWVzdEhhbmRsZXJPcHRpb24pOiB2b2lkIHtcbiAgaWYgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgcnVubmluZyA8IE1BWF9DT05ORUNUSU9OUykge1xuICAgIHJ1bm5pbmcrKztcblxuICAgIGNvbnN0IHJlcSA9IHF1ZXVlLnNoaWZ0KCk7XG5cbiAgICBpZiAocmVxKSB7XG5cbiAgICAgIGZldGNoUmVxdWVzdChyZXEudXJsLCBvcHRpb25zLCAoZXJyb3IsIHJlc3VsdCwgeGhyLCB0dGwpID0+IHtcbiAgICAgICAgcnVubmluZy0tO1xuICAgICAgICByZXEuY2FsbGJhY2soZXJyb3IsIHJlc3VsdCwgeGhyLCB0dGwpO1xuICAgICAgICBwcm9jZXNzUXVldWUob3B0aW9ucyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgUmVxdWVzdENhbGxiYWNrPFQ+ID0gKGVycm9yOiBFcnJvciB8IG51bGwsIHJlc3VsdD86IFQgfCBudWxsLCB4aHI/OiBhbnksIHR0bD86IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlck9wdGlvbiB7XG4gIHByb3h5QWdlbnQ/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdEhhbmRsZXIge1xuICByZXF1ZXN0PFQ+KHVybDogc3RyaW5nLCBjYjogUmVxdWVzdENhbGxiYWNrPFQ+KTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIERlZmF1bHRSZXF1ZXN0SGFuZGxlciBpbXBsZW1lbnRzIFJlcXVlc3RIYW5kbGVyIHtcblxuICBvcHRpb25zOiBSZXF1ZXN0SGFuZGxlck9wdGlvbjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogUmVxdWVzdEhhbmRsZXJPcHRpb24pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB9XG5cbiAgcmVxdWVzdDxUPih1cmw6IHN0cmluZywgY2FsbGJhY2s6IFJlcXVlc3RDYWxsYmFjazxUPik6IHZvaWQge1xuICAgIHF1ZXVlLnB1c2goeyB1cmwsIGNhbGxiYWNrIH0pO1xuICAgIHByb2Nlc3NRdWV1ZSh0aGlzLm9wdGlvbnMpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVxdWVzdC50cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFaQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n");

/***/ })
/******/ ]);
});